# file opened: z80/sounddriver.asm
   1  0000              ;
   2  0000              ; +-------------------------------------------------------------------------+
   3  0000              ; |      This file was generated by The Interactive Disassembler (IDA)      |
   4  0000              ; |           Copyright (c) 2023 Hex-Rays, <support@hex-rays.com>           |
   5  0000              ; |                Licensed to: <error retrieving user info>                |
   6  0000              ; +-------------------------------------------------------------------------+
   7  0000              ;
   8  0000              ; Input MD5    : 1FAE0EF46830D5A6ED0FBDB43B8A8FAD
   9  0000              ; Input CRC32  : CB036015
  10  0000              ; ---------------------------------------------------------------------------
  11  0000              ; Processor       : z80 []
  12  0000              ; Target assembler: Zilog Macro Assembler
  13  0000              ; ===========================================================================
  14  0000              ; Segment type: Pure code
  15  0000              ; Main segment
  16  0000              ; =============== S U B R O U T I N E =======================================
  17  0000
  18  0000              STACK EQU $1FFF
  19  0000
  20  0000              start:                                  ; CODE XREF: RAM:NMInt↓j
  21  0000 F3                           di
  22  0001 ED 56                        im      1
  23  0003 C3 69 00                     jp      InitDriver
  24  0006              ; ---------------------------------------------------------------------------
  25  0006 00                           nop
  26  0007 00                           nop
  27  0008 00                           nop
  28  0009 00                           nop
  29  000A 00                           nop
  30  000B 00                           nop
  31  000C 00                           nop
  32  000D 00                           nop
  33  000E 00                           nop
  34  000F 00                           nop
  35  0010 00                           nop
  36  0011 00                           nop
  37  0012 00                           nop
  38  0013 00                           nop
  39  0014 00                           nop
  40  0015 00                           nop
  41  0016 00                           nop
  42  0017 00                           nop
  43  0018 00                           nop
  44  0019 00                           nop
  45  001A 00                           nop
  46  001B 00                           nop
  47  001C 00                           nop
  48  001D 00                           nop
  49  001E 00                           nop
  50  001F 00                           nop
  51  0020 00                           nop
  52  0021 00                           nop
  53  0022 00                           nop
  54  0023 00                           nop
  55  0024 00                           nop
  56  0025 00                           nop
  57  0026 00                           nop
  58  0027 00                           nop
  59  0028 00                           nop
  60  0029 00                           nop
  61  002A 00                           nop
  62  002B 00                           nop
  63  002C 00                           nop
  64  002D 00                           nop
  65  002E 00                           nop
  66  002F 00                           nop
  67  0030 00                           nop
  68  0031 00                           nop
  69  0032 00                           nop
  70  0033 00                           nop
  71  0034 00                           nop
  72  0035 00                           nop
  73  0036 00                           nop
  74  0037 00                           nop
  75  0038              ; ---------------------------------------------------------------------------
  76  0038
  77  0038              VInt:
  78  0038 F3                           di
  79  0039 DB BF                        in      a, (0BFh)       ; Master System leftover ...
  80  003B F5                           push    af
  81  003C 08                           ex      af, af'
  82  003D F5                           push    af
  83  003E C5                           push    bc
  84  003F D5                           push    de
  85  0040 E5                           push    hl
  86  0041 FD E5                        push    iy
  87  0043 DD E5                        push    ix
  88  0045 CD 57 00                     call    WaitABit
  89  0048 CD 64 02                     call    UpdateAll
  90  004B DD E1                        pop     ix
  91  004D FD E1                        pop     iy
  92  004F E1                           pop     hl
  93  0050 D1                           pop     de
  94  0051 C1                           pop     bc
  95  0052 F1                           pop     af
  96  0053 08                           ex      af, af'
  97  0054 F1                           pop     af
  98  0055 FB                           ei
  99  0056 C9                           ret
 100  0057
 101  0057              ; =============== S U B R O U T I N E =======================================
 102  0057
 103  0057
 104  0057              WaitABit:                               ; CODE XREF: RAM:0045↑p
 105  0057 01 E0 01                     ld      bc, 1E0h
 106  005A
 107  005A              loc_5A:                                 ; CODE XREF: WaitABit+8↓j
 108  005A E5                           push    hl
 109  005B E1                           pop     hl
 110  005C 0B                           dec     bc
 111  005D 79                           ld      a, c
 112  005E B7                           or      a
 113  005F 20 F9                        jr      nz, loc_5A
 114  0061 C9                           ret
 115  0062              ; End of function WaitABit
 116  0062
 117  0062              ; ---------------------------------------------------------------------------
 118  0062 00 00 00                     db 0, 0, 0
 119  0065 00                           db 0                    ; DATA XREF: ResetFMChip↓o
 120  0066              ; ---------------------------------------------------------------------------
 121  0066
 122  0066              NMInt:                                  ; non-maskable Interrupts are unused on the MD's Z80
 123  0066 C3 00 00                     jp      start
 124  0069              ; ---------------------------------------------------------------------------
 125  0069
 126  0069              InitDriver:                             ; CODE XREF: RAM:0003↑j
 127  0069 31 FF 1F                     ld      sp, STACK
 128  006C AF                           xor     a
 129  006D 21 05 1D                     ld      hl, $1D05
 130  0070 11 06 1D                     ld      de, $1D06
 131  0073 01 F9 02                     ld      bc, 2F9h
 132  0076 77                           ld      (hl), a
 133  0077 ED B0                        ldir                    ; clear track memory
 134  0079 AF                           xor     a               ; switch to Bank 010000
 135  007A 32 00 60                     ld      (6000h), a      ; Bank bits written: 002h
 136  007D 3E 01                        ld      a, 1
 137  007F 32 00 60                     ld      (6000h), a
 138  0082 AF                           xor     a
 139  0083 32 00 60                     ld      (6000h), a
 140  0086 32 00 60                     ld      (6000h), a
 141  0089 32 00 60                     ld      (6000h), a
 142  008C 32 00 60                     ld      (6000h), a
 143  008F 32 00 60                     ld      (6000h), a
 144  0092 32 00 60                     ld      (6000h), a
 145  0095 32 00 60                     ld      (6000h), a
 146  0098 CD F4 0C                     call    SilencePSG
 147  009B 3E 2F                        ld      a, 2Fh          ; Registers 2D/2F are Prescaler registers on other OPN chips,
 148  009D 32 00 40                     ld      (4000h), a      ; so this was probably written with 2xYM2203 in mind.
 149  00A0 32 02 40                     ld      (4002h), a
 150  00A3 CD B7 00                     call    ResetFMChip
 151  00A6 3E 2D                        ld      a, 2Dh
 152  00A8 32 00 40                     ld      (4000h), a
 153  00AB 32 02 40                     ld      (4002h), a
 154  00AE FB                           ei
 155  00AF
 156  00AF              loc_AF:                                 ; CODE XREF: RAM:00B0↓j
 157  00AF 00                           nop
 158  00B0 C3 AF 00                     jp      loc_AF
 159  00B3              ; ---------------------------------------------------------------------------
 160  00B3 32 03 1D                     ld      ($1D03), a
 161  00B6 C9                           ret
 162  00B7
 163  00B7              ; =============== S U B R O U T I N E =======================================
 164  00B7
 165  00B7
 166  00B7              ResetFMChip:                            ; CODE XREF: RAM:00A3↑p
 167  00B7 DD 21 65 00                  ld      ix, $65
 168  00BB CD D2 0C                     call    SilenceFM
 169  00BE 3E 40                        ld      a, 40h
 170  00C0 32 10 1D                     ld      ($1D10), a  ; enable FM 3 Special Mode
 171  00C3 0E 27                        ld      c, 27h
 172  00C5 CD DD 0D                     call    WriteFMI
 173  00C8 C9                           ret
 174  00C9              ; End of function ResetFMChip
 175  00C9
 176  00C9
 177  00C9              ; =============== S U B R O U T I N E =======================================
 178  00C9
 179  00C9
 180  00C9              DoPause_Exit:                           ; CODE XREF: UpdateAll+3↓p
 181  00C9 3A 08 1D                     ld      a, ($1D08)  ; 1D08 = Pause Mode
 182  00CC B7                           or      a
 183  00CD C8                           ret     z               ; 00 - unpaused
 184  00CE CD 05 0D                     call    SilenceAll      ; 01-FF - paused, so mute everything...
 185  00D1 E1                           pop     hl              ; ... and make it skip the sound update
 186  00D2 C9                           ret
 187  00D3              ; End of function DoPause_Exit
 188  00D3
 189  00D3
 190  00D3              ; =============== S U B R O U T I N E =======================================
 191  00D3
 192  00D3
 193  00D3              DoUnpause:                              ; CODE XREF: UpdateAll↓p
 194  00D3 3A 08 1D                     ld      a, ($1D08)
 195  00D6 B7                           or      a
 196  00D7 C8                           ret     z
 197  00D8 3A 09 1D                     ld      a, ($1D09)
 198  00DB B7                           or      a
 199  00DC C8                           ret     z
 200  00DD AF                           xor     a
 201  00DE 32 08 1D                     ld      ($1D08), a
 202  00E1 32 09 1D                     ld      ($1D09), a
 203  00E4 CD 2D 0D                     call    UnpauseOrStop
 204  00E7 C9                           ret
 205  00E8              ; End of function DoUnpause
 206  00E8
 207  00E8
 208  00E8              ; =============== S U B R O U T I N E =======================================
 209  00E8
 210  00E8
 211  00E8              DoFading:                               ; CODE XREF: UpdateAll+C↓p
 212  00E8 3A 0C 1D                     ld      a, ($1D0C)  ; load remaining Fading Steps
 213  00EB B7                           or      a
 214  00EC C8                           ret     z               ; reached 0 - return
 215  00ED 3A 0D 1D                     ld      a, ($1D0D)  ; 1D0D - Timeout Counter
 216  00F0 3D                           dec     a
 217  00F1 28 04                        jr      z, ApplyFading  ; reached 0 - apply fading
 218  00F3 32 0D 1D                     ld      ($1D0D), a  ; else just write back
 219  00F6 C9                           ret
 220  00F7              ; ---------------------------------------------------------------------------
 221  00F7
 222  00F7              ApplyFading:                            ; CODE XREF: DoFading+9↑j
 223  00F7 3E 02                        ld      a, 2
 224  00F9 32 0D 1D                     ld      ($1D0D), a  ; 1D0D (Counter) = 2 frames until next execution
 225  00FC 3A 0C 1D                     ld      a, ($1D0C)
 226  00FF 3D                           dec     a               ; decrement Fading Steps
 227  0100 32 0C 1D                     ld      ($1D0C), a
 228  0103 CA C1 0C                     jp      z, StopAllSound
 229  0106 21 4E 1D                     ld      hl,  $1D46+8
 230  0109 11 30 00                     ld      de, 30h
 231  010C 06 06                        ld      b, 6
 232  010E
 233  010E              loc_10E:                                ; CODE XREF: DoFading+2E↓j
 234  010E 7E                           ld      a, (hl)
 235  010F 3C                           inc     a
 236  0110 FE 7F                        cp      7Fh
 237  0112 30 01                        jr      nc, loc_115
 238  0114 77                           ld      (hl), a
 239  0115
 240  0115              loc_115:                                ; CODE XREF: DoFading+2A↑j
 241  0115 19                           add     hl, de
 242  0116 10 F6                        djnz    loc_10E
 243  0118 FD 21 46 1D                  ld      iy, $1D46   ; 1D46 - Music Tracks
 244  011C 11 30 00                     ld      de, 30h
 245  011F 06 06                        ld      b, 6
 246  0121
 247  0121              loc_121:                                ; CODE XREF: DoFading+58↓j
 248  0121 FD 7E 01                     ld      a, (iy+1)
 249  0124 FE 02                        cp      2
 250  0126 CA 3E 01                     jp      z, loc_13E      ; skip FM 3 (drum channel)
 251  0129 FD 7E 17                     ld      a, (iy+17h)
 252  012C E6 07                        and     7
 253  012E FE 04                        cp      4
 254  0130 CA 69 01                     jp      z, WriteVolOp_8
 255  0133 DA 7D 01                     jp      c, WriteVolOp_C
 256  0136 FE 07                        cp      7
 257  0138 DA 55 01                     jp      c, WriteVolOp_4
 258  013B C3 43 01                     jp      WriteVolOp_0
 259  013E              ; ---------------------------------------------------------------------------
 260  013E
 261  013E              loc_13E:                                ; CODE XREF: DoFading+3E↑j
 262  013E                                                      ; DoFading+A9↓j
 263  013E FD 19                        add     iy, de
 264  0140 10 DF                        djnz    loc_121
 265  0142 C9                           ret
 266  0143              ; ---------------------------------------------------------------------------
 267  0143
 268  0143              WriteVolOp_0:                           ; CODE XREF: DoFading+53↑j
 269  0143 CD 9E 01                     call    GetFMVolReg_F
 270  0146 4F                           ld      c, a
 271  0147 FD 7E 08                     ld      a, (iy+8)
 272  014A FD 86 18                     add     a, (iy+18h)
 273  014D FE 7F                        cp      7Fh
 274  014F D2 94 01                     jp      nc, FadeCancel
 275  0152 CD A6 01                     call    WriteFMIorII_2
 276  0155
 277  0155              WriteVolOp_4:                           ; CODE XREF: DoFading+50↑j
 278  0155 CD 9E 01                     call    GetFMVolReg_F
 279  0158 C6 04                        add     a, 4
 280  015A 4F                           ld      c, a
 281  015B FD 7E 08                     ld      a, (iy+8)
 282  015E FD 86 1A                     add     a, (iy+1Ah)
 283  0161 FE 7F                        cp      7Fh
 284  0163 D2 94 01                     jp      nc, FadeCancel
 285  0166 CD A6 01                     call    WriteFMIorII_2
 286  0169
 287  0169              WriteVolOp_8:                           ; CODE XREF: DoFading+48↑j
 288  0169 CD 9E 01                     call    GetFMVolReg_F
 289  016C C6 08                        add     a, 8
 290  016E 4F                           ld      c, a
 291  016F FD 7E 08                     ld      a, (iy+8)
 292  0172 FD 86 19                     add     a, (iy+19h)
 293  0175 FE 7F                        cp      7Fh
 294  0177 D2 94 01                     jp      nc, FadeCancel
 295  017A CD A6 01                     call    WriteFMIorII_2
 296  017D
 297  017D              WriteVolOp_C:                           ; CODE XREF: DoFading+4B↑j
 298  017D CD 9E 01                     call    GetFMVolReg_F
 299  0180 C6 0C                        add     a, 0Ch
 300  0182 4F                           ld      c, a
 301  0183 FD 7E 08                     ld      a, (iy+8)
 302  0186 FD 86 1B                     add     a, (iy+1Bh)
 303  0189 FE 7F                        cp      7Fh
 304  018B D2 94 01                     jp      nc, FadeCancel
 305  018E CD A6 01                     call    WriteFMIorII_2
 306  0191 C3 3E 01                     jp      loc_13E
 307  0194              ; ---------------------------------------------------------------------------
 308  0194
 309  0194              FadeCancel:                             ; CODE XREF: DoFading+67↑j
 310  0194                                                      ; DoFading+7B↑j ...
 311  0194 AF                           xor     a
 312  0195 32 0C 1D                     ld      ($1D0C), a  ; 1D0C (Fade Steps) = 0
 313  0198 32 0D 1D                     ld      ($1D0D), a  ; 1D0D (Fade Timeout) = 0
 314  019B C3 C1 0C                     jp      StopAllSound
 315  019E              ; End of function DoFading
 316  019E
 317  019E
 318  019E              ; =============== S U B R O U T I N E =======================================
 319  019E
 320  019E
 321  019E              GetFMVolReg_F:                          ; CODE XREF: DoFading:WriteVolOp_0↑p
 322  019E                                                      ; DoFading:WriteVolOp_4↑p ...
 323  019E FD 7E 01                     ld      a, (iy+1)
 324  01A1 E6 03                        and     3
 325  01A3 C6 40                        add     a, 40h
 326  01A5 C9                           ret
 327  01A6              ; End of function GetFMVolReg_F
 328  01A6
 329  01A6
 330  01A6              ; =============== S U B R O U T I N E =======================================
 331  01A6
 332  01A6
 333  01A6              WriteFMIorII_2:                         ; CODE XREF: DoFading+6A↑p
 334  01A6                                                      ; DoFading+7E↑p ...
 335  01A6 FD CB 01 56                  bit     2, (iy+1)
 336  01AA 20 04                        jr      nz, loc_1B0
 337  01AC CD D8 0D                     call    WriteFMIMain
 338  01AF C9                           ret
 339  01B0              ; ---------------------------------------------------------------------------
 340  01B0
 341  01B0              loc_1B0:                                ; CODE XREF: WriteFMIorII_2+4↑j
 342  01B0 CD EF 0D                     call    WriteFMII
 343  01B3 C9                           ret
 344  01B4              ; End of function WriteFMIorII_2
 345  01B4
 346  01B4              ; ---------------------------------------------------------------------------
 347  01B4
 348  01B4              FadeOutMusic:                           ; DATA XREF: RAM:CmdPtrTable↓o
 349  01B4 3E E0                        ld      a, 0E0h         ; Number of fading steps: 60h
 350  01B6 32 0C 1D                     ld      ($1D0C), a
 351  01B9 3E 02                        ld      a, 2            ; Frames per Step
 352  01BB 32 0D 1D                     ld      ($1D0D), a
 353  01BE AF                           xor     a
 354  01BF 32 A6 1D                     ld      ($1DA6), a  ; Music Track FM 3
 355  01C2 32 36 1E                     ld      ($1E36), a  ; Music Track FM 6
 356  01C5 32 66 1E                     ld      ($1E66), a  ; Special SFX Track FM 5
 357  01C8 32 96 1E                     ld      ($1E96), a  ; Special SFX Track FM 6
 358  01CB 32 C6 1E                     ld      ($1EC6), a  ; SFX Track FM 3
 359  01CE 32 F6 1E                     ld      ($1EF6), a  ; SFX Track FM 5
 360  01D1 32 26 1F                     ld      ($1F26), a  ; SFX Track FM 6
 361  01D4 CD F4 0C                     call    SilencePSG
 362  01D7 C3 5D 11                     jp      ClearSoundID
 363  01DA
 364  01DA              ; =============== S U B R O U T I N E =======================================
 365  01DA
 366  01DA
 367  01DA              DoTempo:                                ; CODE XREF: UpdateAll+6↓p
 368  01DA 21 01 1D                     ld      hl, $1D01   ; 1D01 = Tempo Timeout
 369  01DD 7E                           ld      a, (hl)
 370  01DE B7                           or      a
 371  01DF C8                           ret     z               ; Tempo 00 = never delayed
 372  01E0 35                           dec     (hl)            ; subtract 1
 373  01E1 C0                           ret     nz              ; reached 00 - continue and delay all tracks
 374  01E2 3A 02 1D                     ld      a, ($1D02)  ; load initial Tempo (1D02)
 375  01E5 77                           ld      (hl), a
 376  01E6 21 50 1D                     ld      hl,  $1D46+0Ah ; 1C46 (Drum Track) + 0A (Note Timeout)
 377  01E9 11 30 00                     ld      de, 30h
 378  01EC 06 06                        ld      b, 6
 379  01EE
 380  01EE              loc_1EE:                                ; CODE XREF: DoTempo+16↓j
 381  01EE 34                           inc     (hl)
 382  01EF 19                           add     hl, de
 383  01F0 10 FC                        djnz    loc_1EE
 384  01F2 C9                           ret
 385  01F3              ; End of function DoTempo
 386  01F3
 387  01F3              ; ---------------------------------------------------------------------------
 388  01F3 CB D6                        set     2, (hl)
 389  01F5 C9                           ret
 390  01F6
 391  01F6              ; =============== S U B R O U T I N E =======================================
 392  01F6
 393  01F6
 394  01F6              SpcSFX5_Check:                          ; CODE XREF: UpdateAll+12↓p
 395  01F6 21 66 1E                     ld      hl, $1E66   ; Special SFX Track FM 5
 396  01F9 CB 7E                        bit     7, (hl)
 397  01FB C8                           ret     z
 398  01FC 3A F6 1E                     ld      a, ($1EF6)  ; SFX Track FM 5
 399  01FF B7                           or      a
 400  0200 FA 09 02                     jp      m, loc_209
 401  0203 21 06 1E                     ld      hl, $1E06   ; Music Track FM 5
 402  0206 CB D6                        set     2, (hl)         ; set 'overridden' bit
 403  0208 C9                           ret
 404  0209              ; ---------------------------------------------------------------------------
 405  0209
 406  0209              loc_209:                                ; CODE XREF: SpcSFX5_Check+A↑j
 407  0209 CB D6                        set     2, (hl)
 408  020B C9                           ret
 409  020C              ; End of function SpcSFX5_Check
 410  020C
 411  020C
 412  020C              ; =============== S U B R O U T I N E =======================================
 413  020C
 414  020C
 415  020C              SpcSFX6_Check:                          ; CODE XREF: UpdateAll+15↓p
 416  020C 21 96 1E                     ld      hl, $1E96   ; Special SFX Track FM 6
 417  020F CB 7E                        bit     7, (hl)
 418  0211 C8                           ret     z
 419  0212 3A 26 1F                     ld      a, ($1F26)  ; SFX Track FM 6
 420  0215 B7                           or      a
 421  0216 FA 1F 02                     jp      m, loc_21F
 422  0219 21 36 1E                     ld      hl, $1E36   ; Music Track FM 6
 423  021C CB D6                        set     2, (hl)
 424  021E C9                           ret
 425  021F              ; ---------------------------------------------------------------------------
 426  021F
 427  021F              loc_21F:                                ; CODE XREF: SpcSFX6_Check+A↑j
 428  021F CB D6                        set     2, (hl)
 429  0221 C9                           ret
 430  0222              ; End of function SpcSFX6_Check
 431  0222
 432  0222
 433  0222              ; =============== S U B R O U T I N E =======================================
 434  0222
 435  0222
 436  0222              DoSoundQueue:                           ; CODE XREF: UpdateAll+9↓p
 437  0222 11 04 1D                     ld      de, $1D04
 438  0225 CD 31 02                     call    DoOneSndQueue
 439  0228 11 05 1D                     ld      de, $1D05
 440  022B CD 31 02                     call    DoOneSndQueue
 441  022E 11 06 1D                     ld      de, $1D06
 442  0231              ; End of function DoSoundQueue
 443  0231
 444  0231
 445  0231              ; =============== S U B R O U T I N E =======================================
 446  0231
 447  0231
 448  0231              DoOneSndQueue:                          ; CODE XREF: DoSoundQueue+3↑p
 449  0231                                                      ; DoSoundQueue+9↑p
 450  0231 1A                           ld      a, (de)
 451  0232 CB 7F                        bit     7, a
 452  0234 C8                           ret     z
 453  0235 E6 7F                        and     7Fh
 454  0237 21 5C 14                     ld      hl, SndPriorities
 455  023A 3D                           dec     a
 456  023B 06 00                        ld      b, 0
 457  023D 4F                           ld      c, a
 458  023E 09                           add     hl, bc
 459  023F CB 7E                        bit     7, (hl)
 460  0241 28 0E                        jr      z, loc_251
 461  0243 1A                           ld      a, (de)
 462  0244 32 03 1D                     ld      ($1D03), a
 463  0247 AF                           xor     a
 464  0248 21 04 1D                     ld      hl, $1D04
 465  024B 77                           ld      (hl), a
 466  024C 23                           inc     hl
 467  024D 77                           ld      (hl), a
 468  024E 23                           inc     hl
 469  024F 77                           ld      (hl), a
 470  0250 C9                           ret
 471  0251              ; ---------------------------------------------------------------------------
 472  0251
 473  0251              loc_251:                                ; CODE XREF: DoOneSndQueue+10↑j
 474  0251 3A 0A 1D                     ld      a, ($1D0A)  ; get old Sound Priority
 475  0254 BE                           cp      (hl)            ; compare old and new Priority
 476  0255 28 02                        jr      z, loc_259
 477  0257 30 08                        jr      nc, loc_261     ; old > new Priority -> jump and ignore
 478  0259
 479  0259              loc_259:                                ; CODE XREF: DoOneSndQueue+24↑j
 480  0259 1A                           ld      a, (de)
 481  025A 32 03 1D                     ld      ($1D03), a  ; put into PlaySound ID slot
 482  025D 7E                           ld      a, (hl)
 483  025E 32 0A 1D                     ld      ($1D0A), a  ; save new priority
 484  0261
 485  0261              loc_261:                                ; CODE XREF: DoOneSndQueue+26↑j
 486  0261 AF                           xor     a
 487  0262 12                           ld      (de), a
 488  0263 C9                           ret
 489  0264              ; End of function DoOneSndQueue
 490  0264
 491  0264
 492  0264              ; =============== S U B R O U T I N E =======================================
 493  0264
 494  0264
 495  0264              UpdateAll:                              ; CODE XREF: RAM:0048↑p
 496  0264 CD D3 00                     call    DoUnpause       ; 1C08 = 01, 1C09 = 00 - pause
 497  0267 CD C9 00                     call    DoPause_Exit    ; 1C08 = 01, 1C09 = 01 - unpause
 498  026A CD DA 01                     call    DoTempo
 499  026D CD 22 02                     call    DoSoundQueue
 500  0270 CD E8 00                     call    DoFading
 501  0273 CD 31 10                     call    PlaySoundID
 502  0276 CD F6 01                     call    SpcSFX5_Check
 503  0279 CD 0C 02                     call    SpcSFX6_Check
 504  027C DD 21 46 1D                  ld      ix, $1D46   ; 1D46 - Music Tracks
 505  0280 06 0C                        ld      b, 0Ch
 506  0282
 507  0282              loc_282:                                ; CODE XREF: UpdateAll+31↓j
 508  0282 C5                           push    bc
 509  0283 3E 0A                        ld      a, 0Ah
 510  0285 B8                           cp      b
 511  0286 28 10                        jr      z, loc_298      ; FM 3 (Drum Track) - jump
 512  0288 DD CB 00 7E                  bit     7, (ix+0)
 513  028C C4 8B 05                     call    nz, UpdateTrack
 514  028F
 515  028F              loc_28F:                                ; CODE XREF: UpdateAll+3B↓j
 516  028F 11 30 00                     ld      de, 30h
 517  0292 DD 19                        add     ix, de
 518  0294 C1                           pop     bc
 519  0295 10 EB                        djnz    loc_282
 520  0297 C9                           ret
 521  0298              ; ---------------------------------------------------------------------------
 522  0298
 523  0298              loc_298:                                ; CODE XREF: UpdateAll+22↑j
 524  0298 DD CB 00 7E                  bit     7, (ix+0)
 525  029C C4 A1 02                     call    nz, DrumUpdateTrack
 526  029F 18 EE                        jr      loc_28F
 527  02A1              ; End of function UpdateAll
 528  02A1
 529  02A1
 530  02A1              ; =============== S U B R O U T I N E =======================================
 531  02A1
 532  02A1
 533  02A1              DrumUpdateTrack:                        ; CODE XREF: UpdateAll+38↑p
 534  02A1
 535  02A1              ; FUNCTION CHUNK AT 0477 SIZE 00000006 BYTES
 536  02A1              ; FUNCTION CHUNK AT 0A35 SIZE 0000000A BYTES
 537  02A1
 538  02A1 DD CB 01 5E                  bit     3, (ix+1)       ; FM 3 in Normal Mode? (Channel Bits 0Ah)
 539  02A5 C2 8B 05                     jp      nz, UpdateTrack ; yes - do normal update
 540  02A8 DD 34 0B                     inc     (ix+0Bh)
 541  02AB DD 7E 0A                     ld      a, (ix+0Ah)
 542  02AE DD 96 0B                     sub     (ix+0Bh)
 543  02B1 CA B8 02                     jp      z, DrumUpdate_Proc
 544  02B4 CD 81 04                     call    DrumUpdate_Upd
 545  02B7 C9                           ret
 546  02B8              ; ---------------------------------------------------------------------------
 547  02B8
 548  02B8              DrumUpdate_Proc:                        ; CODE XREF: DrumUpdateTrack+10↑j
 549  02B8 DD CB 00 56                  bit     2, (ix+0)
 550  02BC CC 3B 07                     call    z, DoNoteOff    ; 'overridden' bit not set - turn note off
 551  02BF DD 5E 03                     ld      e, (ix+3)
 552  02C2 DD 56 04                     ld      d, (ix+4)
 553  02C5
 554  02C5              loc_2C5:                                ; CODE XREF: RAM:047E↓j
 555  02C5 1A                           ld      a, (de)
 556  02C6 08                           ex      af, af'
 557  02C7 1A                           ld      a, (de)
 558  02C8 08                           ex      af, af'
 559  02C9 13                           inc     de
 560  02CA FE E0                        cp      0E0h
 561  02CC D2 77 04                     jp      nc, cfHandler_Drum
 562  02CF DD CB 01 5E                  bit     3, (ix+1)       ; FM 3 Drum Mode?
 563  02D3 CA DC 02                     jp      z, loc_2DC
 564  02D6 CD 9C 07                     call    TrkUpdPrc_Note
 565  02D9 C3 97 05                     jp      loc_597         ; continue by jumping into UpdateTrack
 566  02DC              ; ---------------------------------------------------------------------------
 567  02DC
 568  02DC              loc_2DC:                                ; CODE XREF: DrumUpdateTrack+32↑j
 569  02DC FE 7F                        cp      7Fh
 570  02DE D2 EF 02                     jp      nc, GetNote_Drum ; 80-DF - Drum Note
 571  02E1 DD 7E 10                     ld      a, (ix+10h)
 572  02E4 DD CB 00 56                  bit     2, (ix+0)
 573  02E8 CA EF 02                     jp      z, GetNote_Drum
 574  02EB 08                           ex      af, af'
 575  02EC C3 E1 07                     jp      SetDuration
 576  02EF              ; ---------------------------------------------------------------------------
 577  02EF
 578  02EF              GetNote_Drum:                           ; CODE XREF: DrumUpdateTrack+3D↑j
 579  02EF                                                      ; DrumUpdateTrack+47↑j
 580  02EF DD CB 00 56                  bit     2, (ix+0)
 581  02F3 C2 D3 07                     jp      nz, loc_7D3     ; if overridden by SFX, finish track processing the normal way
 582  02F6 FE 80                        cp      80h
 583  02F8 C2 09 03                     jp      nz, loc_309
 584  02FB F5                           push    af              ; 80 - mute drum channel
 585  02FC E5                           push    hl
 586  02FD C5                           push    bc
 587  02FE 21 20 10                     ld      hl, Regs_MuteChn
 588  0301 06 02                        ld      b, 2
 589  0303 CD 6A 0E                     call    WriteRegI_Loop
 590  0306 C1                           pop     bc
 591  0307 E1                           pop     hl
 592  0308 F1                           pop     af
 593  0309
 594  0309              loc_309:                                ; CODE XREF: DrumUpdateTrack+57↑j
 595  0309 CB 5F                        bit     3, a
 596  030B DD 77 10                     ld      (ix+10h), a
 597  030E C2 2B 03                     jp      nz, LoadDrum_Op12a
 598  0311 DD 7E 10                     ld      a, (ix+10h)
 599  0314 CB 47                        bit     0, a
 600  0316 C4 53 03                     call    nz, LoadDrum_Op12b
 601  0319
 602  0319              loc_319:                                ; CODE XREF: DrumUpdateTrack+AF↓j
 603  0319 DD 7E 10                     ld      a, (ix+10h)
 604  031C CB 57                        bit     2, a
 605  031E C4 87 03                     call    nz, LoadDrum_Op34
 606  0321 08                           ex      af, af'
 607  0322 FE 80                        cp      80h
 608  0324 DA E1 07                     jp      c, SetDuration
 609  0327 08                           ex      af, af'
 610  0328 C3 D3 07                     jp      loc_7D3         ; now finish track processing the normal way
 611  032B              ; ---------------------------------------------------------------------------
 612  032B
 613  032B              LoadDrum_Op12a:                         ; CODE XREF: DrumUpdateTrack+6D↑j
 614  032B C5                           push    bc
 615  032C D5                           push    de
 616  032D E5                           push    hl
 617  032E 21 F7 03                     ld      hl, Drum3_Op12
 618  0331 CB 6F                        bit     5, a
 619  0333 28 03                        jr      z, loc_338
 620  0335 21 F7 03                     ld      hl, Drum3_Op12
 621  0338
 622  0338              loc_338:                                ; CODE XREF: DrumUpdateTrack+92↑j
 623  0338 11 26 1D                     ld      de, $1D26
 624  033B 01 0A 00                     ld      bc, 0Ah
 625  033E ED B0                        ldir
 626  0340 06 02                        ld      b, 2
 627  0342 3A 28 1D                     ld      a, ($1D28)
 628  0345 67                           ld      h, a
 629  0346 3A 27 1D                     ld      a, ($1D27)
 630  0349 6F                           ld      l, a
 631  034A CD FC 0D                     call    SendFMIns
 632  034D E1                           pop     hl
 633  034E D1                           pop     de
 634  034F C1                           pop     bc
 635  0350 C3 19 03                     jp      loc_319
 636  0353              ; End of function DrumUpdateTrack
 637  0353
 638  0353
 639  0353              ; =============== S U B R O U T I N E =======================================
 640  0353
 641  0353
 642  0353              LoadDrum_Op12b:                         ; CODE XREF: DrumUpdateTrack+75↑p
 643  0353 C5                           push    bc
 644  0354 D5                           push    de
 645  0355 E5                           push    hl
 646  0356 21 01 04                     ld      hl, Drum4_Op12
 647  0359 CB 6F                        bit     5, a
 648  035B 28 03                        jr      z, loc_360
 649  035D 21 01 04                     ld      hl, Drum4_Op12
 650  0360
 651  0360              loc_360:                                ; CODE XREF: LoadDrum_Op12b+8↑j
 652  0360 11 26 1D                     ld      de, $1D26
 653  0363 01 0A 00                     ld      bc, 0Ah
 654  0366 ED B0                        ldir
 655  0368 06 02                        ld      b, 2
 656  036A 3A 28 1D                     ld      a, ($1D28)
 657  036D 67                           ld      h, a
 658  036E 3A 27 1D                     ld      a, ($1D27)
 659  0371 6F                           ld      l, a
 660  0372 CD FC 0D                     call    SendFMIns
 661  0375 3A 24 1D                     ld      a, ($1D24)
 662  0378 DD 7E 08                     ld      a, (ix+8)
 663  037B DD 86 19                     add     a, (ix+19h)
 664  037E 0E 4A                        ld      c, 4Ah
 665  0380 CD D8 0D                     call    WriteFMIMain
 666  0383 E1                           pop     hl
 667  0384 D1                           pop     de
 668  0385 C1                           pop     bc
 669  0386 C9                           ret
 670  0387              ; End of function LoadDrum_Op12b
 671  0387
 672  0387
 673  0387              ; =============== S U B R O U T I N E =======================================
 674  0387
 675  0387
 676  0387              LoadDrum_Op34:                          ; CODE XREF: DrumUpdateTrack+7D↑p
 677  0387 C5                           push    bc
 678  0388 D5                           push    de
 679  0389 E5                           push    hl
 680  038A 21 E3 03                     ld      hl, Drum1_Op34
 681  038D CB 67                        bit     4, a
 682  038F 28 03                        jr      z, loc_394
 683  0391 21 ED 03                     ld      hl, Drum2_Op34
 684  0394
 685  0394              loc_394:                                ; CODE XREF: LoadDrum_Op34+8↑j
 686  0394 11 36 1D                     ld      de, $1D36
 687  0397 01 0A 00                     ld      bc, 0Ah
 688  039A ED B0                        ldir
 689  039C 06 02                        ld      b, 2
 690  039E 3A 38 1D                     ld      a, ($1D38)
 691  03A1 67                           ld      h, a
 692  03A2 3A 37 1D                     ld      a, ($1D37)
 693  03A5 6F                           ld      l, a
 694  03A6 CD FC 0D                     call    SendFMIns
 695  03A9 DD CB 10 66                  bit     4, (ix+10h)
 696  03AD 20 0F                        jr      nz, RefreshDrumVol
 697  03AF DD 7E 08                     ld      a, (ix+8)
 698  03B2 DD 86 1B                     add     a, (ix+1Bh)
 699  03B5 0E 4E                        ld      c, 4Eh
 700  03B7 CD D8 0D                     call    WriteFMIMain
 701  03BA E1                           pop     hl
 702  03BB D1                           pop     de
 703  03BC C1                           pop     bc
 704  03BD C9                           ret
 705  03BE              ; ---------------------------------------------------------------------------
 706  03BE
 707  03BE              RefreshDrumVol:                         ; CODE XREF: LoadDrum_Op34+26↑j
 708  03BE DD 7E 19                     ld      a, (ix+19h)
 709  03C1 DD 86 08                     add     a, (ix+8)
 710  03C4 0E 4A                        ld      c, 4Ah
 711  03C6 CD D8 0D                     call    WriteFMIMain
 712  03C9 DD 7E 1A                     ld      a, (ix+1Ah)
 713  03CC DD 86 08                     add     a, (ix+8)
 714  03CF 0E 46                        ld      c, 46h
 715  03D1 CD D8 0D                     call    WriteFMIMain
 716  03D4 DD 7E 1B                     ld      a, (ix+1Bh)
 717  03D7 DD 86 08                     add     a, (ix+8)
 718  03DA 0E 4E                        ld      c, 4Eh
 719  03DC CD D8 0D                     call    WriteFMIMain
 720  03DF E1                           pop     hl
 721  03E0 D1                           pop     de
 722  03E1 C1                           pop     bc
 723  03E2 C9                           ret
 724  03E3              ; End of function LoadDrum_Op34
 725  03E3
 726  03E3              ; ---------------------------------------------------------------------------
 727  03E3 C0           Drum1_Op34:     db  0C0h
 728  03E4 43 04                        dw  $443
 729  03E6 11 3A 10 2A                  db  11h, 3Ah, 10h, 2Ah, 0, 0, 6
 729  03EA 00 00 06
 730  03ED                                                      ; DATA XREF: LoadDrum_Op34+3↑o
 731  03ED C0           Drum2_Op34:     db  0C0h
 732  03EE 5E 04                        dw  $45E
 733  03F0 15 32 15 87                  db  15h, 32h, 15h, 87h, 10h, 1, 6
 733  03F4 10 01 06
 734  03F7                                                      ; DATA XREF: LoadDrum_Op34+A↑o
 735  03F7 C0           Drum3_Op12:     db  0C0h
 736  03F8 0B 04                        dw  $40B
 737  03FA 15 4C 15 87                  db  15h, 4Ch, 15h, 87h, 0F8h, 0F0h, 6
 737  03FE F8 F0 06
 738  0401                                                      ; DATA XREF: DrumUpdateTrack+8D↑o
 739  0401                                                      ; DrumUpdateTrack+94↑o
 740  0401 C0           Drum4_Op12:     db  0C0h
 741  0402 28 04                        dw  $428
 742  0404 33 E4 32 00                  db  33h, 0E4h, 32h, 0, 0, 0, 4
 742  0408 00 00 04
 743  040B                                                      ; DATA XREF: LoadDrum_Op12b+3↑o
 744  040B                                                      ; LoadDrum_Op12b+A↑o
 745  040B 30 73                        db  30h, 73h            ; DATA XREF: RAM:Drum3_Op12↑o
 746  040D 38 30                        db  38h, 30h
 747  040F 40 0E                        db  40h, 0Eh
 748  0411 48 00                        db  48h, 00h
 749  0413 50 16                        db  50h, 16h
 750  0415 58 1F                        db  58h, 1Fh
 751  0417 60 1F                        db  60h, 1Fh
 752  0419 68 9F                        db  68h, 9Fh
 753  041B 70 00                        db  70h, 00h
 754  041D 78 13                        db  78h, 13h
 755  041F 80 03                        db  80h, 03h
 756  0421 88 04                        db  88h, 04h
 757  0423 B0 3D                        db 0B0h, 3Dh
 758  0425 B4 C0                        db 0B4h,0C0h
 759  0427 83                           db  83h
 760  0428 B0 34                        db 0B0h, 34h            ; DATA XREF: RAM:Drum4_Op12↑o
 761  042A 30 19                        db  30h, 19h
 762  042C 38 0F                        db  38h, 0Fh
 763  042E 40 02                        db  40h, 02h
 764  0430 48 08                        db  48h, 08h
 765  0432 50 18                        db  50h, 18h
 766  0434 58 18                        db  58h, 18h
 767  0436 60 10                        db  60h, 10h
 768  0438 68 13                        db  68h, 13h
 769  043A 70 15                        db  70h, 15h
 770  043C 78 20                        db  78h, 20h
 771  043E 80 5F                        db  80h, 5Fh
 772  0440 88 8F                        db  88h, 8Fh
 773  0442 83                           db  83h
 774  0443 B0 34                        db 0B0h, 34h            ; DATA XREF: RAM:Drum1_Op34↑o
 775  0445 34 71                        db  34h, 71h
 776  0447 3C 18                        db  3Ch, 18h
 777  0449 44 09                        db  44h, 09h
 778  044B 4C 00                        db  4Ch, 00h
 779  044D 54 1F                        db  54h, 1Fh
 780  044F 5C 1F                        db  5Ch, 1Fh
 781  0451 64 13                        db  64h, 13h
 782  0453 6C 13                        db  6Ch, 13h
 783  0455 74 15                        db  74h, 15h
 784  0457 7C 17                        db  7Ch, 17h
 785  0459 84 24                        db  84h, 24h
 786  045B 8C A6                        db  8Ch,0A6h
 787  045D 83                           db  83h
 788  045E 34 02                        db  34h, 02h            ; DATA XREF: RAM:Drum2_Op34↑o
 789  0460 3C 02                        db  3Ch, 02h
 790  0462 44 01                        db  44h, 01h
 791  0464 4C 0A                        db  4Ch, 0Ah
 792  0466 54 1F                        db  54h, 1Fh
 793  0468 5C 1F                        db  5Ch, 1Fh
 794  046A 64 8F                        db  64h, 8Fh
 795  046C 6C 9F                        db  6Ch, 9Fh
 796  046E 74 D3                        db  74h,0D3h
 797  0470 7C D0                        db  7Ch,0D0h
 798  0472 84 18                        db  84h, 18h
 799  0474 8C 08                        db  8Ch, 08h
 800  0476 83                           db  83h
 801  0477              ; ---------------------------------------------------------------------------
 802  0477              ; START OF FUNCTION CHUNK FOR DrumUpdateTrack
 803  0477
 804  0477              cfHandler_Drum:                         ; CODE XREF: DrumUpdateTrack+2B↑j
 805  0477 21 7D 04                     ld      hl, cfReturn_Drum
 806  047A C3 33 08                     jp      loc_833
 807  047D              ; END OF FUNCTION CHUNK FOR DrumUpdateTrack
 808  047D              ; ---------------------------------------------------------------------------
 809  047D
 810  047D              cfReturn_Drum:                          ; DATA XREF: DrumUpdateTrack:cfHandler_Drum↑o
 811  047D 13                           inc     de
 812  047E C3 C5 02                     jp      loc_2C5
 813  0481
 814  0481              ; =============== S U B R O U T I N E =======================================
 815  0481
 816  0481
 817  0481              DrumUpdate_Upd:                         ; CODE XREF: DrumUpdateTrack+13↑p
 818  0481
 819  0481              ; FUNCTION CHUNK AT 0573 SIZE 00000018 BYTES
 820  0481
 821  0481 DD CB 00 56                  bit     2, (ix+0)
 822  0485 C0                           ret     nz              ; track overridden - return
 823  0486 3A 26 1D                     ld      a, ($1D26)
 824  0489 CB 7F                        bit     7, a
 825  048B CA 9B 04                     jp      z, loc_49B      ; Drum Track 1 inactive - skip
 826  048E 3A 2F 1D                     ld      a, ($1D2F)
 827  0491 3D                           dec     a
 828  0492 32 2F 1D                     ld      ($1D2F), a
 829  0495 CA 73 05                     jp      z, StopDrumNote1
 830  0498 CD 09 05                     call    SendFM3Frq_Op12
 831  049B
 832  049B              loc_49B:                                ; CODE XREF: DrumUpdate_Upd+A↑j
 833  049B 3A 36 1D                     ld      a, ($1D36)
 834  049E CB 7F                        bit     7, a
 835  04A0 CA B0 04                     jp      z, loc_4B0      ; Drum Track 2 inactive - skip
 836  04A3 3A 3F 1D                     ld      a, ($1D3F)
 837  04A6 3D                           dec     a
 838  04A7 32 3F 1D                     ld      ($1D3F), a
 839  04AA CA 7F 05                     jp      z, StopDrumNote2
 840  04AD CD 3E 05                     call    SendFM3Frq_Op34
 841  04B0
 842  04B0              loc_4B0:                                ; CODE XREF: DrumUpdate_Upd+1F↑j
 843  04B0 3A 26 1D                     ld      a, ($1D26)
 844  04B3 CB 77                        bit     6, a
 845  04B5 C4 C1 04                     call    nz, SendFM3Note_12
 846  04B8 3A 36 1D                     ld      a, ($1D36)
 847  04BB CB 77                        bit     6, a
 848  04BD C4 D9 04                     call    nz, SendFM3Note_34
 849  04C0 C9                           ret
 850  04C1              ; End of function DrumUpdate_Upd
 851  04C1
 852  04C1
 853  04C1              ; =============== S U B R O U T I N E =======================================
 854  04C1
 855  04C1
 856  04C1              SendFM3Note_12:                         ; CODE XREF: DrumUpdate_Upd+34↑p
 857  04C1 3A 36 1D                     ld      a, ($1D36)
 858  04C4 CB 77                        bit     6, a            ; Drum Track 2 also playing?
 859  04C6 C2 F1 04                     jp      nz, DrumNoteOnBoth
 860  04C9
 861  04C9              DrumNoteOn1:
 862  04C9 3E 32                        ld      a, 32h
 863  04CB 0E 28                        ld      c, 28h
 864  04CD CD D8 0D                     call    WriteFMIMain
 865  04D0 3A 26 1D                     ld      a, ($1D26)
 866  04D3 CB B7                        res     6, a
 867  04D5 32 26 1D                     ld      ($1D26), a
 868  04D8 C9                           ret
 869  04D9              ; End of function SendFM3Note_12
 870  04D9
 871  04D9
 872  04D9              ; =============== S U B R O U T I N E =======================================
 873  04D9
 874  04D9
 875  04D9              SendFM3Note_34:                         ; CODE XREF: DrumUpdate_Upd+3C↑p
 876  04D9 3A 26 1D                     ld      a, ($1D26)
 877  04DC CB 77                        bit     6, a            ; Drum Track 1 also playing?
 878  04DE C2 F1 04                     jp      nz, DrumNoteOnBoth
 879  04E1
 880  04E1              DrumNoteOn2:
 881  04E1 3E C2                        ld      a, 0C2h
 882  04E3 0E 28                        ld      c, 28h
 883  04E5 CD D8 0D                     call    WriteFMIMain
 884  04E8 3A 36 1D                     ld      a, ($1D36)
 885  04EB CB B7                        res     6, a
 886  04ED 32 36 1D                     ld      ($1D36), a
 887  04F0 C9                           ret
 888  04F1              ; ---------------------------------------------------------------------------
 889  04F1
 890  04F1              DrumNoteOnBoth:                         ; CODE XREF: SendFM3Note_12+5↑j
 891  04F1                                                      ; SendFM3Note_34+5↑j
 892  04F1 3E F2                        ld      a, 0F2h
 893  04F3 0E 28                        ld      c, 28h
 894  04F5 CD D8 0D                     call    WriteFMIMain
 895  04F8 3A 26 1D                     ld      a, ($1D26)
 896  04FB CB B7                        res     6, a
 897  04FD 32 26 1D                     ld      ($1D26), a
 898  0500 3A 36 1D                     ld      a, ($1D36)
 899  0503 CB B7                        res     6, a
 900  0505 32 36 1D                     ld      ($1D36), a
 901  0508 C9                           ret
 902  0509              ; End of function SendFM3Note_34
 903  0509
 904  0509
 905  0509              ; =============== S U B R O U T I N E =======================================
 906  0509
 907  0509
 908  0509              SendFM3Frq_Op12:                        ; CODE XREF: DrumUpdate_Upd+17↑p
 909  0509 3A 29 1D                     ld      a, ($1D29)
 910  050C 0E AD                        ld      c, 0ADh
 911  050E CD D8 0D                     call    WriteFMIMain
 912  0511 3A 2A 1D                     ld      a, ($1D2A)
 913  0514 F5                           push    af
 914  0515 3A 2D 1D                     ld      a, ($1D2D)
 915  0518 47                           ld      b, a
 916  0519 F1                           pop     af
 917  051A 80                           add     a, b
 918  051B 32 2A 1D                     ld      ($1D2A), a
 919  051E 0E A9                        ld      c, 0A9h
 920  0520 CD D8 0D                     call    WriteFMIMain
 921  0523 3A 2B 1D                     ld      a, ($1D2B)
 922  0526 0E AE                        ld      c, 0AEh
 923  0528 CD D8 0D                     call    WriteFMIMain
 924  052B 3A 2C 1D                     ld      a, ($1D2C)
 925  052E F5                           push    af
 926  052F 3A 2E 1D                     ld      a, ($1D2E)
 927  0532 47                           ld      b, a
 928  0533 F1                           pop     af
 929  0534 80                           add     a, b
 930  0535 32 2C 1D                     ld      ($1D2C), a
 931  0538 0E AA                        ld      c, 0AAh
 932  053A CD D8 0D                     call    WriteFMIMain
 933  053D C9                           ret
 934  053E              ; End of function SendFM3Frq_Op12
 935  053E
 936  053E
 937  053E              ; =============== S U B R O U T I N E =======================================
 938  053E
 939  053E
 940  053E              SendFM3Frq_Op34:                        ; CODE XREF: DrumUpdate_Upd+2C↑p
 941  053E 3A 39 1D                     ld      a, ($1D39)
 942  0541 0E AC                        ld      c, 0ACh
 943  0543 CD D8 0D                     call    WriteFMIMain
 944  0546 3A 3A 1D                     ld      a, ($1D3A)
 945  0549 F5                           push    af
 946  054A 3A 3D 1D                     ld      a, ($1D3D)
 947  054D 47                           ld      b, a
 948  054E F1                           pop     af
 949  054F 80                           add     a, b
 950  0550 32 3A 1D                     ld      ($1D3A), a
 951  0553 0E A8                        ld      c, 0A8h
 952  0555 CD D8 0D                     call    WriteFMIMain
 953  0558 3A 3B 1D                     ld      a, ($1D3B)
 954  055B 0E A6                        ld      c, 0A6h
 955  055D CD D8 0D                     call    WriteFMIMain
 956  0560 3A 3C 1D                     ld      a, ($1D3C)
 957  0563 F5                           push    af
 958  0564 3A 3E 1D                     ld      a, ($1D3E)
 959  0567 47                           ld      b, a
 960  0568 F1                           pop     af
 961  0569 80                           add     a, b
 962  056A 32 3C 1D                     ld      ($1D3C), a
 963  056D 0E A2                        ld      c, 0A2h
 964  056F CD D8 0D                     call    WriteFMIMain
 965  0572 C9                           ret
 966  0573              ; End of function SendFM3Frq_Op34
 967  0573
 968  0573              ; ---------------------------------------------------------------------------
 969  0573              ; START OF FUNCTION CHUNK FOR DrumUpdate_Upd
 970  0573
 971  0573              StopDrumNote1:                          ; CODE XREF: DrumUpdate_Upd+14↑j
 972  0573 3A 26 1D                     ld      a, ($1D26)
 973  0576 CB BF                        res     7, a            ; disable Drum Track 1
 974  0578 32 26 1D                     ld      ($1D26), a
 975  057B CD 3B 07                     call    DoNoteOff
 976  057E C9                           ret
 977  057F              ; ---------------------------------------------------------------------------
 978  057F
 979  057F              StopDrumNote2:                          ; CODE XREF: DrumUpdate_Upd+29↑j
 980  057F 3A 36 1D                     ld      a, ($1D36)
 981  0582 CB BF                        res     7, a            ; disable Drum Track 2
 982  0584 32 36 1D                     ld      ($1D36), a
 983  0587 CD 3B 07                     call    DoNoteOff
 984  058A C9                           ret
 985  058B              ; END OF FUNCTION CHUNK FOR DrumUpdate_Upd
 986  058B
 987  058B              ; =============== S U B R O U T I N E =======================================
 988  058B
 989  058B
 990  058B              UpdateTrack:                            ; CODE XREF: UpdateAll+28↑p
 991  058B                                                      ; DrumUpdateTrack+4↑j
 992  058B DD 34 0B                     inc     (ix+0Bh)
 993  058E DD 7E 0A                     ld      a, (ix+0Ah)
 994  0591 DD 96 0B                     sub     (ix+0Bh)
 995  0594 CC 8F 07                     call    z, TrkUpdate_Proc
 996  0597
 997  0597              loc_597:                                ; CODE XREF: DrumUpdateTrack+38↑j
 998  0597 32 0E 1D                     ld      ($1D0E), a
 999  059A FE 80                        cp      80h             ; just started a new note?
1000  059C CA 26 06                     jp      z, loc_626      ; yes - skip
1001  059F DD CB 00 6E                  bit     5, (ix+0)
1002  05A3 CA 26 06                     jp      z, loc_626      ; Pitch Slide disabled - skip
1003  05A6 DD CB 00 5E                  bit     3, (ix+0)
1004  05AA C2 1F 06                     jp      nz, loc_61F     ; Raw Frequency mode - jump
1005  05AD DD 7E 11                     ld      a, (ix+11h)     ; DoPitchSlide - check Delta
1006  05B0 CB 7F                        bit     7, a
1007  05B2 28 3A                        jr      z, loc_5EE      ; positive - jump
1008  05B4 DD 86 0E                     add     a, (ix+0Eh)     ; negative delta
1009  05B7 DA BD 05                     jp      c, loc_5BD
1010  05BA DD 35 0F                     dec     (ix+0Fh)
1011  05BD
1012  05BD              loc_5BD:                                ; CODE XREF: UpdateTrack+2C↑j
1013  05BD DD 77 0E                     ld      (ix+0Eh), a
1014  05C0 DD 7E 0F                     ld      a, (ix+0Fh)
1015  05C3 E6 07                        and     7
1016  05C5 FE 02                        cp      2
1017  05C7 C2 26 06                     jp      nz, loc_626
1018  05CA DD 7E 0E                     ld      a, (ix+0Eh)
1019  05CD FE 46                        cp      46h
1020  05CF D2 23 06                     jp      nc, loc_623
1021  05D2 D6 46                        sub     46h             ; Frequency < 246h (without octave bits)
1022  05D4 C6 8C                        add     a, 8Ch          ; Frequency -= 5BAh (-800h+246h)
1023  05D6 DD 77 0E                     ld      (ix+0Eh), a
1024  05D9 DD 35 0F                     dec     (ix+0Fh)
1025  05DC DD 35 0F                     dec     (ix+0Fh)
1026  05DF DD 35 0F                     dec     (ix+0Fh)
1027  05E2 DD 35 0F                     dec     (ix+0Fh)
1028  05E5 DD 35 0F                     dec     (ix+0Fh)
1029  05E8 DD 35 0F                     dec     (ix+0Fh)
1030  05EB C3 1F 06                     jp      loc_61F
1031  05EE              ; ---------------------------------------------------------------------------
1032  05EE
1033  05EE              loc_5EE:                                ; CODE XREF: UpdateTrack+27↑j
1034  05EE DD 86 0E                     add     a, (ix+0Eh)     ; add positive Delta to Frequency LSB
1035  05F1 D2 F7 05                     jp      nc, loc_5F7
1036  05F4 DD 34 0F                     inc     (ix+0Fh)        ; overflow - increment MSB
1037  05F7
1038  05F7              loc_5F7:                                ; CODE XREF: UpdateTrack+66↑j
1039  05F7 DD CB 0F 56                  bit     2, (ix+0Fh)
1040  05FB CA 23 06                     jp      z, loc_623
1041  05FE FE D2                        cp      0D2h
1042  0600 DA 23 06                     jp      c, loc_623
1043  0603 D6 D2                        sub     0D2h            ; Frequency > 4D2h (without octave bits)
1044  0605 C6 69                        add     a, 69h          ; Frequency += 597h (+800h-269h)
1045  0607 DD 77 0E                     ld      (ix+0Eh), a
1046  060A DD 34 0F                     inc     (ix+0Fh)
1047  060D DD 34 0F                     inc     (ix+0Fh)
1048  0610 DD 34 0F                     inc     (ix+0Fh)
1049  0613 DD 34 0F                     inc     (ix+0Fh)
1050  0616 DD 34 0F                     inc     (ix+0Fh)
1051  0619 DD 34 0F                     inc     (ix+0Fh)
1052  061C C3 1F 06                     jp      loc_61F
1053  061F
1054  061F              loc_61F:                                ; CODE XREF: UpdateTrack+1F↑j
1055  061F                                                      ; UpdateTrack+60↑j
1056  061F DD CB 00 CE                  set     1, (ix+0)
1057  0623
1058  0623              loc_623:                                ; CODE XREF: UpdateTrack+44↑j
1059  0623                                                      ; UpdateTrack+70↑j ...
1060  0623 DD 77 0E                     ld      (ix+0Eh), a
1061  0626
1062  0626              loc_626:                                ; CODE XREF: UpdateTrack+11↑j
1063  0626                                                      ; UpdateTrack+18↑j ...
1064  0626 DD CB 00 56                  bit     2, (ix+0)
1065  062A C0                           ret     nz
1066  062B DD 7E 13                     ld      a, (ix+13h)
1067  062E FE 1F                        cp      1Fh
1068  0630 C8                           ret     z
1069  0631 3A 0E 1D                     ld      a, ($1D0E)
1070  0634 DD CB 00 5E                  bit     3, (ix+0)
1071  0638 28 06                        jr      z, loc_640
1072  063A DD CB 00 4E                  bit     1, (ix+0)
1073  063E 20 04                        jr      nz, loc_644
1074  0640
1075  0640              loc_640:                                ; CODE XREF: UpdateTrack+AD↑j
1076  0640 B7                           or      a
1077  0641 CA 3B 07                     jp      z, DoNoteOff
1078  0644
1079  0644              loc_644:                                ; CODE XREF: UpdateTrack+B3↑j
1080  0644 B7                           or      a
1081  0645 FA 59 06                     jp      m, loc_659
1082  0648 DD CB 14 7E                  bit     7, (ix+14h)
1083  064C C0                           ret     nz
1084  064D DD 7E 06                     ld      a, (ix+6)
1085  0650 3D                           dec     a
1086  0651 F2 5D 06                     jp      p, loc_65D
1087  0654 DD CB 00 6E                  bit     5, (ix+0)
1088  0658 C8                           ret     z
1089  0659
1090  0659              loc_659:                                ; CODE XREF: UpdateTrack+BA↑j
1091  0659 DD 7E 06                     ld      a, (ix+6)
1092  065C 3D                           dec     a
1093  065D
1094  065D              loc_65D:                                ; CODE XREF: UpdateTrack+C6↑j
1095  065D DD 6E 0E                     ld      l, (ix+0Eh)
1096  0660 DD 66 0F                     ld      h, (ix+0Fh)
1097  0663 FA 77 06                     jp      m, loc_677
1098  0666 DD CB 00 46                  bit     0, (ix+0)
1099  066A C3 77 06                     jp      loc_677
1100  066D              ; ---------------------------------------------------------------------------
1101  066D EB                           ex      de, hl
1102  066E 2A 02 80                     ld      hl, (8002h)
1103  0671 CD 4B 07                     call    ReadPtrTable_HL
1104  0674 CD 58 07                     call    DoModEnv
1105  0677
1106  0677              loc_677:                                ; CODE XREF: UpdateTrack+D8↑j
1107  0677                                                      ; UpdateTrack+DF↑j
1108  0677 DD 7E 0E                     ld      a, (ix+0Eh)
1109  067A DD B6 0F                     or      (ix+0Fh)
1110  067D CA 37 07                     jp      z, loc_737
1111  0680
1112  0680              loc_680:                                ; CODE XREF: UpdateTrack+11A↓j
1113  0680 DD CB 00 46                  bit     0, (ix+0)
1114  0684 C2 9E 06                     jp      nz, loc_69E
1115  0687 DD 7E 01                     ld      a, (ix+1)
1116  068A E6 03                        and     3
1117  068C C6 A4                        add     a, 0A4h
1118  068E 4F                           ld      c, a
1119  068F 7C                           ld      a, h
1120  0690 CD D2 0D                     call    WriteFMIorII
1121  0693 0D                           dec     c
1122  0694 0D                           dec     c
1123  0695 0D                           dec     c
1124  0696 0D                           dec     c
1125  0697 7D                           ld      a, l
1126  0698 CD D2 0D                     call    WriteFMIorII
1127  069B C3 DA 06                     jp      DoNoteOn
1128  069E              ; ---------------------------------------------------------------------------
1129  069E
1130  069E              loc_69E:                                ; CODE XREF: UpdateTrack+F9↑j
1131  069E DD 7E 01                     ld      a, (ix+1)
1132  06A1 E6 07                        and     7
1133  06A3 FE 02                        cp      2
1134  06A5 C2 80 06                     jp      nz, loc_680
1135  06A8 E5                           push    hl
1136  06A9 C5                           push    bc
1137  06AA D5                           push    de
1138  06AB 06 04                        ld      b, 4
1139  06AD DD CB 01 5E                  bit     3, (ix+1)
1140  06B1 CA B9 06                     jp      z, loc_6B9
1141  06B4 11 1E 1D                     ld      de, $1D1E   ; Special FM3 Notes (mode 02)
1142  06B7 18 03                        jr      loc_6BC
1143  06B9              ; ---------------------------------------------------------------------------
1144  06B9
1145  06B9              loc_6B9:                                ; CODE XREF: UpdateTrack+126↑j
1146  06B9 11 1A 1D                     ld      de, $1D1A   ; Special FM3 Notes (mode 0A)
1147  06BC
1148  06BC              loc_6BC:                                ; CODE XREF: UpdateTrack+12C↑j
1149  06BC 21 2E 07                     ld      hl, SpcFM3Regs
1150  06BF
1151  06BF              loc_6BF:                                ; CODE XREF: UpdateTrack+14A↓j
1152  06BF 1A                           ld      a, (de)
1153  06C0 B7                           or      a
1154  06C1 CA 09 07                     jp      z, loc_709
1155  06C4 FE 01                        cp      1
1156  06C6 CA 02 07                     jp      z, loc_702
1157  06C9 FE 02                        cp      2
1158  06CB CA FB 06                     jp      z, loc_6FB
1159  06CE FE 03                        cp      3
1160  06D0 CA F4 06                     jp      z, loc_6F4
1161  06D3
1162  06D3              loc_6D3:                                ; CODE XREF: UpdateTrack+1A0↓j
1163  06D3 23                           inc     hl
1164  06D4 13                           inc     de
1165  06D5 10 E8                        djnz    loc_6BF
1166  06D7 D1                           pop     de
1167  06D8 C1                           pop     bc
1168  06D9 E1                           pop     hl
1169  06DA
1170  06DA              DoNoteOn:                               ; CODE XREF: UpdateTrack+110↑j
1171  06DA 3A 0E 1D                     ld      a, ($1D0E)
1172  06DD FE 80                        cp      80h
1173  06DF C0                           ret     nz              ; didn't start a new note just now - return
1174  06E0 DD 7E 01                     ld      a, (ix+1)
1175  06E3 E6 07                        and     7
1176  06E5 0E 28                        ld      c, 28h
1177  06E7 DD CB 00 4E                  bit     1, (ix+0)
1178  06EB CC D8 0D                     call    z, WriteFMIMain ; if 'Hold' bit is not set, retrigger note
1179  06EE F6 F0                        or      0F0h
1180  06F0 C3 D8 0D                     jp      WriteFMIMain
1181  06F3              ; ---------------------------------------------------------------------------
1182  06F3 C9                           ret
1183  06F4              ; ---------------------------------------------------------------------------
1184  06F4
1185  06F4              loc_6F4:                                ; CODE XREF: UpdateTrack+145↑j
1186  06F4 7E                           ld      a, (hl)
1187  06F5 D5                           push    de
1188  06F6 11 E4 01                     ld      de, 1E4h
1189  06F9 18 19                        jr      loc_714
1190  06FB              ; ---------------------------------------------------------------------------
1191  06FB
1192  06FB              loc_6FB:                                ; CODE XREF: UpdateTrack+140↑j
1193  06FB 7E                           ld      a, (hl)
1194  06FC D5                           push    de
1195  06FD 11 8E 01                     ld      de, 18Eh
1196  0700 18 12                        jr      loc_714
1197  0702              ; ---------------------------------------------------------------------------
1198  0702
1199  0702              loc_702:                                ; CODE XREF: UpdateTrack+13B↑j
1200  0702 7E                           ld      a, (hl)
1201  0703 D5                           push    de
1202  0704 11 32 01                     ld      de, 132h
1203  0707 18 0B                        jr      loc_714
1204  0709              ; ---------------------------------------------------------------------------
1205  0709
1206  0709              loc_709:                                ; CODE XREF: UpdateTrack+136↑j
1207  0709 7E                           ld      a, (hl)
1208  070A D5                           push    de
1209  070B E5                           push    hl
1210  070C DD 6E 0E                     ld      l, (ix+0Eh)
1211  070F DD 66 0F                     ld      h, (ix+0Fh)
1212  0712 18 08                        jr      loc_71C
1213  0714              ; ---------------------------------------------------------------------------
1214  0714
1215  0714              loc_714:                                ; CODE XREF: UpdateTrack+16E↑j
1216  0714                                                      ; UpdateTrack+175↑j ...
1217  0714 E5                           push    hl
1218  0715 DD 6E 0E                     ld      l, (ix+0Eh)
1219  0718 DD 66 0F                     ld      h, (ix+0Fh)
1220  071B 19                           add     hl, de
1221  071C
1222  071C              loc_71C:                                ; CODE XREF: UpdateTrack+187↑j
1223  071C 4F                           ld      c, a
1224  071D 7C                           ld      a, h
1225  071E CD D8 0D                     call    WriteFMIMain
1226  0721 0D                           dec     c
1227  0722 0D                           dec     c
1228  0723 0D                           dec     c
1229  0724 0D                           dec     c
1230  0725 7D                           ld      a, l
1231  0726 CD D8 0D                     call    WriteFMIMain
1232  0729 E1                           pop     hl
1233  072A D1                           pop     de
1234  072B C3 D3 06                     jp      loc_6D3
1235  072E              ; ---------------------------------------------------------------------------
1236  072E              SpcFM3Regs:                             ; DATA XREF: UpdateTrack:loc_6BC↑o
1237  072E AD AE AC A6                  db 0ADh, 0AEh, 0ACh, 0A6h
1238  0732              ; ---------------------------------------------------------------------------
1239  0732 DD CB 00 4E                  bit     1, (ix+0)
1240  0736 C0                           ret     nz
1241  0737
1242  0737              loc_737:                                ; CODE XREF: UpdateTrack+F2↑j
1243  0737 DD 36 13 1F                  ld      (ix+13h), 1Fh
1244  073B              ; End of function UpdateTrack
1245  073B
1246  073B
1247  073B              ; =============== S U B R O U T I N E =======================================
1248  073B
1249  073B
1250  073B              DoNoteOff:                              ; CODE XREF: DrumUpdateTrack+1B↑p
1251  073B                                                      ; DrumUpdate_Upd+FA↑p ...
1252  073B DD CB 00 4E                  bit     1, (ix+0)
1253  073F C0                           ret     nz
1254  0740 DD 7E 01                     ld      a, (ix+1)
1255  0743 E6 07                        and     7
1256  0745
1257  0745              FMNoteOff:                              ; CODE XREF: RAM:0AB3↓p
1258  0745                                                      ; RAM:0B22↓p ...
1259  0745 0E 28                        ld      c, 28h
1260  0747 CD D8 0D                     call    WriteFMIMain
1261  074A C9                           ret
1262  074B              ; End of function DoNoteOff
1263  074B
1264  074B
1265  074B              ; =============== S U B R O U T I N E =======================================
1266  074B
1267  074B
1268  074B              ReadPtrTable_HL:                        ; CODE XREF: UpdateTrack+E6↑p
1269  074B 4F                           ld      c, a
1270  074C 06 00                        ld      b, 0
1271  074E 09                           add     hl, bc
1272  074F 09                           add     hl, bc
1273  0750 7E                           ld      a, (hl)
1274  0751 23                           inc     hl
1275  0752 66                           ld      h, (hl)
1276  0753 6F                           ld      l, a
1277  0754 C9                           ret
1278  0755              ; End of function ReadPtrTable_HL
1279  0755
1280  0755              ; ---------------------------------------------------------------------------
1281  0755              ; START OF FUNCTION CHUNK FOR DoModEnv
1282  0755
1283  0755              loc_755:                                ; CODE XREF: DoModEnv+21↓j
1284  0755                                                      ; DoModEnv+24↓j
1285  0755 DD 77 0D                     ld      (ix+0Dh), a
1286  0758              ; END OF FUNCTION CHUNK FOR DoModEnv
1287  0758
1288  0758              ; =============== S U B R O U T I N E =======================================
1289  0758
1290  0758
1291  0758              DoModEnv:                               ; CODE XREF: UpdateTrack+E9↑p
1292  0758
1293  0758              ; FUNCTION CHUNK AT 0755 SIZE 00000003 BYTES
1294  0758
1295  0758 E5                           push    hl
1296  0759 DD 4E 0D                     ld      c, (ix+0Dh)
1297  075C 06 00                        ld      b, 0
1298  075E 09                           add     hl, bc
1299  075F 4D                           ld      c, l
1300  0760 44                           ld      b, h
1301  0761 E1                           pop     hl
1302  0762 0A                           ld      a, (bc)
1303  0763 CB 7F                        bit     7, a
1304  0765 CA 7E 07                     jp      z, ModEnv_Positive
1305  0768 FE 82                        cp      82h
1306  076A 28 0B                        jr      z, ModEnv_Jump2Idx
1307  076C FE 80                        cp      80h
1308  076E 28 0B                        jr      z, ModEnv_Reset
1309  0770 3E FF                        ld      a, 0FFh
1310  0772 DD 77 14                     ld      (ix+14h), a
1311  0775 E1                           pop     hl
1312  0776 C9                           ret
1313  0777              ; ---------------------------------------------------------------------------
1314  0777
1315  0777              ModEnv_Jump2Idx:                        ; CODE XREF: DoModEnv+12↑j
1316  0777 03                           inc     bc
1317  0778 0A                           ld      a, (bc)
1318  0779 18 DA                        jr      loc_755
1319  077B              ; ---------------------------------------------------------------------------
1320  077B
1321  077B              ModEnv_Reset:                           ; CODE XREF: DoModEnv+16↑j
1322  077B AF                           xor     a
1323  077C 18 D7                        jr      loc_755
1324  077E              ; ---------------------------------------------------------------------------
1325  077E
1326  077E              ModEnv_Positive:                        ; CODE XREF: DoModEnv+D↑j
1327  077E DD 34 0D                     inc     (ix+0Dh)
1328  0781 6F                           ld      l, a
1329  0782 26 00                        ld      h, 0
1330  0784 19                           add     hl, de
1331  0785 7C                           ld      a, h
1332  0786 DD BE 10                     cp      (ix+10h)
1333  0789 28 00                        jr      z, loc_78B
1334  078B
1335  078B              loc_78B:
1336  078B DD 77 10                     ld      (ix+10h), a
1337  078E C9                           ret
1338  078F              ; End of function DoModEnv
1339  078F
1340  078F
1341  078F              ; =============== S U B R O U T I N E =======================================
1342  078F
1343  078F
1344  078F              TrkUpdate_Proc:                         ; CODE XREF: UpdateTrack+9↑p
1345  078F
1346  078F              ; FUNCTION CHUNK AT 0830 SIZE 00000016 BYTES
1347  078F
1348  078F DD 5E 03                     ld      e, (ix+3)
1349  0792 DD 56 04                     ld      d, (ix+4)
1350  0795
1351  0795              loc_795:                                ; CODE XREF: RAM:0847↓j
1352  0795 1A                           ld      a, (de)
1353  0796 13                           inc     de
1354  0797 FE E0                        cp      0E0h
1355  0799 D2 30 08                     jp      nc, cfHandler
1356  079C
1357  079C              TrkUpdPrc_Note:                         ; CODE XREF: DrumUpdateTrack+35↑p
1358  079C DD CB 00 5E                  bit     3, (ix+0)
1359  07A0 C2 0A 08                     jp      nz, DoRawFreqMode
1360  07A3 FE 80                        cp      80h
1361  07A5 DA E1 07                     jp      c, SetDuration
1362  07A8 20 00                        jr      nz, GetNote
1363  07AA
1364  07AA              GetNote:
1365  07AA CD 17 08                     call    GetFrequency
1366  07AD 7E                           ld      a, (hl)
1367  07AE DD 77 0E                     ld      (ix+0Eh), a
1368  07B1 23                           inc     hl
1369  07B2 7E                           ld      a, (hl)
1370  07B3 DD 77 0F                     ld      (ix+0Fh), a
1371  07B6
1372  07B6              loc_7B6:                                ; CODE XREF: TrkUpdate_Proc+85↓j
1373  07B6 DD CB 00 6E                  bit     5, (ix+0)
1374  07BA CA D3 07                     jp      z, loc_7D3
1375  07BD 1A                           ld      a, (de)         ; read Pitch Slide Speed
1376  07BE 13                           inc     de
1377  07BF DD 77 12                     ld      (ix+12h), a
1378  07C2 DD 77 11                     ld      (ix+11h), a
1379  07C5 DD CB 00 5E                  bit     3, (ix+0)
1380  07C9 1A                           ld      a, (de)
1381  07CA 20 14                        jr      nz, loc_7E0     ; Raw Frequency Mode - skip
1382  07CC DD 77 11                     ld      (ix+11h), a
1383  07CF 13                           inc     de
1384  07D0 1A                           ld      a, (de)
1385  07D1 18 0D                        jr      loc_7E0
1386  07D3              ; ---------------------------------------------------------------------------
1387  07D3
1388  07D3              loc_7D3:                                ; CODE XREF: DrumUpdateTrack+52↑j
1389  07D3                                                      ; DrumUpdateTrack+87↑j ...
1390  07D3 1A                           ld      a, (de)
1391  07D4 B7                           or      a
1392  07D5 F2 E0 07                     jp      p, loc_7E0
1393  07D8 DD 7E 15                     ld      a, (ix+15h)
1394  07DB DD 77 0A                     ld      (ix+0Ah), a
1395  07DE 18 11                        jr      loc_7F1
1396  07E0              ; ---------------------------------------------------------------------------
1397  07E0
1398  07E0              loc_7E0:                                ; CODE XREF: TrkUpdate_Proc+3B↑j
1399  07E0                                                      ; TrkUpdate_Proc+42↑j ...
1400  07E0 13                           inc     de
1401  07E1
1402  07E1              SetDuration:                            ; CODE XREF: DrumUpdateTrack+4B↑j
1403  07E1                                                      ; DrumUpdateTrack+83↑j ...
1404  07E1 DD 46 02                     ld      b, (ix+2)
1405  07E4 05                           dec     b
1406  07E5 28 04                        jr      z, loc_7EB
1407  07E7 4F                           ld      c, a
1408  07E8
1409  07E8              loc_7E8:                                ; CODE XREF: TrkUpdate_Proc+5A↓j
1410  07E8 81                           add     a, c
1411  07E9 10 FD                        djnz    loc_7E8
1412  07EB
1413  07EB              loc_7EB:                                ; CODE XREF: TrkUpdate_Proc+56↑j
1414  07EB DD 77 0A                     ld      (ix+0Ah), a
1415  07EE DD 77 15                     ld      (ix+15h), a
1416  07F1
1417  07F1              loc_7F1:                                ; CODE XREF: TrkUpdate_Proc+4F↑j
1418  07F1 AF                           xor     a
1419  07F2 DD 77 0C                     ld      (ix+0Ch), a
1420  07F5 DD 77 0D                     ld      (ix+0Dh), a
1421  07F8 DD 77 0B                     ld      (ix+0Bh), a
1422  07FB DD 77 13                     ld      (ix+13h), a
1423  07FE DD 77 14                     ld      (ix+14h), a
1424  0801 DD 73 03                     ld      (ix+3), e
1425  0804 DD 72 04                     ld      (ix+4), d
1426  0807 3E 80                        ld      a, 80h
1427  0809 C9                           ret
1428  080A              ; ---------------------------------------------------------------------------
1429  080A
1430  080A              DoRawFreqMode:                          ; CODE XREF: TrkUpdate_Proc+11↑j
1431  080A 67                           ld      h, a
1432  080B 1A                           ld      a, (de)
1433  080C 13                           inc     de
1434  080D 6F                           ld      l, a
1435  080E DD 75 0E                     ld      (ix+0Eh), l
1436  0811 DD 74 0F                     ld      (ix+0Fh), h
1437  0814 C3 B6 07                     jp      loc_7B6
1438  0817              ; End of function TrkUpdate_Proc
1439  0817
1440  0817
1441  0817              ; =============== S U B R O U T I N E =======================================
1442  0817
1443  0817
1444  0817              GetFrequency:                           ; CODE XREF: TrkUpdate_Proc:GetNote↑p
1445  0817 D6 80                        sub     80h
1446  0819 28 03                        jr      z, loc_81E
1447  081B DD 86 05                     add     a, (ix+5)
1448  081E
1449  081E              loc_81E:                                ; CODE XREF: GetFrequency+2↑j
1450  081E 21 88 0E                     ld      hl, PSGFreqs
1451  0821 DD CB 01 7E                  bit     7, (ix+1)
1452  0825 20 03                        jr      nz, loc_82A
1453  0827 21 1A 0F                     ld      hl, FMFreqs
1454  082A
1455  082A              loc_82A:                                ; CODE XREF: GetFrequency+E↑j
1456  082A 4F                           ld      c, a
1457  082B 06 00                        ld      b, 0
1458  082D 09                           add     hl, bc
1459  082E 09                           add     hl, bc
1460  082F C9                           ret
1461  0830              ; End of function GetFrequency
1462  0830
1463  0830              ; ---------------------------------------------------------------------------
1464  0830              ; START OF FUNCTION CHUNK FOR TrkUpdate_Proc
1465  0830
1466  0830              cfHandler:                              ; CODE XREF: TrkUpdate_Proc+A↑j
1467  0830 21 46 08                     ld      hl, cfReturn
1468  0833
1469  0833              loc_833:                                ; CODE XREF: DrumUpdateTrack+1D9↑j
1470  0833 E5                           push    hl
1471  0834 D6 E5                        sub     0E5h
1472  0836 DA 35 0A                     jp      c, cfF3_PSGNoise
1473  0839 21 4A 08                     ld      hl, cfPtrTable
1474  083C 87                           add     a, a
1475  083D 4F                           ld      c, a
1476  083E 06 00                        ld      b, 0
1477  0840 09                           add     hl, bc
1478  0841 4E                           ld      c, (hl)
1479  0842 23                           inc     hl
1480  0843 66                           ld      h, (hl)
1481  0844 69                           ld      l, c
1482  0845 E9                           jp      (hl)
1483  0846              ; END OF FUNCTION CHUNK FOR TrkUpdate_Proc
1484  0846              ; ---------------------------------------------------------------------------
1485  0846
1486  0846              cfReturn:                               ; DATA XREF: TrkUpdate_Proc:cfHandler↑o
1487  0846 13                           inc     de
1488  0847 C3 95 07                     jp      loc_795
1489  084A              ; ---------------------------------------------------------------------------
1490  084A 80 08 B3 09  cfPtrTable:     dw cfE5_PauseMusic, cfE6_ChgVol, cfE7_DrumVol123
1490  084E 87 08
1491  0850                                                      ; DATA XREF: TrkUpdate_Proc+AA↑o
1492  0850 96 08 32 09                  dw cfE8_FM3MelMode, cfE9_SetLFOSpd, cfEA_SetFMS, cfEB_SetAMS
1492  0854 15 09 0E 09
1493  0858 CA 08 CB 08                  dw cfEC_null, cfED_null, cfEE_Hold, cfEF_SetFMIns
1493  085C CC 08 DB 08
1494  0860 3F 09 39 09                  dw cfF0_SetVol, cfF1_FM3DrmMode, cfF2_StopTrk, cfF3_PSGNoise
1494  0864 6F 0A 35 0A
1495  0868 46 0A 40 0A                  dw cfF4_ModType, cfF5_SetPSGIns, cfF6_GoTo, cfF7_Loop
1495  086C 4B 0A A9 0C
1496  0870 7B 0C 96 0C                  dw cfF8_GoSub, cfF9_Return, cfFA_TickMult, cfFB_ChgTransp
1496  0874 30 0A 28 0A
1497  0878 51 0A 60 0A                  dw cfFC_PitchSlide, cfFD_RawFrqMode, cfFE_SpcFM3Note, cfFF_Pan
1497  087C B2 08 07 09
1498  0880              ; ---------------------------------------------------------------------------
1499  0880
1500  0880              cfE5_PauseMusic:                        ; DATA XREF: RAM:cfPtrTable↑o
1501  0880 3E 01                        ld      a, 1
1502  0882 32 08 1D                     ld      ($1D08), a
1503  0885 1B                           dec     de
1504  0886 C9                           ret
1505  0887              ; ---------------------------------------------------------------------------
1506  0887
1507  0887              cfE7_DrumVol123:                        ; DATA XREF: RAM:cfPtrTable↑o
1508  0887 1A                           ld      a, (de)
1509  0888 32 22 1D                     ld      ($1D22), a  ; Drum Volume - Operator 1 (unused)
1510  088B 13                           inc     de
1511  088C 1A                           ld      a, (de)
1512  088D 32 23 1D                     ld      ($1D23), a  ; Drum Volume - Operator 2 (unused)
1513  0890 13                           inc     de
1514  0891 1A                           ld      a, (de)
1515  0892 32 24 1D                     ld      ($1D24), a  ; Drum Volume - Operator 3 (unused)
1516  0895 C9                           ret
1517  0896              ; ---------------------------------------------------------------------------
1518  0896
1519  0896              cfE8_FM3MelMode:                        ; DATA XREF: RAM:0850↑o
1520  0896 DD CB 01 DE                  set     3, (ix+1)       ; 02 (FM 3 Drum Mode) -> 0A (FM 3 Melody Mode)
1521  089A DD CB 00 C6                  set     0, (ix+0)
1522  089E 1A                           ld      a, (de)
1523  089F 32 1E 1D                     ld      ($1D1E), a  ; Special FM3 Notes (mode 0A)
1524  08A2 13                           inc     de
1525  08A3 1A                           ld      a, (de)
1526  08A4 32 1F 1D                     ld      ($1D1F), a
1527  08A7 13                           inc     de
1528  08A8 1A                           ld      a, (de)
1529  08A9 32 20 1D                     ld      ($1D20), a
1530  08AC 13                           inc     de
1531  08AD 1A                           ld      a, (de)
1532  08AE 32 21 1D                     ld      ($1D21), a
1533  08B1 C9                           ret
1534  08B2              ; ---------------------------------------------------------------------------
1535  08B2
1536  08B2              cfFE_SpcFM3Note:                        ; DATA XREF: RAM:0850↑o
1537  08B2 DD CB 00 C6                  set     0, (ix+0)
1538  08B6 1A                           ld      a, (de)
1539  08B7 32 1A 1D                     ld      ($1D1A), a  ; Special FM3 Notes (mode 02)
1540  08BA 13                           inc     de
1541  08BB 1A                           ld      a, (de)
1542  08BC 32 1B 1D                     ld      ($1D1B), a
1543  08BF 13                           inc     de
1544  08C0 1A                           ld      a, (de)
1545  08C1 32 1C 1D                     ld      ($1D1C), a
1546  08C4 13                           inc     de
1547  08C5 1A                           ld      a, (de)
1548  08C6 32 1D 1D                     ld      ($1D1D), a
1549  08C9 C9                           ret
1550  08CA              ; ---------------------------------------------------------------------------
1551  08CA
1552  08CA              cfEC_null:                              ; DATA XREF: RAM:0850↑o
1553  08CA C9                           ret
1554  08CB              ; ---------------------------------------------------------------------------
1555  08CB
1556  08CB              cfED_null:                              ; DATA XREF: RAM:0850↑o
1557  08CB C9                           ret
1558  08CC              ; ---------------------------------------------------------------------------
1559  08CC
1560  08CC              cfEE_Hold:                              ; DATA XREF: RAM:0850↑o
1561  08CC 1A                           ld      a, (de)
1562  08CD FE 01                        cp      1
1563  08CF 20 05                        jr      nz, loc_8D6
1564  08D1 DD CB 00 CE                  set     1, (ix+0)
1565  08D5 C9                           ret
1566  08D6              ; ---------------------------------------------------------------------------
1567  08D6
1568  08D6              loc_8D6:                                ; CODE XREF: RAM:08CF↑j
1569  08D6 DD CB 00 8E                  res     1, (ix+0)
1570  08DA C9                           ret
1571  08DB              ; ---------------------------------------------------------------------------
1572  08DB
1573  08DB              cfEF_SetFMIns:                          ; DATA XREF: RAM:0850↑o
1574  08DB DD 7E 01                     ld      a, (ix+1)
1575  08DE CB 7F                        bit     7, a
1576  08E0 C0                           ret     nz
1577  08E1 1A                           ld      a, (de)
1578  08E2 D5                           push    de
1579  08E3 E5                           push    hl
1580  08E4 C5                           push    bc
1581  08E5 DD 77 07                     ld      (ix+7), a
1582  08E8 2A 06 80                     ld      hl, (8006h)
1583  08EB 87                           add     a, a
1584  08EC 06 00                        ld      b, 0
1585  08EE 4F                           ld      c, a
1586  08EF 09                           add     hl, bc
1587  08F0 5E                           ld      e, (hl)
1588  08F1 23                           inc     hl
1589  08F2 56                           ld      d, (hl)
1590  08F3 EB                           ex      de, hl
1591  08F4 DD 7E 01                     ld      a, (ix+1)
1592  08F7 E6 03                        and     3
1593  08F9 47                           ld      b, a
1594  08FA CD FC 0D                     call    SendFMIns
1595  08FD C1                           pop     bc
1596  08FE E1                           pop     hl
1597  08FF D1                           pop     de
1598  0900 DD 7E 08                     ld      a, (ix+8)
1599  0903 B7                           or      a
1600  0904 20 3D                        jr      nz, loc_943
1601  0906 C9                           ret
1602  0907              ; ---------------------------------------------------------------------------
1603  0907
1604  0907              cfFF_Pan:                               ; DATA XREF: RAM:0850↑o
1605  0907 DD 7E 16                     ld      a, (ix+16h)
1606  090A E6 3F                        and     3Fh
1607  090C 18 0C                        jr      loc_91A
1608  090E              ; ---------------------------------------------------------------------------
1609  090E
1610  090E              cfEB_SetAMS:                            ; DATA XREF: RAM:0850↑o
1611  090E DD 7E 16                     ld      a, (ix+16h)
1612  0911 E6 C7                        and     0C7h
1613  0913 18 05                        jr      loc_91A
1614  0915              ; ---------------------------------------------------------------------------
1615  0915
1616  0915              cfEA_SetFMS:                            ; DATA XREF: RAM:0850↑o
1617  0915 DD 7E 16                     ld      a, (ix+16h)
1618  0918 E6 F0                        and     0F0h
1619  091A
1620  091A              loc_91A:                                ; CODE XREF: RAM:090C↑j
1621  091A                                                      ; RAM:0913↑j
1622  091A DD 77 16                     ld      (ix+16h), a
1623  091D 1A                           ld      a, (de)
1624  091E DD B6 16                     or      (ix+16h)
1625  0921 DD 77 16                     ld      (ix+16h), a
1626  0924 F5                           push    af
1627  0925 DD 7E 01                     ld      a, (ix+1)
1628  0928 E6 03                        and     3
1629  092A C6 B4                        add     a, 0B4h
1630  092C 4F                           ld      c, a
1631  092D F1                           pop     af
1632  092E CD D2 0D                     call    WriteFMIorII
1633  0931 C9                           ret
1634  0932              ; ---------------------------------------------------------------------------
1635  0932
1636  0932              cfE9_SetLFOSpd:                         ; DATA XREF: RAM:0850↑o
1637  0932 1A                           ld      a, (de)
1638  0933 0E 22                        ld      c, 22h
1639  0935 CD D8 0D                     call    WriteFMIMain
1640  0938 C9                           ret
1641  0939              ; ---------------------------------------------------------------------------
1642  0939
1643  0939              cfF1_FM3DrmMode:                        ; DATA XREF: RAM:0850↑o
1644  0939 DD CB 01 9E                  res     3, (ix+1)       ; 0A (FM 3 Melody Mode) -> 02 (FM 3 Drum Mode)
1645  093D 1B                           dec     de
1646  093E C9                           ret
1647  093F              ; ---------------------------------------------------------------------------
1648  093F
1649  093F              cfF0_SetVol:                            ; DATA XREF: RAM:0850↑o
1650  093F 1A                           ld      a, (de)
1651  0940 DD 77 08                     ld      (ix+8), a
1652  0943
1653  0943              loc_943:                                ; CODE XREF: RAM:0904↑j
1654  0943 DD 7E 17                     ld      a, (ix+17h)
1655  0946 E6 07                        and     7
1656  0948 FE 04                        cp      4
1657  094A CA 7F 09                     jp      z, loc_97F
1658  094D DA 95 09                     jp      c, loc_995
1659  0950 FE 07                        cp      7
1660  0952 DA 69 09                     jp      c, loc_969
1661  0955 CD AB 09                     call    GetFMVolReg_V
1662  0958 4F                           ld      c, a
1663  0959 DD 7E 08                     ld      a, (ix+8)
1664  095C DD 86 18                     add     a, (ix+18h)
1665  095F DD 77 18                     ld      (ix+18h), a
1666  0962 FE 7F                        cp      7Fh
1667  0964 30 03                        jr      nc, loc_969
1668  0966 CD D2 0D                     call    WriteFMIorII
1669  0969
1670  0969              loc_969:                                ; CODE XREF: RAM:0952↑j
1671  0969                                                      ; RAM:0964↑j
1672  0969 CD AB 09                     call    GetFMVolReg_V
1673  096C C6 04                        add     a, 4
1674  096E 4F                           ld      c, a
1675  096F DD 7E 08                     ld      a, (ix+8)
1676  0972 DD 86 1A                     add     a, (ix+1Ah)
1677  0975 DD 77 1A                     ld      (ix+1Ah), a
1678  0978 FE 7F                        cp      7Fh
1679  097A 30 03                        jr      nc, loc_97F
1680  097C CD D2 0D                     call    WriteFMIorII
1681  097F
1682  097F              loc_97F:                                ; CODE XREF: RAM:094A↑j
1683  097F                                                      ; RAM:097A↑j
1684  097F CD AB 09                     call    GetFMVolReg_V
1685  0982 C6 08                        add     a, 8
1686  0984 4F                           ld      c, a
1687  0985 DD 7E 08                     ld      a, (ix+8)
1688  0988 DD 86 19                     add     a, (ix+19h)
1689  098B DD 77 19                     ld      (ix+19h), a
1690  098E FE 7F                        cp      7Fh
1691  0990 30 03                        jr      nc, loc_995
1692  0992 CD D2 0D                     call    WriteFMIorII
1693  0995
1694  0995              loc_995:                                ; CODE XREF: RAM:094D↑j
1695  0995                                                      ; RAM:0990↑j
1696  0995 CD AB 09                     call    GetFMVolReg_V
1697  0998 C6 0C                        add     a, 0Ch
1698  099A 4F                           ld      c, a
1699  099B DD 7E 08                     ld      a, (ix+8)
1700  099E DD 86 1B                     add     a, (ix+1Bh)
1701  09A1 DD 77 1B                     ld      (ix+1Bh), a
1702  09A4 FE 7F                        cp      7Fh
1703  09A6 D0                           ret     nc
1704  09A7 CD D2 0D                     call    WriteFMIorII
1705  09AA C9                           ret
1706  09AB
1707  09AB              ; =============== S U B R O U T I N E =======================================
1708  09AB
1709  09AB
1710  09AB              GetFMVolReg_V:                          ; CODE XREF: RAM:0955↑p
1711  09AB                                                      ; RAM:loc_969↑p ...
1712  09AB DD 7E 01                     ld      a, (ix+1)
1713  09AE E6 03                        and     3
1714  09B0 C6 40                        add     a, 40h
1715  09B2 C9                           ret
1716  09B3              ; End of function GetFMVolReg_V
1717  09B3
1718  09B3              ; ---------------------------------------------------------------------------
1719  09B3
1720  09B3              cfE6_ChgVol:                            ; DATA XREF: RAM:cfPtrTable↑o
1721  09B3 1A                           ld      a, (de)
1722  09B4 32 25 1D                     ld      ($1D25), a  ; write to cache
1723  09B7 DD 7E 17                     ld      a, (ix+17h)
1724  09BA E6 07                        and     7
1725  09BC FE 04                        cp      4
1726  09BE CA F3 09                     jp      z, loc_9F3
1727  09C1 DA 09 0A                     jp      c, loc_A09
1728  09C4 FE 07                        cp      7
1729  09C6 DA DD 09                     jp      c, loc_9DD
1730  09C9 CD AB 09                     call    GetFMVolReg_V
1731  09CC 4F                           ld      c, a
1732  09CD 3A 25 1D                     ld      a, ($1D25)
1733  09D0 DD 86 18                     add     a, (ix+18h)
1734  09D3 DD 77 18                     ld      (ix+18h), a
1735  09D6 FE 7F                        cp      7Fh
1736  09D8 30 03                        jr      nc, loc_9DD
1737  09DA CD D2 0D                     call    WriteFMIorII
1738  09DD
1739  09DD              loc_9DD:                                ; CODE XREF: RAM:09C6↑j
1740  09DD                                                      ; RAM:09D8↑j
1741  09DD CD AB 09                     call    GetFMVolReg_V
1742  09E0 C6 04                        add     a, 4
1743  09E2 4F                           ld      c, a
1744  09E3 3A 25 1D                     ld      a, ($1D25)
1745  09E6 DD 86 1A                     add     a, (ix+1Ah)
1746  09E9 DD 77 1A                     ld      (ix+1Ah), a
1747  09EC FE 7F                        cp      7Fh
1748  09EE 30 03                        jr      nc, loc_9F3
1749  09F0 CD D2 0D                     call    WriteFMIorII
1750  09F3
1751  09F3              loc_9F3:                                ; CODE XREF: RAM:09BE↑j
1752  09F3                                                      ; RAM:09EE↑j
1753  09F3 CD AB 09                     call    GetFMVolReg_V
1754  09F6 C6 08                        add     a, 8
1755  09F8 4F                           ld      c, a
1756  09F9 3A 25 1D                     ld      a, ($1D25)
1757  09FC DD 86 19                     add     a, (ix+19h)
1758  09FF DD 77 19                     ld      (ix+19h), a
1759  0A02 FE 7F                        cp      7Fh
1760  0A04 30 03                        jr      nc, loc_A09
1761  0A06 CD D2 0D                     call    WriteFMIorII
1762  0A09
1763  0A09              loc_A09:                                ; CODE XREF: RAM:09C1↑j
1764  0A09                                                      ; RAM:0A04↑j
1765  0A09 CD AB 09                     call    GetFMVolReg_V
1766  0A0C C6 0C                        add     a, 0Ch
1767  0A0E 4F                           ld      c, a
1768  0A0F 3A 25 1D                     ld      a, ($1D25)
1769  0A12 DD 86 08                     add     a, (ix+8)
1770  0A15 DD 77 08                     ld      (ix+8), a
1771  0A18 3A 25 1D                     ld      a, ($1D25)
1772  0A1B DD 86 1B                     add     a, (ix+1Bh)
1773  0A1E DD 77 1B                     ld      (ix+1Bh), a
1774  0A21 FE 7F                        cp      7Fh
1775  0A23 D0                           ret     nc
1776  0A24 CD D2 0D                     call    WriteFMIorII
1777  0A27 C9                           ret
1778  0A28              ; ---------------------------------------------------------------------------
1779  0A28
1780  0A28              cfFB_ChgTransp:                         ; DATA XREF: RAM:0850↑o
1781  0A28 1A                           ld      a, (de)
1782  0A29 DD 86 05                     add     a, (ix+5)
1783  0A2C DD 77 05                     ld      (ix+5), a
1784  0A2F C9                           ret
1785  0A30              ; ---------------------------------------------------------------------------
1786  0A30
1787  0A30              cfFA_TickMult:                          ; DATA XREF: RAM:0850↑o
1788  0A30 1A                           ld      a, (de)
1789  0A31 DD 77 02                     ld      (ix+2), a
1790  0A34 C9                           ret
1791  0A35              ; ---------------------------------------------------------------------------
1792  0A35              ; START OF FUNCTION CHUNK FOR DrumUpdateTrack
1793  0A35
1794  0A35              cfF3_PSGNoise:                          ; CODE XREF: TrkUpdate_Proc+A7↑j
1795  0A35                                                      ; DATA XREF: RAM:0850↑o
1796  0A35 1A                           ld      a, (de)
1797  0A36 F6 E0                        or      0E0h
1798  0A38 CD 63 11                     call    WritePSG
1799  0A3B 32 19 1D                     ld      ($1D19), a
1800  0A3E C9                           ret
1801  0A3F              ; END OF FUNCTION CHUNK FOR DrumUpdateTrack
1802  0A3F              ; ---------------------------------------------------------------------------
1803  0A3F C9                           ret
1804  0A40              ; ---------------------------------------------------------------------------
1805  0A40
1806  0A40              cfF5_SetPSGIns:                         ; DATA XREF: RAM:0850↑o
1807  0A40 1A                           ld      a, (de)
1808  0A41 13                           inc     de
1809  0A42 DD 77 07                     ld      (ix+7), a
1810  0A45 C9                           ret
1811  0A46              ; ---------------------------------------------------------------------------
1812  0A46
1813  0A46              cfF4_ModType:                           ; DATA XREF: RAM:0850↑o
1814  0A46 1A                           ld      a, (de)
1815  0A47 DD 77 06                     ld      (ix+6), a
1816  0A4A C9                           ret
1817  0A4B              ; ---------------------------------------------------------------------------
1818  0A4B
1819  0A4B              cfF6_GoTo:                              ; CODE XREF: RAM:0CBC↓j
1820  0A4B                                                      ; DATA XREF: RAM:0850↑o
1821  0A4B EB                           ex      de, hl
1822  0A4C 5E                           ld      e, (hl)
1823  0A4D 23                           inc     hl
1824  0A4E 56                           ld      d, (hl)
1825  0A4F 1B                           dec     de
1826  0A50 C9                           ret
1827  0A51              ; ---------------------------------------------------------------------------
1828  0A51
1829  0A51              cfFC_PitchSlide:                        ; DATA XREF: RAM:0850↑o
1830  0A51 1A                           ld      a, (de)
1831  0A52 FE 01                        cp      1
1832  0A54 20 05                        jr      nz, loc_A5B
1833  0A56 DD CB 00 EE                  set     5, (ix+0)
1834  0A5A C9                           ret
1835  0A5B              ; ---------------------------------------------------------------------------
1836  0A5B
1837  0A5B              loc_A5B:                                ; CODE XREF: RAM:0A54↑j
1838  0A5B DD CB 00 AE                  res     5, (ix+0)
1839  0A5F C9                           ret
1840  0A60              ; ---------------------------------------------------------------------------
1841  0A60
1842  0A60              cfFD_RawFrqMode:                        ; DATA XREF: RAM:0850↑o
1843  0A60 1A                           ld      a, (de)
1844  0A61 FE 01                        cp      1
1845  0A63 20 05                        jr      nz, loc_A6A
1846  0A65 DD CB 00 DE                  set     3, (ix+0)
1847  0A69 C9                           ret
1848  0A6A              ; ---------------------------------------------------------------------------
1849  0A6A
1850  0A6A              loc_A6A:                                ; CODE XREF: RAM:0A63↑j
1851  0A6A DD CB 00 9E                  res     3, (ix+0)
1852  0A6E C9                           ret
1853  0A6F              ; ---------------------------------------------------------------------------
1854  0A6F
1855  0A6F              cfF2_StopTrk:                           ; DATA XREF: RAM:0850↑o
1856  0A6F AF                           xor     a
1857  0A70 32 0A 1D                     ld      ($1D0A), a
1858  0A73 DD 77 00                     ld      (ix+0), a
1859  0A76 DD 7E 01                     ld      a, (ix+1)
1860  0A79 E6 07                        and     7
1861  0A7B FE 02                        cp      2
1862  0A7D CA A1 0A                     jp      z, RestoreTrk_FM3
1863  0A80 FE 05                        cp      5
1864  0A82 CA 2D 0B                     jp      z, RestoreTrk_FM5
1865  0A85 FE 06                        cp      6
1866  0A87 CA C0 0B                     jp      z, RestoreTrk_FM6
1867  0A8A 21 20 10                     ld      hl, Regs_MuteChn
1868  0A8D 47                           ld      b, a
1869  0A8E DD CB 01 56                  bit     2, (ix+1)
1870  0A92 CA 9B 0A                     jp      z, loc_A9B
1871  0A95 CD 79 0E                     call    WriteRegII_Loop
1872  0A98 C3 78 0C                     jp      loc_C78
1873  0A9B              ; ---------------------------------------------------------------------------
1874  0A9B
1875  0A9B              loc_A9B:                                ; CODE XREF: RAM:0A92↑j
1876  0A9B CD 6A 0E                     call    WriteRegI_Loop
1877  0A9E C3 78 0C                     jp      loc_C78
1878  0AA1              ; ---------------------------------------------------------------------------
1879  0AA1
1880  0AA1              RestoreTrk_FM3:                         ; CODE XREF: RAM:0A7D↑j
1881  0AA1 21 20 10                     ld      hl, Regs_MuteChn
1882  0AA4 06 02                        ld      b, 2
1883  0AA6 CD 6A 0E                     call    WriteRegI_Loop
1884  0AA9 21 A7 1D                     ld      hl,  $1DA6+1
1885  0AAC CB 5E                        bit     3, (hl)
1886  0AAE CA 19 0B                     jp      z, loc_B19
1887  0AB1 3E 03                        ld      a, 3
1888  0AB3 CD 45 07                     call    FMNoteOff
1889  0AB6 D5                           push    de
1890  0AB7 E5                           push    hl
1891  0AB8 C5                           push    bc
1892  0AB9 21 AD 1D                     ld      hl,  $1DA6+7
1893  0ABC 7E                           ld      a, (hl)
1894  0ABD 2A 06 80                     ld      hl, (8006h)
1895  0AC0 87                           add     a, a
1896  0AC1 06 00                        ld      b, 0
1897  0AC3 4F                           ld      c, a
1898  0AC4 09                           add     hl, bc
1899  0AC5 5E                           ld      e, (hl)
1900  0AC6 23                           inc     hl
1901  0AC7 56                           ld      d, (hl)
1902  0AC8 EB                           ex      de, hl
1903  0AC9 06 02                        ld      b, 2
1904  0ACB CD 6A 0E                     call    WriteRegI_Loop
1905  0ACE 21 BD 1D                     ld      hl,  $1DA6+17h
1906  0AD1 7E                           ld      a, (hl)
1907  0AD2 E6 07                        and     7
1908  0AD4 FE 04                        cp      4
1909  0AD6 CA F3 0A                     jp      z, loc_AF3
1910  0AD9 DA FC 0A                     jp      c, loc_AFC
1911  0ADC FE 07                        cp      7
1912  0ADE DA EA 0A                     jp      c, loc_AEA
1913  0AE1 0E 42                        ld      c, 42h
1914  0AE3 21 BE 1D                     ld      hl,  $1DA6+18h
1915  0AE6 7E                           ld      a, (hl)
1916  0AE7 CD D8 0D                     call    WriteFMIMain
1917  0AEA
1918  0AEA              loc_AEA:                                ; CODE XREF: RAM:0ADE↑j
1919  0AEA 0E 46                        ld      c, 46h
1920  0AEC 21 C0 1D                     ld      hl,  $1DA6+1Ah
1921  0AEF 7E                           ld      a, (hl)
1922  0AF0 CD D8 0D                     call    WriteFMIMain
1923  0AF3
1924  0AF3              loc_AF3:                                ; CODE XREF: RAM:0AD6↑j
1925  0AF3 0E 4A                        ld      c, 4Ah
1926  0AF5 21 BF 1D                     ld      hl,  $1DA6+19h
1927  0AF8 7E                           ld      a, (hl)
1928  0AF9 CD D8 0D                     call    WriteFMIMain
1929  0AFC
1930  0AFC              loc_AFC:                                ; CODE XREF: RAM:0AD9↑j
1931  0AFC 0E 4E                        ld      c, 4Eh
1932  0AFE 21 C1 1D                     ld      hl,  $1DA6+1Bh
1933  0B01 7E                           ld      a, (hl)
1934  0B02 CD D8 0D                     call    WriteFMIMain
1935  0B05 21 BC 1D                     ld      hl,  $1DA6+16h
1936  0B08 7E                           ld      a, (hl)
1937  0B09 0E B6                        ld      c, 0B6h
1938  0B0B CD D8 0D                     call    WriteFMIMain
1939  0B0E C1                           pop     bc
1940  0B0F E1                           pop     hl
1941  0B10 D1                           pop     de
1942  0B11 21 A6 1D                     ld      hl, $1DA6   ; Music Track FM 3
1943  0B14 CB 96                        res     2, (hl)
1944  0B16 C3 78 0C                     jp      loc_C78
1945  0B19              ; ---------------------------------------------------------------------------
1946  0B19
1947  0B19              loc_B19:                                ; CODE XREF: RAM:0AAE↑j
1948  0B19 0E B6                        ld      c, 0B6h
1949  0B1B 3E C0                        ld      a, 0C0h
1950  0B1D CD DD 0D                     call    WriteFMI
1951  0B20 3E 02                        ld      a, 2
1952  0B22 CD 45 07                     call    FMNoteOff
1953  0B25 21 A6 1D                     ld      hl, $1DA6   ; Music Track FM 3
1954  0B28 CB 96                        res     2, (hl)
1955  0B2A C3 79 0C                     jp      loc_C79
1956  0B2D              ; ---------------------------------------------------------------------------
1957  0B2D
1958  0B2D              RestoreTrk_FM5:                         ; CODE XREF: RAM:0A82↑j
1959  0B2D 21 20 10                     ld      hl, Regs_MuteChn
1960  0B30 06 01                        ld      b, 1
1961  0B32 CD 79 0E                     call    WriteRegII_Loop
1962  0B35 3E 05                        ld      a, 5
1963  0B37 CD 45 07                     call    FMNoteOff
1964  0B3A D5                           push    de
1965  0B3B E5                           push    hl
1966  0B3C C5                           push    bc
1967  0B3D 21 66 1E                     ld      hl, $1E66   ; Special SFX Track FM 5
1968  0B40 CB 7E                        bit     7, (hl)
1969  0B42 28 1C                        jr      z, loc_B60
1970  0B44 21 6D 1E                     ld      hl,  $1E66+7
1971  0B47 7E                           ld      a, (hl)
1972  0B48 2A 06 80                     ld      hl, (8006h)
1973  0B4B 87                           add     a, a
1974  0B4C 06 00                        ld      b, 0
1975  0B4E 4F                           ld      c, a
1976  0B4F 09                           add     hl, bc
1977  0B50 5E                           ld      e, (hl)
1978  0B51 23                           inc     hl
1979  0B52 56                           ld      d, (hl)
1980  0B53 EB                           ex      de, hl
1981  0B54 06 01                        ld      b, 1
1982  0B56 CD 79 0E                     call    WriteRegII_Loop
1983  0B59 21 66 1E                     ld      hl, $1E66   ; Special SFX Track FM 5
1984  0B5C CB 96                        res     2, (hl)
1985  0B5E 18 55                        jr      loc_BB5
1986  0B60              ; ---------------------------------------------------------------------------
1987  0B60
1988  0B60              loc_B60:                                ; CODE XREF: RAM:0B42↑j
1989  0B60 21 0D 1E                     ld      hl,  $1E06+7
1990  0B63 7E                           ld      a, (hl)
1991  0B64 2A 06 80                     ld      hl, (8006h)
1992  0B67 87                           add     a, a
1993  0B68 06 00                        ld      b, 0
1994  0B6A 4F                           ld      c, a
1995  0B6B 09                           add     hl, bc
1996  0B6C 5E                           ld      e, (hl)
1997  0B6D 23                           inc     hl
1998  0B6E 56                           ld      d, (hl)
1999  0B6F EB                           ex      de, hl
2000  0B70 06 01                        ld      b, 1
2001  0B72 CD 79 0E                     call    WriteRegII_Loop
2002  0B75 21 1D 1E                     ld      hl,  $1E06+17h
2003  0B78 7E                           ld      a, (hl)
2004  0B79 E6 07                        and     7
2005  0B7B FE 04                        cp      4
2006  0B7D CA 9A 0B                     jp      z, loc_B9A
2007  0B80 DA A3 0B                     jp      c, loc_BA3
2008  0B83 FE 07                        cp      7
2009  0B85 DA 91 0B                     jp      c, loc_B91
2010  0B88 0E 41                        ld      c, 41h
2011  0B8A 21 1E 1E                     ld      hl,  $1E06+18h
2012  0B8D 7E                           ld      a, (hl)
2013  0B8E CD EF 0D                     call    WriteFMII
2014  0B91
2015  0B91              loc_B91:                                ; CODE XREF: RAM:0B85↑j
2016  0B91 0E 45                        ld      c, 45h
2017  0B93 21 20 1E                     ld      hl,  $1E06+1Ah
2018  0B96 7E                           ld      a, (hl)
2019  0B97 CD EF 0D                     call    WriteFMII
2020  0B9A
2021  0B9A              loc_B9A:                                ; CODE XREF: RAM:0B7D↑j
2022  0B9A 0E 49                        ld      c, 49h
2023  0B9C 21 1F 1E                     ld      hl,  $1E06+19h
2024  0B9F 7E                           ld      a, (hl)
2025  0BA0 CD EF 0D                     call    WriteFMII
2026  0BA3
2027  0BA3              loc_BA3:                                ; CODE XREF: RAM:0B80↑j
2028  0BA3 0E 4D                        ld      c, 4Dh
2029  0BA5 21 21 1E                     ld      hl,  $1E06+1Bh
2030  0BA8 7E                           ld      a, (hl)
2031  0BA9 CD EF 0D                     call    WriteFMII
2032  0BAC 21 1C 1E                     ld      hl,  $1E06+16h
2033  0BAF 7E                           ld      a, (hl)
2034  0BB0 0E B5                        ld      c, 0B5h
2035  0BB2 CD EF 0D                     call    WriteFMII
2036  0BB5
2037  0BB5              loc_BB5:                                ; CODE XREF: RAM:0B5E↑j
2038  0BB5 C1                           pop     bc
2039  0BB6 E1                           pop     hl
2040  0BB7 D1                           pop     de
2041  0BB8 21 06 1E                     ld      hl, $1E06   ; Music Track FM 5
2042  0BBB CB 96                        res     2, (hl)
2043  0BBD C3 78 0C                     jp      loc_C78
2044  0BC0              ; ---------------------------------------------------------------------------
2045  0BC0
2046  0BC0              RestoreTrk_FM6:                         ; CODE XREF: RAM:0A87↑j
2047  0BC0 21 20 10                     ld      hl, Regs_MuteChn
2048  0BC3 06 02                        ld      b, 2
2049  0BC5 CD 79 0E                     call    WriteRegII_Loop
2050  0BC8 3E 06                        ld      a, 6
2051  0BCA CD 45 07                     call    FMNoteOff
2052  0BCD D5                           push    de
2053  0BCE E5                           push    hl
2054  0BCF C5                           push    bc
2055  0BD0 21 96 1E                     ld      hl, $1E96   ; Special SFX Track FM 6
2056  0BD3 CB 7E                        bit     7, (hl)
2057  0BD5 28 1C                        jr      z, loc_BF3
2058  0BD7 21 9D 1E                     ld      hl,  $1E96+7
2059  0BDA 7E                           ld      a, (hl)
2060  0BDB 2A 06 80                     ld      hl, (8006h)
2061  0BDE 87                           add     a, a
2062  0BDF 06 00                        ld      b, 0
2063  0BE1 4F                           ld      c, a
2064  0BE2 09                           add     hl, bc
2065  0BE3 5E                           ld      e, (hl)
2066  0BE4 23                           inc     hl
2067  0BE5 56                           ld      d, (hl)
2068  0BE6 EB                           ex      de, hl
2069  0BE7 06 02                        ld      b, 2
2070  0BE9 CD 79 0E                     call    WriteRegII_Loop
2071  0BEC 21 96 1E                     ld      hl, $1E96   ; Special SFX Track FM 6
2072  0BEF CB 96                        res     2, (hl)
2073  0BF1 18 55                        jr      loc_C48
2074  0BF3              ; ---------------------------------------------------------------------------
2075  0BF3
2076  0BF3              loc_BF3:                                ; CODE XREF: RAM:0BD5↑j
2077  0BF3 21 3D 1E                     ld      hl,  $1E36+7
2078  0BF6 7E                           ld      a, (hl)
2079  0BF7 2A 06 80                     ld      hl, (8006h)
2080  0BFA 87                           add     a, a
2081  0BFB 06 00                        ld      b, 0
2082  0BFD 4F                           ld      c, a
2083  0BFE 09                           add     hl, bc
2084  0BFF 5E                           ld      e, (hl)
2085  0C00 23                           inc     hl
2086  0C01 56                           ld      d, (hl)
2087  0C02 EB                           ex      de, hl
2088  0C03 06 02                        ld      b, 2
2089  0C05 CD 79 0E                     call    WriteRegII_Loop
2090  0C08 21 4D 1E                     ld      hl,  $1E36+17h
2091  0C0B 7E                           ld      a, (hl)
2092  0C0C E6 07                        and     7
2093  0C0E FE 04                        cp      4
2094  0C10 CA 2D 0C                     jp      z, loc_C2D
2095  0C13 DA 36 0C                     jp      c, loc_C36
2096  0C16 FE 07                        cp      7
2097  0C18 DA 24 0C                     jp      c, loc_C24
2098  0C1B 0E 42                        ld      c, 42h
2099  0C1D 21 4E 1E                     ld      hl,  $1E36+18h
2100  0C20 7E                           ld      a, (hl)
2101  0C21 CD EF 0D                     call    WriteFMII
2102  0C24
2103  0C24              loc_C24:                                ; CODE XREF: RAM:0C18↑j
2104  0C24 0E 46                        ld      c, 46h
2105  0C26 21 50 1E                     ld      hl,  $1E36+1Ah
2106  0C29 7E                           ld      a, (hl)
2107  0C2A CD EF 0D                     call    WriteFMII
2108  0C2D
2109  0C2D              loc_C2D:                                ; CODE XREF: RAM:0C10↑j
2110  0C2D 0E 4A                        ld      c, 4Ah
2111  0C2F 21 4F 1E                     ld      hl,  $1E36+19h
2112  0C32 7E                           ld      a, (hl)
2113  0C33 CD EF 0D                     call    WriteFMII
2114  0C36
2115  0C36              loc_C36:                                ; CODE XREF: RAM:0C13↑j
2116  0C36 0E 4E                        ld      c, 4Eh
2117  0C38 21 51 1E                     ld      hl,  $1E36+1Bh
2118  0C3B 7E                           ld      a, (hl)
2119  0C3C CD EF 0D                     call    WriteFMII
2120  0C3F 21 4C 1E                     ld      hl,  $1E36+16h
2121  0C42 7E                           ld      a, (hl)
2122  0C43 0E B6                        ld      c, 0B6h
2123  0C45 CD EF 0D                     call    WriteFMII
2124  0C48
2125  0C48              loc_C48:                                ; CODE XREF: RAM:0BF1↑j
2126  0C48 C1                           pop     bc
2127  0C49 E1                           pop     hl
2128  0C4A D1                           pop     de
2129  0C4B 21 36 1E                     ld      hl, $1E36   ; Music Track FM 6
2130  0C4E CB 96                        res     2, (hl)
2131  0C50 C3 78 0C                     jp      loc_C78
2132  0C53              ; ---------------------------------------------------------------------------
2133  0C53 C6 1F                        add     a, 1Fh
2134  0C55 CD 63 11                     call    WritePSG
2135  0C58 FE DF                        cp      0DFh
2136  0C5A DA 78 0C                     jp      c, loc_C78
2137  0C5D 3A 19 1D                     ld      a, ($1D19)
2138  0C60 CD 63 11                     call    WritePSG
2139  0C63 3E DF                        ld      a, 0DFh
2140  0C65 CD 63 11                     call    WritePSG
2141  0C68 3E FF                        ld      a, 0FFh
2142  0C6A CD 63 11                     call    WritePSG
2143  0C6D 21 96 1E                     ld      hl, $1E96   ; Special SFX Track FM 6
2144  0C70 CB 96                        res     2, (hl)
2145  0C72 21 39 1F                     ld      hl,  $1F26+13h
2146  0C75 3E 1F                        ld      a, 1Fh
2147  0C77 77                           ld      (hl), a
2148  0C78
2149  0C78              loc_C78:                                ; CODE XREF: RAM:0A98↑j
2150  0C78                                                      ; RAM:0A9E↑j ...
2151  0C78 E1                           pop     hl
2152  0C79
2153  0C79              loc_C79:                                ; CODE XREF: RAM:0B2A↑j
2154  0C79 E1                           pop     hl
2155  0C7A C9                           ret
2156  0C7B              ; ---------------------------------------------------------------------------
2157  0C7B
2158  0C7B              cfF8_GoSub:                             ; DATA XREF: RAM:0850↑o
2159  0C7B 1A                           ld      a, (de)
2160  0C7C 4F                           ld      c, a
2161  0C7D 13                           inc     de
2162  0C7E 1A                           ld      a, (de)
2163  0C7F 47                           ld      b, a
2164  0C80 C5                           push    bc
2165  0C81 DD E5                        push    ix
2166  0C83 E1                           pop     hl
2167  0C84 DD 35 09                     dec     (ix+9)
2168  0C87 DD 4E 09                     ld      c, (ix+9)
2169  0C8A DD 35 09                     dec     (ix+9)
2170  0C8D 06 00                        ld      b, 0
2171  0C8F 09                           add     hl, bc
2172  0C90 72                           ld      (hl), d
2173  0C91 2B                           dec     hl
2174  0C92 73                           ld      (hl), e
2175  0C93 D1                           pop     de
2176  0C94 1B                           dec     de
2177  0C95 C9                           ret
2178  0C96              ; ---------------------------------------------------------------------------
2179  0C96
2180  0C96              cfF9_Return:                            ; DATA XREF: RAM:0850↑o
2181  0C96 DD E5                        push    ix
2182  0C98 E1                           pop     hl
2183  0C99 DD 4E 09                     ld      c, (ix+9)
2184  0C9C 06 00                        ld      b, 0
2185  0C9E 09                           add     hl, bc
2186  0C9F 5E                           ld      e, (hl)
2187  0CA0 23                           inc     hl
2188  0CA1 56                           ld      d, (hl)
2189  0CA2 DD 34 09                     inc     (ix+9)
2190  0CA5 DD 34 09                     inc     (ix+9)
2191  0CA8 C9                           ret
2192  0CA9              ; ---------------------------------------------------------------------------
2193  0CA9
2194  0CA9              cfF7_Loop:                              ; DATA XREF: RAM:0850↑o
2195  0CA9 1A                           ld      a, (de)
2196  0CAA 13                           inc     de
2197  0CAB C6 1C                        add     a, 1Ch
2198  0CAD 4F                           ld      c, a
2199  0CAE 06 00                        ld      b, 0
2200  0CB0 DD E5                        push    ix
2201  0CB2 E1                           pop     hl
2202  0CB3 09                           add     hl, bc
2203  0CB4 7E                           ld      a, (hl)
2204  0CB5 B7                           or      a
2205  0CB6 20 02                        jr      nz, loc_CBA
2206  0CB8 1A                           ld      a, (de)
2207  0CB9 77                           ld      (hl), a
2208  0CBA
2209  0CBA              loc_CBA:                                ; CODE XREF: RAM:0CB6↑j
2210  0CBA 13                           inc     de
2211  0CBB 35                           dec     (hl)
2212  0CBC C2 4B 0A                     jp      nz, cfF6_GoTo
2213  0CBF 13                           inc     de
2214  0CC0 C9                           ret
2215  0CC1
2216  0CC1              ; =============== S U B R O U T I N E =======================================
2217  0CC1
2218  0CC1
2219  0CC1              StopAllSound:                           ; CODE XREF: DoFading+1B↑j
2220  0CC1                                                      ; DoFading+B3↑j ...
2221  0CC1 AF                           xor     a
2222  0CC2 32 0A 1D                     ld      ($1D0A), a
2223  0CC5 21 46 1D                     ld      hl, $1D46   ; 1D46 - Music Tracks
2224  0CC8 11 47 1D                     ld      de, $1D46+1
2225  0CCB 01 3F 02                     ld      bc, 23Fh        ; 240h = 12 tracks à 30h bytes
2226  0CCE 36 00                        ld      (hl), 0
2227  0CD0 ED B0                        ldir
2228  0CD2              ; End of function StopAllSound
2229  0CD2
2230  0CD2
2231  0CD2              ; =============== S U B R O U T I N E =======================================
2232  0CD2
2233  0CD2
2234  0CD2              SilenceFM:                              ; CODE XREF: ResetFMChip+4↑p
2235  0CD2 21 EF 0F                     ld      hl, Regs_MuteAllChn
2236  0CD5 06 00                        ld      b, 0
2237  0CD7 CD 6A 0E                     call    WriteRegI_Loop
2238  0CDA 21 EF 0F                     ld      hl, Regs_MuteAllChn
2239  0CDD 06 00                        ld      b, 0
2240  0CDF CD 79 0E                     call    WriteRegII_Loop
2241  0CE2
2242  0CE2              SilenceFMNotes:                         ; CODE XREF: RAM:11C1↓p
2243  0CE2 06 07                        ld      b, 7
2244  0CE4 AF                           xor     a
2245  0CE5 32 0C 1D                     ld      ($1D0C), a
2246  0CE8 32 0D 1D                     ld      ($1D0D), a
2247  0CEB 0E 28                        ld      c, 28h
2248  0CED
2249  0CED              loc_CED:                                ; CODE XREF: SilenceFM+1F↓j
2250  0CED CD D8 0D                     call    WriteFMIMain
2251  0CF0 3C                           inc     a
2252  0CF1 10 FA                        djnz    loc_CED
2253  0CF3 C9                           ret
2254  0CF4              ; End of function SilenceFM
2255  0CF4
2256  0CF4
2257  0CF4              ; =============== S U B R O U T I N E =======================================
2258  0CF4
2259  0CF4
2260  0CF4              SilencePSG:                             ; CODE XREF: RAM:0098↑p
2261  0CF4                                                      ; RAM:01D4↑p
2262  0CF4                                                      ; DATA XREF: ...
2263  0CF4 E5                           push    hl
2264  0CF5 C5                           push    bc
2265  0CF6 21 C8 0D                     ld      hl, PSGMuteVals
2266  0CF9 06 0B                        ld      b, 0Bh
2267  0CFB
2268  0CFB              loc_CFB:                                ; CODE XREF: SilencePSG+C↓j
2269  0CFB 7E                           ld      a, (hl)
2270  0CFC CD 63 11                     call    WritePSG
2271  0CFF 23                           inc     hl
2272  0D00 10 F9                        djnz    loc_CFB
2273  0D02 C1                           pop     bc
2274  0D03 E1                           pop     hl
2275  0D04 C9                           ret
2276  0D05              ; End of function SilencePSG
2277  0D05
2278  0D05
2279  0D05              ; =============== S U B R O U T I N E =======================================
2280  0D05
2281  0D05
2282  0D05              SilenceAll:                             ; CODE XREF: DoPause_Exit+5↑p
2283  0D05 C5                           push    bc
2284  0D06 F5                           push    af
2285  0D07 06 03                        ld      b, 3
2286  0D09 0E B4                        ld      c, 0B4h
2287  0D0B
2288  0D0B              loc_D0B:                                ; CODE XREF: SilenceAll+B↓j
2289  0D0B AF                           xor     a
2290  0D0C CD DD 0D                     call    WriteFMI
2291  0D0F 0C                           inc     c
2292  0D10 10 F9                        djnz    loc_D0B
2293  0D12 06 03                        ld      b, 3
2294  0D14 0E B4                        ld      c, 0B4h
2295  0D16
2296  0D16              loc_D16:                                ; CODE XREF: SilenceAll+16↓j
2297  0D16 AF                           xor     a
2298  0D17 CD EF 0D                     call    WriteFMII
2299  0D1A 0C                           inc     c
2300  0D1B 10 F9                        djnz    loc_D16
2301  0D1D AF                           xor     a
2302  0D1E 06 07                        ld      b, 7
2303  0D20 0E 28                        ld      c, 28h
2304  0D22
2305  0D22              loc_D22:                                ; CODE XREF: SilenceAll+21↓j
2306  0D22 CD DD 0D                     call    WriteFMI
2307  0D25 3C                           inc     a
2308  0D26 10 FA                        djnz    loc_D22
2309  0D28 F1                           pop     af
2310  0D29 C1                           pop     bc
2311  0D2A C3 5D 11                     jp      ClearSoundID
2312  0D2D              ; End of function SilenceAll
2313  0D2D
2314  0D2D
2315  0D2D              ; =============== S U B R O U T I N E =======================================
2316  0D2D
2317  0D2D
2318  0D2D              UnpauseOrStop:                          ; CODE XREF: DoUnpause+11↑p
2319  0D2D 3A 0C 1D                     ld      a, ($1D0C)  ; 1D0C - Fade Enable
2320  0D30 B7                           or      a
2321  0D31 CA 3B 0D                     jp      z, UnpauseMusic ; fading disabled (00) - unpause music
2322  0D34 AF                           xor     a               ; was fading (01), so mute everything
2323  0D35 32 0C 1D                     ld      ($1D0C), a  ; and disable fading
2324  0D38 C3 C1 0C                     jp      StopAllSound
2325  0D3B              ; ---------------------------------------------------------------------------
2326  0D3B
2327  0D3B              UnpauseMusic:                           ; CODE XREF: UnpauseOrStop+4↑j
2328  0D3B F5                           push    af
2329  0D3C C5                           push    bc
2330  0D3D D5                           push    de
2331  0D3E 21 5C 1D                     ld      hl,  $1D46+16h
2332  0D41 06 03                        ld      b, 3
2333  0D43 0E B4                        ld      c, 0B4h
2334  0D45
2335  0D45              loc_D45:                                ; CODE XREF: UnpauseOrStop+21↓j
2336  0D45 7E                           ld      a, (hl)
2337  0D46 CD DD 0D                     call    WriteFMI
2338  0D49 0C                           inc     c
2339  0D4A 11 30 00                     ld      de, 30h
2340  0D4D 19                           add     hl, de
2341  0D4E 10 F5                        djnz    loc_D45
2342  0D50 21 EC 1D                     ld      hl,  $1DD6+16h
2343  0D53 06 03                        ld      b, 3
2344  0D55 0E B4                        ld      c, 0B4h
2345  0D57
2346  0D57              loc_D57:                                ; CODE XREF: UnpauseOrStop+33↓j
2347  0D57 7E                           ld      a, (hl)
2348  0D58 CD EF 0D                     call    WriteFMII
2349  0D5B 0C                           inc     c
2350  0D5C 11 30 00                     ld      de, 30h
2351  0D5F 19                           add     hl, de
2352  0D60 10 F5                        djnz    loc_D57
2353  0D62 CD 74 0D                     call    ResumeFM3
2354  0D65 CD 90 0D                     call    ResumeFM5
2355  0D68 CD AC 0D                     call    ResumeFM6
2356  0D6B D1                           pop     de
2357  0D6C C1                           pop     bc
2358  0D6D F1                           pop     af
2359  0D6E 3E 80                        ld      a, 80h
2360  0D70 32 03 1D                     ld      ($1D03), a
2361  0D73 C9                           ret
2362  0D74              ; End of function UnpauseOrStop
2363  0D74
2364  0D74
2365  0D74              ; =============== S U B R O U T I N E =======================================
2366  0D74
2367  0D74
2368  0D74              ResumeFM3:                              ; CODE XREF: UnpauseOrStop+35↑p
2369  0D74 21 A6 1D                     ld      hl, $1DA6   ; Music Track FM 3
2370  0D77 7E                           ld      a, (hl)
2371  0D78 CB 57                        bit     2, a
2372  0D7A C8                           ret     z
2373  0D7B 21 C6 1E                     ld      hl, $1EC6   ; SFX Track FM 3
2374  0D7E 7E                           ld      a, (hl)
2375  0D7F CB 7F                        bit     7, a
2376  0D81 21 DC 1E                     ld      hl,  $1EC6+16h
2377  0D84 20 03                        jr      nz, loc_D89
2378  0D86 21 4C 1E                     ld      hl,  $1E36+16h
2379  0D89
2380  0D89              loc_D89:                                ; CODE XREF: ResumeFM3+10↑j
2381  0D89 7E                           ld      a, (hl)
2382  0D8A 0E B6                        ld      c, 0B6h
2383  0D8C CD DD 0D                     call    WriteFMI
2384  0D8F C9                           ret
2385  0D90              ; End of function ResumeFM3
2386  0D90
2387  0D90
2388  0D90              ; =============== S U B R O U T I N E =======================================
2389  0D90
2390  0D90
2391  0D90              ResumeFM5:                              ; CODE XREF: UnpauseOrStop+38↑p
2392  0D90 21 06 1E                     ld      hl, $1E06   ; Music Track FM 5
2393  0D93 7E                           ld      a, (hl)
2394  0D94 CB 57                        bit     2, a
2395  0D96 C8                           ret     z
2396  0D97 21 F6 1E                     ld      hl, $1EF6   ; SFX Track FM 5
2397  0D9A 7E                           ld      a, (hl)
2398  0D9B CB 7F                        bit     7, a
2399  0D9D 21 0C 1F                     ld      hl,  $1EF6+16h
2400  0DA0 20 03                        jr      nz, loc_DA5
2401  0DA2 21 7C 1E                     ld      hl,  $1E66+16h
2402  0DA5
2403  0DA5              loc_DA5:                                ; CODE XREF: ResumeFM5+10↑j
2404  0DA5 7E                           ld      a, (hl)
2405  0DA6 0E B5                        ld      c, 0B5h
2406  0DA8 CD EF 0D                     call    WriteFMII
2407  0DAB C9                           ret
2408  0DAC              ; End of function ResumeFM5
2409  0DAC
2410  0DAC
2411  0DAC              ; =============== S U B R O U T I N E =======================================
2412  0DAC
2413  0DAC
2414  0DAC              ResumeFM6:                              ; CODE XREF: UnpauseOrStop+3B↑p
2415  0DAC 21 36 1E                     ld      hl, $1E36   ; Music Track FM 6
2416  0DAF 7E                           ld      a, (hl)
2417  0DB0 CB 57                        bit     2, a
2418  0DB2 C8                           ret     z
2419  0DB3 21 26 1F                     ld      hl, $1F26   ; SFX Track FM 6
2420  0DB6 7E                           ld      a, (hl)
2421  0DB7 CB 7F                        bit     7, a
2422  0DB9 21 3C 1F                     ld      hl,  $1F26+16h
2423  0DBC 20 03                        jr      nz, loc_DC1
2424  0DBE 21 AC 1E                     ld      hl,  $1E96+16h
2425  0DC1
2426  0DC1              loc_DC1:                                ; CODE XREF: ResumeFM6+10↑j
2427  0DC1 7E                           ld      a, (hl)
2428  0DC2 0E B6                        ld      c, 0B6h
2429  0DC4 CD EF 0D                     call    WriteFMII
2430  0DC7 C9                           ret
2431  0DC8              ; End of function ResumeFM6
2432  0DC8
2433  0DC8              ; ---------------------------------------------------------------------------
2434  0DC8 80 00        PSGMuteVals:    db  80h,   0            ; DATA XREF: SilencePSG+2↑o
2435  0DCA A0 00                        db 0A0h,   0
2436  0DCC C0 00                        db 0C0h,   0
2437  0DCE 9F BF DF FF                  db  9Fh,0BFh,0DFh,0FFh
2438  0DD2
2439  0DD2              ; =============== S U B R O U T I N E =======================================
2440  0DD2
2441  0DD2
2442  0DD2              WriteFMIorII:                           ; CODE XREF: UpdateTrack+105↑p
2443  0DD2                                                      ; UpdateTrack+10D↑p ...
2444  0DD2 DD CB 01 56                  bit     2, (ix+1)
2445  0DD6 20 12                        jr      nz, WriteFMIIMain
2446  0DD8              ; End of function WriteFMIorII
2447  0DD8
2448  0DD8
2449  0DD8              ; =============== S U B R O U T I N E =======================================
2450  0DD8
2451  0DD8
2452  0DD8              WriteFMIMain:                           ; CODE XREF: WriteFMIorII_2+6↑p
2453  0DD8                                                      ; LoadDrum_Op12b+2D↑p ...
2454  0DD8 DD CB 00 56                  bit     2, (ix+0)
2455  0DDC C0                           ret     nz
2456  0DDD              ; End of function WriteFMIMain
2457  0DDD
2458  0DDD
2459  0DDD              ; =============== S U B R O U T I N E =======================================
2460  0DDD
2461  0DDD
2462  0DDD              WriteFMI:                               ; CODE XREF: ResetFMChip+E↑p
2463  0DDD                                                      ; RAM:0B1D↑p ...
2464  0DDD F5                           push    af
2465  0DDE 79                           ld      a, c
2466  0DDF 32 00 40                     ld      (4000h), a
2467  0DE2 CD B1 11                     call    WaitForYM
2468  0DE5 F1                           pop     af
2469  0DE6 32 01 40                     ld      (4001h), a
2470  0DE9 C9                           ret
2471  0DEA              ; End of function WriteFMI
2472  0DEA
2473  0DEA
2474  0DEA              ; =============== S U B R O U T I N E =======================================
2475  0DEA
2476  0DEA
2477  0DEA              WriteFMIIMain:                          ; CODE XREF: WriteFMIorII+4↑j
2478  0DEA                                                      ; SendFMIns+2A↓p ...
2479  0DEA DD CB 00 56                  bit     2, (ix+0)
2480  0DEE C0                           ret     nz
2481  0DEF
2482  0DEF              WriteFMII:                              ; CODE XREF: WriteFMIorII_2:loc_1B0↑p
2483  0DEF                                                      ; RAM:0B8E↑p ...
2484  0DEF F5                           push    af
2485  0DF0 79                           ld      a, c
2486  0DF1 32 02 40                     ld      (4002h), a
2487  0DF4 CD B1 11                     call    WaitForYM
2488  0DF7 F1                           pop     af
2489  0DF8 32 03 40                     ld      (4003h), a
2490  0DFB C9                           ret
2491  0DFC              ; End of function WriteFMIIMain
2492  0DFC
2493  0DFC
2494  0DFC              ; =============== S U B R O U T I N E =======================================
2495  0DFC
2496  0DFC
2497  0DFC              SendFMIns:                              ; CODE XREF: DrumUpdateTrack+A9↑p
2498  0DFC                                                      ; LoadDrum_Op12b+1F↑p ...
2499  0DFC 7E                           ld      a, (hl)
2500  0DFD FE 83                        cp      83h
2501  0DFF C8                           ret     z
2502  0E00 FE B0                        cp      0B0h
2503  0E02 CC 34 0E                     call    z, SetRegB0
2504  0E05 FE 40                        cp      40h
2505  0E07 CC 3D 0E                     call    z, SetReg40
2506  0E0A FE 48                        cp      48h
2507  0E0C CC 46 0E                     call    z, SetReg48
2508  0E0F FE 44                        cp      44h
2509  0E11 CC 4F 0E                     call    z, SetReg44
2510  0E14 FE 4C                        cp      4Ch
2511  0E16 CC 58 0E                     call    z, SetReg4C
2512  0E19 FE B4                        cp      0B4h
2513  0E1B CC 61 0E                     call    z, SetRegB4
2514  0E1E 80                           add     a, b
2515  0E1F 4F                           ld      c, a
2516  0E20 23                           inc     hl
2517  0E21 7E                           ld      a, (hl)
2518  0E22 DD CB 01 56                  bit     2, (ix+1)
2519  0E26 C4 EA 0D                     call    nz, WriteFMIIMain
2520  0E29 DD CB 01 56                  bit     2, (ix+1)
2521  0E2D CC D8 0D                     call    z, WriteFMIMain
2522  0E30 23                           inc     hl
2523  0E31 C3 FC 0D                     jp      SendFMIns
2524  0E34              ; End of function SendFMIns
2525  0E34
2526  0E34
2527  0E34              ; =============== S U B R O U T I N E =======================================
2528  0E34
2529  0E34
2530  0E34              SetRegB0:                               ; CODE XREF: SendFMIns+6↑p
2531  0E34 F5                           push    af
2532  0E35 23                           inc     hl
2533  0E36 7E                           ld      a, (hl)
2534  0E37 DD 77 17                     ld      (ix+17h), a
2535  0E3A 2B                           dec     hl
2536  0E3B F1                           pop     af
2537  0E3C C9                           ret
2538  0E3D              ; End of function SetRegB0
2539  0E3D
2540  0E3D
2541  0E3D              ; =============== S U B R O U T I N E =======================================
2542  0E3D
2543  0E3D
2544  0E3D              SetReg40:                               ; CODE XREF: SendFMIns+B↑p
2545  0E3D F5                           push    af
2546  0E3E 23                           inc     hl
2547  0E3F 7E                           ld      a, (hl)
2548  0E40 DD 77 18                     ld      (ix+18h), a
2549  0E43 2B                           dec     hl
2550  0E44 F1                           pop     af
2551  0E45 C9                           ret
2552  0E46              ; End of function SetReg40
2553  0E46
2554  0E46
2555  0E46              ; =============== S U B R O U T I N E =======================================
2556  0E46
2557  0E46
2558  0E46              SetReg48:                               ; CODE XREF: SendFMIns+10↑p
2559  0E46 F5                           push    af
2560  0E47 23                           inc     hl
2561  0E48 7E                           ld      a, (hl)
2562  0E49 DD 77 19                     ld      (ix+19h), a
2563  0E4C 2B                           dec     hl
2564  0E4D F1                           pop     af
2565  0E4E C9                           ret
2566  0E4F              ; End of function SetReg48
2567  0E4F
2568  0E4F
2569  0E4F              ; =============== S U B R O U T I N E =======================================
2570  0E4F
2571  0E4F
2572  0E4F              SetReg44:                               ; CODE XREF: SendFMIns+15↑p
2573  0E4F F5                           push    af
2574  0E50 23                           inc     hl
2575  0E51 7E                           ld      a, (hl)
2576  0E52 DD 77 1A                     ld      (ix+1Ah), a
2577  0E55 2B                           dec     hl
2578  0E56 F1                           pop     af
2579  0E57 C9                           ret
2580  0E58              ; End of function SetReg44
2581  0E58
2582  0E58
2583  0E58              ; =============== S U B R O U T I N E =======================================
2584  0E58
2585  0E58
2586  0E58              SetReg4C:                               ; CODE XREF: SendFMIns+1A↑p
2587  0E58 F5                           push    af
2588  0E59 23                           inc     hl
2589  0E5A 7E                           ld      a, (hl)
2590  0E5B DD 77 1B                     ld      (ix+1Bh), a
2591  0E5E 2B                           dec     hl
2592  0E5F F1                           pop     af
2593  0E60 C9                           ret
2594  0E61              ; End of function SetReg4C
2595  0E61
2596  0E61
2597  0E61              ; =============== S U B R O U T I N E =======================================
2598  0E61
2599  0E61
2600  0E61              SetRegB4:                               ; CODE XREF: SendFMIns+1F↑p
2601  0E61 F5                           push    af
2602  0E62 23                           inc     hl
2603  0E63 7E                           ld      a, (hl)
2604  0E64 DD 77 16                     ld      (ix+16h), a
2605  0E67 2B                           dec     hl
2606  0E68 F1                           pop     af
2607  0E69 C9                           ret
2608  0E6A              ; End of function SetRegB4
2609  0E6A
2610  0E6A
2611  0E6A              ; =============== S U B R O U T I N E =======================================
2612  0E6A
2613  0E6A
2614  0E6A              WriteRegI_Loop:                         ; CODE XREF: DrumUpdateTrack+62↑p
2615  0E6A                                                      ; RAM:loc_A9B↑p ...
2616  0E6A 7E                           ld      a, (hl)
2617  0E6B FE 83                        cp      83h
2618  0E6D C8                           ret     z
2619  0E6E 80                           add     a, b
2620  0E6F 4F                           ld      c, a
2621  0E70 23                           inc     hl
2622  0E71 7E                           ld      a, (hl)
2623  0E72 CD D8 0D                     call    WriteFMIMain
2624  0E75 23                           inc     hl
2625  0E76 C3 6A 0E                     jp      WriteRegI_Loop
2626  0E79              ; End of function WriteRegI_Loop
2627  0E79
2628  0E79
2629  0E79              ; =============== S U B R O U T I N E =======================================
2630  0E79
2631  0E79
2632  0E79              WriteRegII_Loop:                        ; CODE XREF: RAM:0A95↑p
2633  0E79                                                      ; RAM:0B32↑p ...
2634  0E79 7E                           ld      a, (hl)
2635  0E7A FE 83                        cp      83h
2636  0E7C C8                           ret     z
2637  0E7D 80                           add     a, b
2638  0E7E 4F                           ld      c, a
2639  0E7F 23                           inc     hl
2640  0E80 7E                           ld      a, (hl)
2641  0E81 CD EA 0D                     call    WriteFMIIMain
2642  0E84 23                           inc     hl
2643  0E85 C3 79 0E                     jp      WriteRegII_Loop
2644  0E88              ; End of function WriteRegII_Loop
2645  0E88
2646  0E88              ; ---------------------------------------------------------------------------
2647  0E88 00 00        PSGFreqs:       dw    0                 ; DATA XREF: GetFrequency:loc_81E↑o
2648  0E8A F8 03 BF 03                  dw  3F8h, 3BFh, 389h, 356h, 326h, 2FAh, 2CEh, 2A6h, 280h, 25Ch, 23Ah, 21Ah
2648  0E8E 89 03 56 03
2648  0E92 26 03 FA 02
2648  0E96 CE 02 A6 02
2648  0E9A 80 02 5C 02
2648  0E9E 3A 02 1A 02
2649  0EA2 FC 01 DF 01                  dw  1FCh, 1DFh, 1C4h, 1ABh, 193h, 17Dh, 167h, 153h, 140h, 12Eh, 11Dh, 10Dh
2649  0EA6 C4 01 AB 01
2649  0EAA 93 01 7D 01
2649  0EAE 67 01 53 01
2649  0EB2 40 01 2E 01
2649  0EB6 1D 01 0D 01
2650  0EBA FE 00 F0 00                  dw  0FEh, 0F0h, 0E2h, 0D6h, 0CAh, 0BEh, 0B4h, 0AAh, 0A0h,  97h,  8Fh,  87h
2650  0EBE E2 00 D6 00
2650  0EC2 CA 00 BE 00
2650  0EC6 B4 00 AA 00
2650  0ECA A0 00 97 00
2650  0ECE 8F 00 87 00
2651  0ED2 7F 00 78 00                  dw   7Fh,  78h,  71h,  6Bh,  65h,  5Fh,  5Ah,  55h,  50h,  4Bh,  47h,  43h
2651  0ED6 71 00 6B 00
2651  0EDA 65 00 5F 00
2651  0EDE 5A 00 55 00
2651  0EE2 50 00 4B 00
2651  0EE6 47 00 43 00
2652  0EEA 40 00 3C 00                  dw   40h,  3Ch,  3Ah,  36h,  33h,  30h,  2Dh,  2Bh,  28h,  25h,  23h,  21h
2652  0EEE 3A 00 36 00
2652  0EF2 33 00 30 00
2652  0EF6 2D 00 2B 00
2652  0EFA 28 00 25 00
2652  0EFE 23 00 21 00
2653  0F02 1F 00 1E 00                  dw   1Fh,  1Eh,  1Bh,  1Ah,  19h,  17h,  16h,  15h,  14h,  13h,  12h,  11h
2653  0F06 1B 00 1A 00
2653  0F0A 19 00 17 00
2653  0F0E 16 00 15 00
2653  0F12 14 00 13 00
2653  0F16 12 00 11 00
2654  0F1A 00 00        FMFreqs:        dw    0                 ; DATA XREF: GetFrequency+10↑o
2655  0F1C 69 0A 8D 0A                  dw 0A69h,0A8Dh,0AB4h,0ADDh,0B09h,0B37h,0B68h,0B9Ch,0BD3h,0C0Dh,0C4Bh,0C8Ch
2655  0F20 B4 0A DD 0A
2655  0F24 09 0B 37 0B
2655  0F28 68 0B 9C 0B
2655  0F2C D3 0B 0D 0C
2655  0F30 4B 0C 8C 0C
2656  0F34 69 12 8D 12                  dw 1269h,128Dh,12B4h,12DDh,1309h,1337h,1368h,139Ch,13D3h,140Dh,144Bh,148Ch
2656  0F38 B4 12 DD 12
2656  0F3C 09 13 37 13
2656  0F40 68 13 9C 13
2656  0F44 D3 13 0D 14
2656  0F48 4B 14 8C 14
2657  0F4C 69 1A 8D 1A                  dw 1A69h,1A8Dh,1AB4h,1ADDh,1B09h,1B37h,1B68h,1B9Ch,1BD3h,1C0Dh,1C4Bh,1C8Ch
2657  0F50 B4 1A DD 1A
2657  0F54 09 1B 37 1B
2657  0F58 68 1B 9C 1B
2657  0F5C D3 1B 0D 1C
2657  0F60 4B 1C 8C 1C
2658  0F64 69 22 8D 22                  dw 2269h,228Dh,22B4h,22DDh,2309h,2337h,2368h,239Ch,23D3h,240Dh,244Bh,248Ch
2658  0F68 B4 22 DD 22
2658  0F6C 09 23 37 23
2658  0F70 68 23 9C 23
2658  0F74 D3 23 0D 24
2658  0F78 4B 24 8C 24
2659  0F7C 69 2A 8D 2A                  dw 2A69h,2A8Dh,2AB4h,2ADDh,2B09h,2B37h,2B68h,2B9Ch,2BD3h,2C0Dh,2C4Bh,2C8Ch
2659  0F80 B4 2A DD 2A
2659  0F84 09 2B 37 2B
2659  0F88 68 2B 9C 2B
2659  0F8C D3 2B 0D 2C
2659  0F90 4B 2C 8C 2C
2660  0F94 69 32 8D 32                  dw 3269h,328Dh,32B4h,32DDh,3309h,3337h,3368h,339Ch,33D3h,340Dh,344Bh,348Ch
2660  0F98 B4 32 DD 32
2660  0F9C 09 33 37 33
2660  0FA0 68 33 9C 33
2660  0FA4 D3 33 0D 34
2660  0FA8 4B 34 8C 34
2661  0FAC 69 3A 8D 3A                  dw 3A69h,3A8Dh,3AB4h,3ADDh,3B09h,3B37h,3B68h,3B9Ch,3BD3h,3C0Dh,3C4Bh,3C8Ch
2661  0FB0 B4 3A DD 3A
2661  0FB4 09 3B 37 3B
2661  0FB8 68 3B 9C 3B
2661  0FBC D3 3B 0D 3C
2661  0FC0 4B 3C 8C 3C
2662  0FC4 21 00                        db  21h, 00h
2663  0FC6 24 00                        db  24h, 00h
2664  0FC8 25 00                        db  25h, 00h
2665  0FCA 26 E5                        db  26h,0E5h
2666  0FCC 27 30                        db  27h, 30h
2667  0FCE 28 00                        db  28h, 00h
2668  0FD0 28 01                        db  28h, 01h
2669  0FD2 28 02                        db  28h, 02h
2670  0FD4 2D 00                        db  2Dh, 00h
2671  0FD6 90 00                        db  90h, 00h
2672  0FD8 91 00                        db  91h, 00h
2673  0FDA 92 00                        db  92h, 00h
2674  0FDC 94 00                        db  94h, 00h
2675  0FDE 95 00                        db  95h, 00h
2676  0FE0 96 00                        db  96h, 00h
2677  0FE2 98 00                        db  98h, 00h
2678  0FE4 99 00                        db  99h, 00h
2679  0FE6 9A 00                        db  9Ah, 00h
2680  0FE8 9C 00                        db  9Ch, 00h
2681  0FEA 9D 00                        db  9Dh, 00h
2682  0FEC 9E 00                        db  9Eh, 00h
2683  0FEE 83                           db  83h
2684  0FEF 40 7F        Regs_MuteAllChn:db  40h, 7Fh            ; DATA XREF: SilenceFM↑o
2685  0FF1                                                      ; SilenceFM+8↑o
2686  0FF1 41 7F                        db  41h, 7Fh
2687  0FF3 42 7F                        db  42h, 7Fh
2688  0FF5 44 7F                        db  44h, 7Fh
2689  0FF7 45 7F                        db  45h, 7Fh
2690  0FF9 46 7F                        db  46h, 7Fh
2691  0FFB 48 7F                        db  48h, 7Fh
2692  0FFD 49 7F                        db  49h, 7Fh
2693  0FFF 4A 7F                        db  4Ah, 7Fh
2694  1001 4C 7F                        db  4Ch, 7Fh
2695  1003 4D 7F                        db  4Dh, 7Fh
2696  1005 4E 7F                        db  4Eh, 7Fh
2697  1007 80 FF                        db  80h,0FFh
2698  1009 84 FF                        db  84h,0FFh
2699  100B 88 FF                        db  88h,0FFh
2700  100D 8C FF                        db  8Ch,0FFh
2701  100F 81 FF                        db  81h,0FFh
2702  1011 85 FF                        db  85h,0FFh
2703  1013 89 FF                        db  89h,0FFh
2704  1015 8D FF                        db  8Dh,0FFh
2705  1017 82 FF                        db  82h,0FFh
2706  1019 86 FF                        db  86h,0FFh
2707  101B 8A FF                        db  8Ah,0FFh
2708  101D 8E FF                        db  8Eh,0FFh
2709  101F 83                           db  83h
2710  1020 80 FF        Regs_MuteChn:   db  80h,0FFh            ; DATA XREF: DrumUpdateTrack+5D↑o
2711  1022                                                      ; RAM:0A8A↑o ...
2712  1022 84 FF                        db  84h,0FFh
2713  1024 88 FF                        db  88h,0FFh
2714  1026 8C FF                        db  8Ch,0FFh
2715  1028 40 7F                        db  40h, 7Fh
2716  102A 44 7F                        db  44h, 7Fh
2717  102C 48 7F                        db  48h, 7Fh
2718  102E 4C 7F                        db  4Ch, 7Fh
2719  1030 83                           db  83h
2720  1031
2721  1031              ; =============== S U B R O U T I N E =======================================
2722  1031
2723  1031
2724  1031              PlaySoundID:                            ; CODE XREF: UpdateAll+F↑p
2725  1031 3A 03 1D                     ld      a, ($1D03)
2726  1034 CB 7F                        bit     7, a
2727  1036 CA C1 0C                     jp      z, StopAllSound ; 00-7F - Stop All
2728  1039 FE 90                        cp      90h
2729  103B DA 5C 10                     jp      c, PlayMusic    ; 80-8F - Music
2730  103E FE CF                        cp      0CFh
2731  1040 DA BD 10                     jp      c, PlaySFX      ; 90-CE - SFX
2732  1043 FE E0                        cp      0E0h
2733  1045 DA 80 10                     jp      c, PlaySpcSFX   ; D0-DF - Special SFX (BF is invalid)
2734  1048 FE E4                        cp      0E4h
2735  104A D2 C1 0C                     jp      nc, StopAllSound ; E4-FF - Stop All
2736  104D
2737  104D              PlaySnd_Command:                        ; E0-E3 - Special Commands
2738  104D D6 E0                        sub     0E0h
2739  104F 87                           add     a, a
2740  1050 4F                           ld      c, a
2741  1051 06 00                        ld      b, 0
2742  1053 21 3D 15                     ld      hl, CmdPtrTable
2743  1056 09                           add     hl, bc
2744  1057 7E                           ld      a, (hl)
2745  1058 23                           inc     hl
2746  1059 66                           ld      h, (hl)
2747  105A 6F                           ld      l, a
2748  105B E9                           jp      (hl)
2749  105C              ; ---------------------------------------------------------------------------
2750  105C
2751  105C              PlayMusic:                              ; CODE XREF: PlaySoundID+A↑j
2752  105C D6 81                        sub     81h
2753  105E F8                           ret     m
2754  105F F5                           push    af
2755  1060 CD C1 0C                     call    StopAllSound
2756  1063 F1                           pop     af
2757  1064 06 00                        ld      b, 0
2758  1066 4F                           ld      c, a
2759  1067 21 C0 14                     ld      hl, MusicTempoList
2760  106A 09                           add     hl, bc
2761  106B F5                           push    af
2762  106C 7E                           ld      a, (hl)
2763  106D 32 01 1D                     ld      ($1D01), a
2764  1070 32 02 1D                     ld      ($1D02), a
2765  1073 11 46 1D                     ld      de, $1D46   ; 1D46 - Music Tracks
2766  1076 2A 00 80                     ld      hl, (8000h)
2767  1079 F1                           pop     af
2768  107A CD A8 11                     call    ReadPtrTable_BC
2769  107D C3 2B 11                     jp      LoadSmpsTracks
2770  1080              ; ---------------------------------------------------------------------------
2771  1080
2772  1080              PlaySpcSFX:                             ; CODE XREF: PlaySoundID+14↑j
2773  1080 21 CF 14                     ld      hl, SpcSFXPtrs
2774  1083 D6 D0                        sub     0D0h
2775  1085 CD A8 11                     call    ReadPtrTable_BC
2776  1088 60                           ld      h, b
2777  1089 69                           ld      l, c
2778  108A 23                           inc     hl
2779  108B 23                           inc     hl
2780  108C 0A                           ld      a, (bc)
2781  108D FE 01                        cp      1
2782  108F 20 10                        jr      nz, loc_10A1
2783  1091 7E                           ld      a, (hl)
2784  1092 FE 02                        cp      2
2785  1094 CA AB 10                     jp      z, loc_10AB
2786  1097 FE 05                        cp      5
2787  1099 CA B1 10                     jp      z, loc_10B1
2788  109C FE 06                        cp      6
2789  109E CA B7 10                     jp      z, loc_10B7
2790  10A1
2791  10A1              loc_10A1:                               ; CODE XREF: PlaySoundID+5E↑j
2792  10A1 FE 02                        cp      2
2793  10A3 CA B1 10                     jp      z, loc_10B1
2794  10A6 FE 03                        cp      3
2795  10A8 CA AB 10                     jp      z, loc_10AB
2796  10AB
2797  10AB              loc_10AB:                               ; CODE XREF: PlaySoundID+63↑j
2798  10AB 11 36 1E                     ld      de, $1E36   ; Special SFX Track FM 3 (actually Music Track FM 6)
2799  10AE C3 2B 11                     jp      LoadSmpsTracks
2800  10B1              ; ---------------------------------------------------------------------------
2801  10B1
2802  10B1              loc_10B1:                               ; CODE XREF: PlaySoundID+68↑j
2803  10B1                                                      ; PlaySoundID+72↑j
2804  10B1 11 66 1E                     ld      de, $1E66   ; Special SFX Track FM 5
2805  10B4 C3 2B 11                     jp      LoadSmpsTracks
2806  10B7              ; ---------------------------------------------------------------------------
2807  10B7
2808  10B7              loc_10B7:                               ; CODE XREF: PlaySoundID+6D↑j
2809  10B7 11 96 1E                     ld      de, $1E96   ; Special SFX Track FM 6
2810  10BA C3 2B 11                     jp      LoadSmpsTracks
2811  10BD              ; ---------------------------------------------------------------------------
2812  10BD
2813  10BD              PlaySFX:                                ; CODE XREF: PlaySoundID+F↑j
2814  10BD D6 90                        sub     90h
2815  10BF 21 D7 14                     ld      hl, SFXPtrs
2816  10C2 CD A8 11                     call    ReadPtrTable_BC
2817  10C5 60                           ld      h, b
2818  10C6 69                           ld      l, c
2819  10C7 23                           inc     hl
2820  10C8 23                           inc     hl
2821  10C9 0A                           ld      a, (bc)
2822  10CA FE 01                        cp      1               ; exactly one SFX track?
2823  10CC 20 10                        jr      nz, loc_10DE    ; no - jump
2824  10CE 7E                           ld      a, (hl)
2825  10CF FE 02                        cp      2
2826  10D1 CA E8 10                     jp      z, loc_10E8     ; FM 3
2827  10D4 FE 05                        cp      5
2828  10D6 CA F3 10                     jp      z, loc_10F3     ; FM 5
2829  10D9 FE 06                        cp      6
2830  10DB CA FE 10                     jp      z, loc_10FE     ; FM 6
2831  10DE
2832  10DE              loc_10DE:                               ; CODE XREF: PlaySoundID+9B↑j
2833  10DE FE 02                        cp      2
2834  10E0 CA 09 11                     jp      z, loc_1109     ; 2 SFX tracks - jump (FM 5+6)
2835  10E3 FE 03                        cp      3
2836  10E5 CA 19 11                     jp      z, loc_1119     ; 3 SFX tracks - jump (FM 3+5+6)
2837  10E8
2838  10E8              loc_10E8:                               ; CODE XREF: PlaySoundID+A0↑j
2839  10E8 11 C6 1E                     ld      de, $1EC6   ; SFX Track FM 3
2840  10EB 21 A6 1D                     ld      hl, $1DA6   ; Music Track FM 3
2841  10EE CB D6                        set     2, (hl)         ; set 'overridden' bit
2842  10F0 C3 2B 11                     jp      LoadSmpsTracks
2843  10F3              ; ---------------------------------------------------------------------------
2844  10F3
2845  10F3              loc_10F3:                               ; CODE XREF: PlaySoundID+A5↑j
2846  10F3 11 F6 1E                     ld      de, $1EF6   ; SFX Track FM 5
2847  10F6 21 06 1E                     ld      hl, $1E06   ; Music Track FM 5
2848  10F9 CB D6                        set     2, (hl)
2849  10FB C3 2B 11                     jp      LoadSmpsTracks
2850  10FE              ; ---------------------------------------------------------------------------
2851  10FE
2852  10FE              loc_10FE:                               ; CODE XREF: PlaySoundID+AA↑j
2853  10FE 11 26 1F                     ld      de, $1F26   ; SFX Track FM 6
2854  1101 21 36 1E                     ld      hl, $1E36   ; Music Track FM 6
2855  1104 CB D6                        set     2, (hl)
2856  1106 C3 2B 11                     jp      LoadSmpsTracks
2857  1109              ; ---------------------------------------------------------------------------
2858  1109
2859  1109              loc_1109:                               ; CODE XREF: PlaySoundID+AF↑j
2860  1109 11 F6 1E                     ld      de, $1EF6   ; SFX Track FM 5
2861  110C 21 06 1E                     ld      hl, $1E06   ; Music Track FM 5
2862  110F CB D6                        set     2, (hl)
2863  1111 21 36 1E                     ld      hl, $1E36   ; Music Track FM 6
2864  1114 CB D6                        set     2, (hl)
2865  1116 C3 2B 11                     jp      LoadSmpsTracks
2866  1119              ; ---------------------------------------------------------------------------
2867  1119
2868  1119              loc_1119:                               ; CODE XREF: PlaySoundID+B4↑j
2869  1119 11 C6 1E                     ld      de, $1EC6   ; SFX Track FM 3
2870  111C 21 A6 1D                     ld      hl, $1DA6   ; Music Track FM 3
2871  111F CB D6                        set     2, (hl)
2872  1121 21 06 1E                     ld      hl, $1E06   ; Music Track FM 5
2873  1124 CB D6                        set     2, (hl)
2874  1126 21 36 1E                     ld      hl, $1E36   ; Music Track FM 6
2875  1129 CB D6                        set     2, (hl)
2876  112B
2877  112B              LoadSmpsTracks:                         ; CODE XREF: PlaySoundID+4C↑j
2878  112B                                                      ; PlaySoundID+7D↑j ...
2879  112B 60                           ld      h, b
2880  112C 69                           ld      l, c
2881  112D 46                           ld      b, (hl)
2882  112E 23                           inc     hl
2883  112F
2884  112F              LoadTrack:                              ; CODE XREF: PlaySoundID+12A↓j
2885  112F C5                           push    bc
2886  1130 E5                           push    hl
2887  1131 DD E1                        pop     ix
2888  1133 ED A0                        ldi
2889  1135 ED A0                        ldi
2890  1137 ED A0                        ldi
2891  1139 ED A0                        ldi
2892  113B ED A0                        ldi
2893  113D ED A0                        ldi
2894  113F ED A0                        ldi
2895  1141 ED A0                        ldi
2896  1143 ED A0                        ldi
2897  1145 3E 30                        ld      a, 30h
2898  1147 12                           ld      (de), a
2899  1148 13                           inc     de
2900  1149 3E 01                        ld      a, 1
2901  114B 12                           ld      (de), a
2902  114C 13                           inc     de
2903  114D AF                           xor     a
2904  114E 12                           ld      (de), a
2905  114F 13                           inc     de
2906  1150 12                           ld      (de), a
2907  1151 13                           inc     de
2908  1152 12                           ld      (de), a
2909  1153 E5                           push    hl
2910  1154 21 23 00                     ld      hl, 23h
2911  1157 19                           add     hl, de
2912  1158 EB                           ex      de, hl
2913  1159 E1                           pop     hl
2914  115A C1                           pop     bc
2915  115B 10 D2                        djnz    LoadTrack
2916  115D
2917  115D              ClearSoundID:                           ; CODE XREF: RAM:01D7↑j
2918  115D                                                      ; SilenceAll+25↑j ...
2919  115D 3E 80                        ld      a, 80h
2920  115F 32 03 1D                     ld      ($1D03), a
2921  1162 C9                           ret
2922  1163              ; End of function PlaySoundID
2923  1163
2924  1163
2925  1163              ; =============== S U B R O U T I N E =======================================
2926  1163
2927  1163
2928  1163              WritePSG:                               ; CODE XREF: DrumUpdateTrack+797↑p
2929  1163                                                      ; RAM:0C55↑p ...
2930  1163 F5                           push    af
2931  1164 AF                           xor     a               ; switch to Bank C00000
2932  1165 32 00 60                     ld      (6000h), a      ; Bank bits written: 180h
2933  1168 32 00 60                     ld      (6000h), a
2934  116B 32 00 60                     ld      (6000h), a
2935  116E 32 00 60                     ld      (6000h), a
2936  1171 32 00 60                     ld      (6000h), a
2937  1174 32 00 60                     ld      (6000h), a
2938  1177 32 00 60                     ld      (6000h), a
2939  117A 3E 01                        ld      a, 1
2940  117C 32 00 60                     ld      (6000h), a
2941  117F 32 00 60                     ld      (6000h), a
2942  1182 F1                           pop     af
2943  1183 32 11 80                     ld      (8011h), a      ; write to PSG (68k address C00011)
2944  1186 F5                           push    af
2945  1187 AF                           xor     a               ; switch to Bank 010000
2946  1188 32 00 60                     ld      (6000h), a      ; Bank bits written: 002h
2947  118B 3E 01                        ld      a, 1
2948  118D 32 00 60                     ld      (6000h), a
2949  1190 AF                           xor     a
2950  1191 32 00 60                     ld      (6000h), a
2951  1194 32 00 60                     ld      (6000h), a
2952  1197 32 00 60                     ld      (6000h), a
2953  119A 32 00 60                     ld      (6000h), a
2954  119D 32 00 60                     ld      (6000h), a
2955  11A0 32 00 60                     ld      (6000h), a
2956  11A3 32 00 60                     ld      (6000h), a
2957  11A6 F1                           pop     af
2958  11A7 C9                           ret
2959  11A8              ; End of function WritePSG
2960  11A8
2961  11A8
2962  11A8              ; =============== S U B R O U T I N E =======================================
2963  11A8
2964  11A8
2965  11A8              ReadPtrTable_BC:                        ; CODE XREF: PlaySoundID+49↑p
2966  11A8                                                      ; PlaySoundID+54↑p ...
2967  11A8 87                           add     a, a
2968  11A9 06 00                        ld      b, 0
2969  11AB 4F                           ld      c, a
2970  11AC 09                           add     hl, bc
2971  11AD 4E                           ld      c, (hl)
2972  11AE 23                           inc     hl
2973  11AF 46                           ld      b, (hl)
2974  11B0 C9                           ret
2975  11B1              ; End of function ReadPtrTable_BC
2976  11B1
2977  11B1
2978  11B1              ; =============== S U B R O U T I N E =======================================
2979  11B1
2980  11B1
2981  11B1              WaitForYM:                              ; CODE XREF: WriteFMI+5↑p
2982  11B1                                                      ; WriteFMIIMain+A↑p
2983  11B1 E5                           push    hl
2984  11B2 E1                           pop     hl
2985  11B3 C9                           ret
2986  11B4              ; End of function WaitForYM
2987  11B4
2988  11B4              ; ---------------------------------------------------------------------------
2989  11B4
2990  11B4              PlayDACVoice:                           ; DATA XREF: RAM:CmdPtrTable↓o
2991  11B4 21 F3 11                     ld      hl, DacSoundData
2992  11B7 01 68 02                     ld      bc, 268h
2993  11BA 3E 40                        ld      a, 40h
2994  11BC 32 0F 1D                     ld      ($1D0F), a
2995  11BF F5                           push    af
2996  11C0 C5                           push    bc
2997  11C1 CD E2 0C                     call    SilenceFMNotes
2998  11C4 C1                           pop     bc
2999  11C5 F1                           pop     af
3000  11C6 C5                           push    bc
3001  11C7 3E 80                        ld      a, 80h
3002  11C9 0E 2B                        ld      c, 2Bh
3003  11CB CD D8 0D                     call    WriteFMIMain
3004  11CE C1                           pop     bc
3005  11CF 3A 0F 1D                     ld      a, ($1D0F)
3006  11D2
3007  11D2              loc_11D2:                               ; CODE XREF: RAM:11E7↓j
3008  11D2 C5                           push    bc
3009  11D3 47                           ld      b, a
3010  11D4
3011  11D4              loc_11D4:                               ; CODE XREF: RAM:loc_11D4↓j
3012  11D4 10 FE                        djnz    $
3013  11D6 C1                           pop     bc
3014  11D7 F5                           push    af
3015  11D8 C5                           push    bc
3016  11D9 7E                           ld      a, (hl)
3017  11DA 0E 2A                        ld      c, 2Ah
3018  11DC CD D8 0D                     call    WriteFMIMain
3019  11DF C1                           pop     bc
3020  11E0 23                           inc     hl
3021  11E1 0B                           dec     bc
3022  11E2 78                           ld      a, b
3023  11E3 B1                           or      c
3024  11E4 28 03                        jr      z, loc_11E9
3025  11E6 F1                           pop     af
3026  11E7 18 E9                        jr      loc_11D2
3027  11E9              ; ---------------------------------------------------------------------------
3028  11E9
3029  11E9              loc_11E9:                               ; CODE XREF: RAM:11E4↑j
3030  11E9 F1                           pop     af
3031  11EA AF                           xor     a
3032  11EB 0E 2B                        ld      c, 2Bh
3033  11ED CD D8 0D                     call    WriteFMIMain
3034  11F0 C3 5D 11                     jp      ClearSoundID
3035  11F3              ; ---------------------------------------------------------------------------
3036  11F3 7B 7A 7C 82  DacSoundData:   db 7Bh, 7Ah, 7Ch, 82h, 82h, 7Fh, 7Dh, 7Fh, 75h, 73h, 7Bh
3036  11F7 82 7F 7D 7F
3036  11FB 75 73 7B
3037  11FE                                                      ; DATA XREF: RAM:PlayDACVoice↑o
3038  11FE 7A 7D 87 84                  db 7Ah, 7Dh, 87h, 84h, 7Eh, 7Eh, 7Fh, 6Ch, 70h, 7Ch, 7Bh
3038  1202 7E 7E 7F 6C
3038  1206 70 7C 7B
3039  1209 81 8C 86 7B                  db 81h, 8Ch, 86h, 7Bh, 7Fh, 79h, 64h, 71h, 7Fh, 7Dh, 87h
3039  120D 7F 79 64 71
3039  1211 7F 7D 87
3040  1214 91 84 78 80                  db 91h, 84h, 78h, 80h, 73h, 5Fh, 74h, 81h, 7Fh, 8Ch, 93h
3040  1218 73 5F 74 81
3040  121C 7F 8C 93
3041  121F 7F 77 7E 6B                  db 7Fh, 77h, 7Eh, 6Bh, 5Eh, 7Ah, 82h, 80h, 92h, 95h, 76h
3041  1223 5E 7A 82 80
3041  1227 92 95 76
3042  122A 75 7A 5B 5B                  db 75h, 7Ah, 5Bh, 5Bh, 83h, 88h, 87h, 9Bh, 93h, 71h, 74h
3042  122E 83 88 87 9B
3042  1232 93 71 74
3043  1235 70 54 69 8E                  db 70h, 54h, 69h, 8Eh, 8Eh, 90h, 9Dh, 86h, 6Bh, 6Dh, 58h
3043  1239 8E 90 9D 86
3043  123D 6B 6D 58
3044  1240 55 7D 99 96                  db 55h, 7Dh, 99h, 96h, 9Bh, 95h, 77h, 5Eh, 55h, 52h, 70h
3044  1244 9B 95 77 5E
3044  1248 55 52 70
3045  124B 90 A3 A1 97                  db 90h, 0A3h, 0A1h, 97h, 80h, 5Fh, 4Ch, 4Eh, 6Ch, 8Bh
3045  124F 80 5F 4C 4E
3045  1253 6C 8B
3046  1255 A4 AF A0 7E                  db 0A4h, 0AFh, 0A0h, 7Eh, 5Dh, 46h, 43h, 69h, 92h, 0ADh
3046  1259 5D 46 43 69
3046  125D 92 AD
3047  125F B6 A6 7B 50                  db 0B6h, 0A6h, 7Bh, 50h, 3Ah, 43h, 69h, 9Bh, 0BDh, 0BDh
3047  1263 3A 43 69 9B
3047  1267 BD BD
3048  1269 A5 72 41 2C                  db 0A5h, 72h, 41h, 2Ch, 40h, 74h, 0A9h, 0C6h, 0C1h, 9Eh
3048  126D 40 74 A9 C6
3048  1271 C1 9E
3049  1273 5E 2F 25 46                  db 5Eh, 2Fh, 25h, 46h, 87h, 0C1h, 0D7h, 0C2h, 8Ch, 4Ah
3049  1277 87 C1 D7 C2
3049  127B 8C 4A
3050  127D 1E 24 5D 9E                  db 1Eh, 24h, 5Dh, 9Eh, 0CCh, 0D6h, 0BAh, 70h, 29h, 16h
3050  1281 CC D6 BA 70
3050  1285 29 16
3051  1287 35 78 C4 E3                  db 35h, 78h, 0C4h, 0E3h, 0CFh, 95h, 48h, 15h, 19h, 4Eh
3051  128B CF 95 48 15
3051  128F 19 4E
3052  1291 9B D7 E3 C1                  db 9Bh, 0D7h, 0E3h, 0C1h, 70h, 23h, 0Fh, 2Dh, 74h, 0C9h
3052  1295 70 23 0F 2D
3052  1299 74 C9
3053  129B F1 D9 97 3D                  db 0F1h, 0D9h, 97h, 3Dh, 9, 16h, 50h, 0B1h, 0EDh, 0E6h
3053  129F 09 16 50 B1
3053  12A3 ED E6
3054  12A5 B5 56 0E 0B                  db 0B5h, 56h, 0Eh, 0Bh, 3Dh, 8Eh, 0D9h, 0F1h, 0CEh, 7Ch
3054  12A9 3D 8E D9 F1
3054  12AD CE 7C
3055  12AF 23 0C 29 6F                  db 23h, 0Ch, 29h, 6Fh, 0CBh, 0F7h, 0D6h, 83h, 33h, 14h
3055  12B3 CB F7 D6 83
3055  12B7 33 14
3056  12B9 27 61 C2 F2                  db 27h, 61h, 0C2h, 0F2h, 0CCh, 7Fh, 3Fh, 1Fh, 2Eh, 6Ch
3056  12BD CC 7F 3F 1F
3056  12C1 2E 6C
3057  12C3 C3 E3 B0 67                  db 0C3h, 0E3h, 0B0h, 67h, 3Dh, 2Fh, 45h, 89h, 0D0h, 0D2h
3057  12C7 3D 2F 45 89
3057  12CB D0 D2
3058  12CD 92 54 39 36                  db 92h, 54h, 39h, 36h, 57h, 0A7h, 0DDh, 0CBh, 88h, 4Ch
3058  12D1 57 A7 DD CB
3058  12D5 88 4C
3059  12D7 25 23 63 C2                  db 25h, 23h, 63h, 0C2h, 0E9h, 0CEh, 8Eh, 40h, 0Ah, 14h
3059  12DB E9 CE 8E 40
3059  12DF 0A 14
3060  12E1 57 B8 EB E1                  db 57h, 0B8h, 0EBh, 0E1h, 0A4h, 45h, 10h, 17h, 47h, 0A5h
3060  12E5 A4 45 10 17
3060  12E9 47 A5
3061  12EB F4 F0 AF 5C                  db 0F4h, 0F0h, 0AFh, 5Ch, 22h, 17h, 3Fh, 95h, 0E7h, 0DCh
3061  12EF 22 17 3F 95
3061  12F3 E7 DC
3062  12F5 99 5D 34 2B                  db 99h, 5Dh, 34h, 2Bh, 5Ah, 0BBh, 0CFh, 81h, 4Ch, 54h
3062  12F9 5A BB CF 81
3062  12FD 4C 54
3063  12FF 5B 82 CC DA                  db 5Bh, 82h, 0CCh, 0DAh, 88h, 21h, 11h, 39h, 7Ah, 0D7h
3063  1303 88 21 11 39
3063  1307 7A D7
3064  1309 FF DE 80 20                  db 0FFh, 0DEh, 80h, 20h, 0, 14h, 5Ah, 0D1h, 0FFh, 0E0h
3064  130D 00 14 5A D1
3064  1311 FF E0
3065  1313 A5 4B 03 00                  db 0A5h, 4Bh, 3, 0, 1Fh, 73h, 0DBh, 0F9h, 0D8h, 0A5h, 4Dh
3065  1317 1F 73 DB F9
3065  131B D8 A5 4D
3066  131E 0C 0F 31 73                  db 0Ch, 0Fh, 31h, 73h, 0D1h, 0FBh, 0E2h, 0B1h, 61h, 1Eh
3066  1322 D1 FB E2 B1
3066  1326 61 1E
3067  1328 0F 27 67 C0                  db 0Fh, 27h, 67h, 0C0h, 0EFh, 0E7h, 0BEh, 67h, 1Fh, 0Dh
3067  132C EF E7 BE 67
3067  1330 1F 0D
3068  1332 1C 52 BC FA                  db 1Ch, 52h, 0BCh, 0FAh, 0ECh, 0BBh, 68h, 17h, 3, 1Ah
3068  1336 EC BB 68 17
3068  133A 03 1A
3069  133C 56 C1 FD EB                  db 56h, 0C1h, 0FDh, 0EBh, 0B9h, 67h, 1Bh, 0Dh, 1Fh, 54h
3069  1340 B9 67 1B 0D
3069  1344 1F 54
3070  1346 B7 F7 E7 BA                  db 0B7h, 0F7h, 0E7h, 0BAh, 77h, 27h, 11h, 1Dh, 47h, 9Ch
3070  134A 77 27 11 1D
3070  134E 47 9C
3071  1350 EB EC C5 8B                  db 0EBh, 0ECh, 0C5h, 8Bh, 3Ch, 1Ah, 1Ah, 38h, 89h, 0DAh
3071  1354 3C 1A 1A 38
3071  1358 89 DA
3072  135A E9 CB 9C 4E                  db 0E9h, 0CBh, 9Ch, 4Eh, 1Eh, 1Ah, 2Dh, 65h, 0C6h, 0E9h
3072  135E 1E 1A 2D 65
3072  1362 C6 E9
3073  1364 D4 B5 73 31                  db 0D4h, 0B5h, 73h, 31h, 1Ah, 1Ch, 43h, 99h, 0E5h, 0EEh
3073  1368 1A 1C 43 99
3073  136C E5 EE
3074  136E CC 8A 3B 17                  db 0CCh, 8Ah, 3Bh, 17h, 15h, 34h, 88h, 0E0h, 0F3h, 0CFh
3074  1372 15 34 88 E0
3074  1376 F3 CF
3075  1378 97 47 19 18                  db 97h, 47h, 19h, 18h, 31h, 70h, 0CFh, 0F0h, 0D1h, 0A1h
3075  137C 31 70 CF F0
3075  1380 D1 A1
3076  1382 5E 2E 29 2D                  db 5Eh, 2Eh, 29h, 2Dh, 50h, 0A0h, 0DDh, 0D5h, 0B9h, 91h
3076  1386 50 A0 DD D5
3076  138A B9 91
3077  138C 4E 28 26 36                  db 4Eh, 28h, 26h, 36h, 69h, 0BCh, 0E2h, 0CFh, 0ABh, 77h
3077  1390 69 BC E2 CF
3077  1394 AB 77
3078  1396 3F 2A 25 41                  db 3Fh, 2Ah, 25h, 41h, 8Ah, 0D4h, 0DEh, 0C8h, 9Ch, 57h
3078  139A 8A D4 DE C8
3078  139E 9C 57
3079  13A0 25 1E 2A 5B                  db 25h, 1Eh, 2Ah, 5Bh, 0BBh, 0E9h, 0D3h, 0ADh, 7Ah, 36h
3079  13A4 BB E9 D3 AD
3079  13A8 7A 36
3080  13AA 20 27 42 89                  db 20h, 27h, 42h, 89h, 0D5h, 0E2h, 0C2h, 98h, 61h, 32h
3080  13AE D5 E2 C2 98
3080  13B2 61 32
3081  13B4 2B 32 57 A6                  db 2Bh, 32h, 57h, 0A6h, 0D9h, 0CEh, 0AFh, 91h, 59h, 33h
3081  13B8 D9 CE AF 91
3081  13BC 59 33
3082  13BE 2F 37 5F AE                  db 2Fh, 37h, 5Fh, 0AEh, 0D9h, 0C9h, 0ACh, 86h, 4Dh, 33h
3082  13C2 D9 C9 AC 86
3082  13C6 4D 33
3083  13C8 31 36 63 B9                  db 31h, 36h, 63h, 0B9h, 0DEh, 0CDh, 0B2h, 8Ah, 44h, 23h
3083  13CC DE CD B2 8A
3083  13D0 44 23
3084  13D2 27 3A 74 CC                  db 27h, 3Ah, 74h, 0CCh, 0E9h, 0C5h, 9Dh, 71h, 38h, 26h
3084  13D6 E9 C5 9D 71
3084  13DA 38 26
3085  13DC 31 48 89 CE                  db 31h, 48h, 89h, 0CEh, 0D9h, 0BAh, 97h, 6Dh, 40h, 37h
3085  13E0 D9 BA 97 6D
3085  13E4 40 37
3086  13E6 3D 49 89 CD                  db 3Dh, 49h, 89h, 0CDh, 0D1h, 0B3h, 97h, 73h, 45h, 41h
3086  13EA D1 B3 97 73
3086  13EE 45 41
3087  13F0 43 40 6F BD                  db 43h, 40h, 6Fh, 0BDh, 0D4h, 0B4h, 9Ah, 7Ch, 4Ch, 43h
3087  13F4 D4 B4 9A 7C
3087  13F8 4C 43
3088  13FA 49 40 5A AC                  db 49h, 40h, 5Ah, 0ACh, 0D4h, 0BEh, 0A0h, 88h, 5Ah, 41h
3088  13FE D4 BE A0 88
3088  1402 5A 41
3089  1404 46 3E 4F 9B                  db 46h, 3Eh, 4Fh, 9Bh, 0DAh, 0CBh, 9Ch, 87h, 68h, 48h
3089  1408 DA CB 9C 87
3089  140C 68 48
3090  140E 48 45 45 7C                  db 48h, 45h, 45h, 7Ch, 0C8h, 0D2h, 0A6h, 8Dh, 7Bh, 56h
3090  1412 C8 D2 A6 8D
3090  1416 7B 56
3091  1418 4E 50 43 58                  db 4Eh, 50h, 43h, 58h, 0A9h, 0D3h, 0B5h, 92h, 86h, 60h
3091  141C A9 D3 B5 92
3091  1420 86 60
3092  1422 49 55 4C 44                  db 49h, 55h, 4Ch, 44h, 80h, 0CEh, 0C9h, 99h, 8Fh, 7Fh
3092  1426 80 CE C9 99
3092  142A 8F 7F
3093  142C 52 4D 5D 4A                  db 52h, 4Dh, 5Dh, 4Ah, 4Eh, 9Bh, 0D4h, 0B6h, 8Dh, 8Eh
3093  1430 4E 9B D4 B6
3093  1434 8D 8E
3094  1436 73 4A 58 61                  db 73h, 4Ah, 58h, 61h, 47h, 58h, 0B1h, 0D2h, 9Fh, 87h
3094  143A 47 58 B1 D2
3094  143E 9F 87
3095  1440 89 63 4E 69                  db 89h, 63h, 4Eh, 69h, 65h, 42h, 63h, 0BBh, 0C4h, 8Fh
3095  1444 65 42 63 BB
3095  1448 C4 8F
3096  144A 88 8B 62 56                  db 88h, 8Bh, 62h, 56h, 76h, 64h, 3Dh, 60h, 0B5h, 0B9h
3096  144E 76 64 3D 60
3096  1452 B5 B9
3097  1454 8F 8F 91 67                  db 8Fh, 8Fh, 91h, 67h, 5Dh, 80h, 80h
3097  1458 5D 80 80
3098  145B FF                           db 0FFh
3099  145C 80 80 80 80  SndPriorities:  db 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h
3099  1460 80 80 80 80
3099  1464 80 80 80
3100  1467                                                      ; DATA XREF: DoOneSndQueue+6↑o
3101  1467 80 80 80 80                  db 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h
3101  146B 80 80 80 80
3101  146F 80 80 80
3102  1472 80 80 80 80                  db 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h, 00h, 10h
3102  1476 80 80 80 80
3102  147A 80 00 10
3103  147D 10 20 00 20                  db 10h, 20h, 00h, 20h, 20h, 40h, 60h, 50h, 70h, 50h, 50h
3103  1481 20 40 60 50
3103  1485 70 50 50
3104  1488 10 40 70 70                  db 10h, 40h, 70h, 70h, 60h, 40h, 40h, 40h, 70h, 60h, 40h
3104  148C 60 40 40 40
3104  1490 70 60 40
3105  1493 40 70 40 60                  db 40h, 70h, 40h, 60h, 70h, 30h, 50h, 70h, 70h, 70h, 68h
3105  1497 70 30 50 70
3105  149B 70 70 68
3106  149E 80 80 80 80                  db 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h
3106  14A2 80 80 80 80
3106  14A6 80 80 80
3107  14A9 80 80 80 80                  db 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h
3107  14AD 80 80 80 80
3107  14B1 80 80 80
3108  14B4 80 80 80 80                  db 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h, 80h
3108  14B8 80 80 80 80
3108  14BC 80 80 80
3109  14BF 80                           db 80h
3110  14C0 00 00 03 00  MusicTempoList: db 0, 0, 3, 0, 0, 0, 3, 3, 5, 0, 0, 0, 0, 3, 0
3110  14C4 00 00 03 03
3110  14C8 05 00 00 00
3110  14CC 00 03 00
3111  14CF                                                      ; DATA XREF: PlaySoundID+36↑o
3112  14CF D5 15 84 15  SpcSFXPtrs:     dw $15D5, $1584, $1644, $1599
3112  14D3 44 16 99 15
3113  14D7                                                      ; DATA XREF: PlaySoundID:PlaySpcSFX↑o
3114  14D7 46 15 46 15  SFXPtrs:        dw $1546, $1546, $1546, $1546, $1546
3114  14DB 46 15 46 15
3114  14DF 46 15
3115  14E1                                                      ; DATA XREF: PlaySoundID+8E↑o
3116  14E1 46 15 46 15                  dw $1546, $1546, $1546, $1546, $1546
3116  14E5 46 15 46 15
3116  14E9 46 15
3117  14EB 46 15 46 15                  dw $1546, $1546, $1546, $1584, $1599
3117  14EF 46 15 84 15
3117  14F3 99 15
3118  14F5 AF 15 D5 15                  dw $15AF, $15D5, $15EC, $160E, $1623
3118  14F9 EC 15 0E 16
3118  14FD 23 16
3119  14FF 44 16 7B 16                  dw $1644, $167B, $169A, $16B2, $16CE
3119  1503 9A 16 B2 16
3119  1507 CE 16
3120  1509 FD 16 18 17                  dw $16FD, $1718, $1744, $175C, $1776
3120  150D 44 17 5C 17
3120  1511 76 17
3121  1513 8B 17 A9 17                  dw $178B, $17A9, $17D7, $180C, $185B
3121  1517 D7 17 0C 18
3121  151B 5B 18
3122  151D 78 18 9A 18                  dw $1878, $189A, $18CF, $18F5, $190C
3122  1521 CF 18 F5 18
3122  1525 0C 19
3123  1527 2D 19 57 19                  dw $192D, $1957, $1A0C, $1A49, $1A6F
3123  152B 0C 1A 49 1A
3123  152F 6F 1A
3124  1531 B6 1A EA 1A                  dw $1AB6, $1AEA, $1B2E, $1BC8, $1C1B
3124  1535 2E 1B C8 1B
3124  1539 1B 1C
3125  153B 9D 1C                        dw $1C9D
3126  153D B4 01 B4 11  CmdPtrTable:    dw FadeOutMusic, PlayDACVoice, StopAllSound, SilencePSG
3126  1541 C1 0C F4 0C
3127  1545                                                      ; DATA XREF: PlaySoundID+22↑o
3128  1545 FF                           db 0FFh
3129  1546 03 80 02 01    		        db 3, 80h, 2, 1, 62h, 15h, 0, 0, 0, 0, 80h, 5, 1, 6Fh
3129  154A 62 15 00 00
3129  154E 00 00 80 05
3129  1552 01 6F
3130  1554                                                      ; DATA XREF: RAM:SFXPtrs↑o
3131  1554 15 00 00 00                  db 15h, 0, 0, 0, 0, 80h, 6, 1, 79h, 15h, 0, 0, 0, 0, 0FEh
3131  1558 00 80 06 01
3131  155C 79 15 00 00
3131  1560 00 00 FE
3132  1563 00 00 00 00                  db 0, 0, 0, 0, 0EFh, 33h, 0F8h, 0ACh, 1Ah, 80h, 12h, 0F2h
3132  1567 EF 33 F8 AC
3132  156B 1A 80 12 F2
3133  156F EF 33 80 04                  db 0EFh, 33h, 80h, 4, 0F8h, 0ACh, 1Ah, 80h, 0Ah, 0F2h
3133  1573 F8 AC 1A 80
3133  1577 0A F2
3134  1579 EF 33 80 08                  db 0EFh, 33h, 80h, 8, 0F8h, 0ACh, 1Ah, 0E5h, 80h, 2, 0F2h
3134  157D F8 AC 1A E5
3134  1581 80 02 F2
3135  1584 01 A0 06 01    		        db 1, 0A0h, 6, 1, 8Eh, 15h, 0, 0, 0, 0, 0EFh, 1, 81h, 0F1h
3135  1588 8E 15 00 00
3135  158C 00 00 EF 01
3135  1590 81 F1
3136  1592                                                      ; DATA XREF: RAM:SpcSFXPtrs↑o
3137  1592                                                      ; RAM:SFXPtrs↑o
3138  1592 0A 08 80 00                  db 0Ah, 8, 80h, 0, 0, 20h, 0F2h
3138  1596 00 20 F2
3139  1599 02 80 05 01    		        db 2, 80h, 5, 1, 0ACh, 15h, 0, 0, 0, 0, 80h, 6, 1, 0ACh
3139  159D AC 15 00 00
3139  15A1 00 00 80 06
3139  15A5 01 AC
3140  15A7                                                      ; DATA XREF: RAM:SpcSFXPtrs↑o
3141  15A7                                                      ; RAM:SFXPtrs↑o
3142  15A7 15 00 00 00                  db 15h, 0, 0, 0, 0, 0EFh, 0Dh, 0F2h
3142  15AB 00 EF 0D F2
3143  15AF 03 80 02 01    		        db 3, 80h, 2, 1, 0CBh, 15h, 0, 0, 0, 0, 80h, 5, 1, 0D0h
3143  15B3 CB 15 00 00
3143  15B7 00 00 80 05
3143  15BB 01 D0
3144  15BD                                                      ; DATA XREF: RAM:SFXPtrs↑o
3145  15BD 15 00 00 00                  db 15h, 0, 0, 0, 0, 80h, 6, 1, 0D0h, 15h, 0, 0, 0, 0, 0FEh
3145  15C1 00 80 06 01
3145  15C5 D0 15 00 00
3145  15C9 00 00 FE
3146  15CC 00 00 00 00                  db 0, 0, 0, 0, 0EFh, 0, 80h, 0Ah, 0F2h
3146  15D0 EF 00 80 0A
3146  15D4 F2
3147  15D5 01 A0 06 01    		        db 1, 0A0h, 6, 1, 0DFh, 15h, 0, 0, 0, 0, 0EFh, 1, 81h
3147  15D9 DF 15 00 00
3147  15DD 00 00 EF 01
3147  15E1 81
3148  15E2                                                      ; DATA XREF: RAM:SpcSFXPtrs↑o
3149  15E2                                                      ; RAM:SFXPtrs↑o
3150  15E2 F1 0A 08 80                  db 0F1h, 0Ah, 8, 80h, 0, 0, 20h, 0F6h, 0E1h, 15h
3150  15E6 00 00 20 F6
3150  15EA E1 15
3151  15EC 02 80 05 01    		        db 2, 80h, 5, 1, 0FFh, 15h, 4, 0, 0, 0, 80h, 6, 1, 0FFh
3151  15F0 FF 15 04 00
3151  15F4 00 00 80 06
3151  15F8 01 FF
3152  15FA                                                      ; DATA XREF: RAM:SFXPtrs↑o
3153  15FA 15 05 00 00                  db 15h, 5, 0, 0, 0, 0EFh, 3, 0A4h, 1, 88h, 2, 0EEh, 1
3153  15FE 00 EF 03 A4
3153  1602 01 88 02 EE
3153  1606 01
3154  1607 8E 03 EE 00                  db 8Eh, 3, 0EEh, 0, 80h, 8, 0F2h
3154  160B 80 08 F2
3155  160E 01 A0 06 01    		        db 1, 0A0h, 6, 1, 18h, 16h, 0, 0, 0, 0, 0EFh, 2, 0A8h
3155  1612 18 16 00 00
3155  1616 00 00 EF 02
3155  161A A8
3156  161B                                                      ; DATA XREF: RAM:SFXPtrs↑o
3157  161B 96 8E 06 80                  db 96h, 8Eh, 6, 80h, 0, 0, 8, 0F2h
3157  161F 00 00 08 F2
3158  1623 01 A0 06 01    		        db 1, 0A0h, 6, 1, 2Dh, 16h, 10h, 0, 0, 0, 0EFh, 0Ch, 88h
3158  1627 2D 16 10 00
3158  162B 00 00 EF 0C
3158  162F 88
3159  1630                                                      ; DATA XREF: RAM:SFXPtrs↑o
3160  1630 C7 53 02 EE                  db 0C7h, 53h, 2, 0EEh, 1, 0A7h, 3Dh, 57h, 2, 90h, 0AEh
3160  1634 01 A7 3D 57
3160  1638 02 90 AE
3161  163B 97 01 EE 00                  db 97h, 1, 0EEh, 0, 80h, 0, 0, 8, 0F2h
3161  163F 80 00 00 08
3161  1643 F2
3162  1644 02 A0 05 01    		        db 2, 0A0h, 5, 1, 57h, 16h, 0, 0, 0, 0, 0A0h, 6, 1, 6Eh
3162  1648 57 16 00 00
3162  164C 00 00 A0 06
3162  1650 01 6E
3163  1652                                                      ; DATA XREF: RAM:SpcSFXPtrs↑o
3164  1652                                                      ; RAM:SFXPtrs↑o
3165  1652 16 00 00 00                  db 16h, 0, 0, 0, 0, 0EFh, 0Dh, 90h, 0F7h, 21h, 20h, 0EEh
3165  1656 00 EF 0D 90
3165  165A F7 21 20 EE
3166  165E 01 A4 00 FE                  db 1, 0A4h, 0, 0FEh, 18h, 0A3h, 0, 0FDh, 14h, 0A2h, 0
3166  1662 18 A3 00 FD
3166  1666 14 A2 00
3167  1669 01 30 F6 5D                  db 1, 30h, 0F6h, 5Dh, 16h, 0EFh, 0Dh, 80h, 0, 0, 8, 90h
3167  166D 16 EF 0D 80
3167  1671 00 00 08 90
3168  1675 F7 21 20 F6                  db 0F7h, 21h, 20h, 0F6h, 5Dh, 16h
3168  1679 5D 16
3169  167B 01 A0 06 01    		        db 1, 0A0h, 6, 1, 85h, 16h, 0, 0, 0, 0, 0EFh, 0Fh, 94h
3169  167F 85 16 00 00
3169  1683 00 00 EF 0F
3169  1687 94
3170  1688                                                      ; DATA XREF: RAM:SFXPtrs↑o
3171  1688 00 00 02 87                  db 0, 0, 2, 87h, 9Fh, 9Fh, 4, 0EEh, 1, 90h, 54h, 72h, 4
3171  168C 9F 9F 04 EE
3171  1690 01 90 54 72
3171  1694 04
3172  1695 80 00 00 20                  db 80h, 0, 0, 20h, 0F2h
3172  1699 F2
3173  169A 01 80 06 01    		        db 1, 80h, 6, 1, 0A4h, 16h, 0, 0, 0, 0, 0EFh, 10h, 81h
3173  169E A4 16 00 00
3173  16A2 00 00 EF 10
3173  16A6 81
3174  16A7                                                      ; DATA XREF: RAM:SFXPtrs↑o
3175  16A7 01 EE 01 90                  db 1, 0EEh, 1, 90h, 0A0h, 0B0h, 0EEh, 0, 80h, 10h, 0F2h
3175  16AB A0 B0 EE 00
3175  16AF 80 10 F2
3176  16B2 01 80 02 01    		        db 1, 80h, 2, 1, 0BCh, 16h, 0, 0, 0, 0, 0FEh, 3, 3, 0
3176  16B6 BC 16 00 00
3176  16BA 00 00 FE 03
3176  16BE 03 00
3177  16C0                                                      ; DATA XREF: RAM:SFXPtrs↑o
3178  16C0 00 EF 11 9C                  db 0, 0EFh, 11h, 9Ch, 2, 81h, 2, 80h, 1, 9Ch, 4, 80h, 20h
3178  16C4 02 81 02 80
3178  16C8 01 9C 04 80
3178  16CC 20
3179  16CD F2                           db 0F2h
3180  16CE 01 A0 02 01    		        db 1, 0A0h, 2, 1, 0D8h, 16h, 0, 0, 0, 0, 0FEh, 3, 3, 0
3180  16D2 D8 16 00 00
3180  16D6 00 00 FE 03
3180  16DA 03 00
3181  16DC                                                      ; DATA XREF: RAM:SFXPtrs↑o
3182  16DC 00 EF 09 A0                  db 0, 0EFh, 9, 0A0h, 0, 0, 4, 0EEh, 1, 0A0h, 0E7h, 0ADh
3182  16E0 00 00 04 EE
3182  16E4 01 A0 E7 AD
3183  16E8 03 A6 28 DD                  db 3, 0A6h, 28h, 0DDh, 2, 0FBh, 1, 0F7h, 0, 10h, 0E5h
3183  16EC 02 FB 01 F7
3183  16F0 00 10 E5
3184  16F3 16 FB F0 EE                  db 16h, 0FBh, 0F0h, 0EEh, 0, 80h, 0, 0, 40h, 0F2h
3184  16F7 00 80 00 00
3184  16FB 40 F2
3185  16FD 01 80 02 01    		        db 1, 80h, 2, 1, 7, 17h, 0, 0, 0, 0, 0FEh, 3, 3, 0, 0
3185  1701 07 17 00 00
3185  1705 00 00 FE 03
3185  1709 03 00 00
3186  170C                                                      ; DATA XREF: RAM:SFXPtrs↑o
3187  170C EF 13 B0 04                  db 0EFh, 13h, 0B0h, 4, 0F7h, 0, 0Fh, 0Eh, 17h, 80h, 40h
3187  1710 F7 00 0F 0E
3187  1714 17 80 40
3188  1717 F2                           db 0F2h
3189  1718 03 A0 02 01    		        db 3, 0A0h, 2, 1, 34h, 17h, 0, 0, 0, 0, 0A0h, 5, 1, 39h
3189  171C 34 17 00 00
3189  1720 00 00 A0 05
3189  1724 01 39
3190  1726                                                      ; DATA XREF: RAM:SFXPtrs↑o
3191  1726 17 00 00 00                  db 17h, 0, 0, 0, 0, 0A0h, 5, 1, 39h, 17h, 0, 0, 0, 0, 0FEh
3191  172A 00 A0 05 01
3191  172E 39 17 00 00
3191  1732 00 00 FE
3192  1735 03 03 00 00                  db 3, 3, 0, 0, 0EFh, 15h, 84h, 1, 0, 30h, 80h, 0, 0, 40h
3192  1739 EF 15 84 01
3192  173D 00 30 80 00
3192  1741 00 40
3193  1743 F2                           db 0F2h
3194  1744 01 80 02 01    		        db 1, 80h, 2, 1, 4Eh, 17h, 0F8h, 0, 0, 0, 0FEh, 0, 3, 3
3194  1748 4E 17 F8 00
3194  174C 00 00 FE 00
3194  1750 03 03
3195  1752                                                      ; DATA XREF: RAM:SFXPtrs↑o
3196  1752 00 EF 16 98                  db 0, 0EFh, 16h, 98h, 1, 8Ch, 1, 90h, 4, 0F2h
3196  1756 01 8C 01 90
3196  175A 04 F2
3197  175C 01 A0 02 01    		        db 1, 0A0h, 2, 1, 66h, 17h, 0, 0, 0, 0, 0FEh, 0, 0, 3
3197  1760 66 17 00 00
3197  1764 00 00 FE 00
3197  1768 00 03
3198  176A                                                      ; DATA XREF: RAM:SFXPtrs↑o
3199  176A 00 EF 17 82                  db 0, 0EFh, 17h, 82h, 0CBh, 0A3h, 4, 80h, 0, 0, 40h, 0F2h
3199  176E CB A3 04 80
3199  1772 00 00 40 F2
3200  1776 01 80 06 01    		        db 1, 80h, 6, 1, 80h, 17h, 0, 0, 0, 0, 0EFh, 1Ah, 81h
3200  177A 80 17 00 00
3200  177E 00 00 EF 1A
3200  1782 81
3201  1783                                                      ; DATA XREF: RAM:SFXPtrs↑o
3202  1783 03 83 04 81                  db 3, 83h, 4, 81h, 3, 80h, 10h, 0F2h
3202  1787 03 80 10 F2
3203  178B 01 A0 02 01    		        db 1, 0A0h, 2, 1, 95h, 17h, 0, 0, 0, 0, 0FEh, 0, 3, 3
3203  178F 95 17 00 00
3203  1793 00 00 FE 00
3203  1797 03 03
3204  1799                                                      ; DATA XREF: RAM:SFXPtrs↑o
3205  1799 00 EF 1D A2                  db 0, 0EFh, 1Dh, 0A2h, 0ECh, 96h, 4, 0ABh, 0E9h, 0BFh
3205  179D EC 96 04 AB
3205  17A1 E9 BF
3206  17A3 04 80 00 00                  db 4, 80h, 0, 0, 40h, 0F2h
3206  17A7 40 F2
3207  17A9 03 80 02 01    		        db 3, 80h, 2, 1, 0C5h, 17h, 0, 0, 0, 0, 80h, 5, 1, 0CAh
3207  17AD C5 17 00 00
3207  17B1 00 00 80 05
3207  17B5 01 CA
3208  17B7                                                      ; DATA XREF: RAM:SFXPtrs↑o
3209  17B7 17 00 00 00                  db 17h, 0, 0, 0, 0, 80h, 6, 1, 0CAh, 17h, 0, 0, 0, 0, 0FEh
3209  17BB 00 80 06 01
3209  17BF CA 17 00 00
3209  17C3 00 00 FE
3210  17C6 00 00 00 01                  db 0, 0, 0, 1, 0EFh, 6, 0B0h, 60h, 0EEh, 1, 80h, 40h, 0EEh
3210  17CA EF 06 B0 60
3210  17CE EE 01 80 40
3210  17D2 EE
3211  17D3 00 80 40 F2                  db 0, 80h, 40h, 0F2h
3212  17D7 03 A0 02 01    		        db 3, 0A0h, 2, 1, 0F3h, 17h, 0, 0, 0, 8, 0A0h, 5, 1, 0F8h
3212  17DB F3 17 00 00
3212  17DF 00 08 A0 05
3212  17E3 01 F8
3213  17E5                                                      ; DATA XREF: RAM:SFXPtrs↑o
3214  17E5 17 00 00 00                  db 17h, 0, 0, 0, 8, 0A0h, 6, 1, 0F8h, 17h, 0, 0, 0, 8
3214  17E9 08 A0 06 01
3214  17ED F8 17 00 00
3214  17F1 00 08
3215  17F3 FE 00 00 03                  db 0FEh, 0, 0, 3, 0, 0EFh, 21h, 81h, 0F8h, 5, 8, 0EEh
3215  17F7 00 EF 21 81
3215  17FB F8 05 08 EE
3216  17FF 01 F7 00 20                  db 1, 0F7h, 0, 20h, 0FAh, 17h, 0EEh, 0, 80h, 0, 0, 1, 0F2h
3216  1803 FA 17 EE 00
3216  1807 80 00 00 01
3216  180B F2
3217  180C 02 A0 05 01    		        db 2, 0A0h, 5, 1, 1Fh, 18h, 3, 0, 0, 0, 0A0h, 6, 1, 3Ah
3217  1810 1F 18 03 00
3217  1814 00 00 A0 06
3217  1818 01 3A
3218  181A                                                      ; DATA XREF: RAM:SFXPtrs↑o
3219  181A 18 09 00 00                  db 18h, 9, 0, 0, 0, 0EFh, 29h, 8Dh, 0, 0, 3, 80h, 0, 0
3219  181E 00 EF 29 8D
3219  1822 00 00 03 80
3219  1826 00 00
3220  1828 01 8D 00 00                  db 1, 8Dh, 0, 0, 8, 0EEh, 1, 8Eh, 0D6h, 66h, 6, 0EEh, 0
3220  182C 08 EE 01 8E
3220  1830 D6 66 06 EE
3220  1834 00
3221  1835 80 00 00 20                  db 80h, 0, 0, 20h, 0F2h, 0EFh, 2Ah, 8Eh, 0, 0, 3, 80h
3221  1839 F2 EF 2A 8E
3221  183D 00 00 03 80
3222  1841 00 00 01 EF                  db 0, 0, 1, 0EFh, 29h, 80h, 0, 0, 4, 99h, 0, 0, 8, 0EEh
3222  1845 29 80 00 00
3222  1849 04 99 00 00
3222  184D 08 EE
3223  184F 01 99 EF 4E                  db 1, 99h, 0EFh, 4Eh, 8, 0EEh, 0, 80h, 0, 0, 38h, 0F2h
3223  1853 08 EE 00 80
3223  1857 00 00 38 F2
3224  185B 01 A0 06 01    		        db 1, 0A0h, 6, 1, 65h, 18h, 0, 0, 0, 0, 0EFh, 27h, 9Eh
3224  185F 65 18 00 00
3224  1863 00 00 EF 27
3224  1867 9E
3225  1868                                                      ; DATA XREF: RAM:SFXPtrs↑o
3226  1868 47 23 04 EE                  db 47h, 23h, 4, 0EEh, 1, 8Eh, 0, 0, 20h, 0EEh, 0, 80h
3226  186C 01 8E 00 00
3226  1870 20 EE 00 80
3227  1874 00 00 08 F2                  db 0, 0, 8, 0F2h
3228  1878 01 A0 06 01    		        db 1, 0A0h, 6, 1, 82h, 18h, 0, 0, 0, 0, 0EFh, 22h, 8Fh
3228  187C 82 18 00 00
3228  1880 00 00 EF 22
3228  1884 8F
3229  1885                                                      ; DATA XREF: RAM:SFXPtrs↑o
3230  1885 B4 CD 04 EE                  db 0B4h, 0CDh, 4, 0EEh, 1, 9Bh, 1Fh, 92h, 4, 0F7h, 0, 8
3230  1889 01 9B 1F 92
3230  188D 04 F7 00 08
3231  1891 84 18 EE 00                  db 84h, 18h, 0EEh, 0, 80h, 0, 0, 8, 0F2h
3231  1895 80 00 00 08
3231  1899 F2
3232  189A 03 A0 02 01    		        db 3, 0A0h, 2, 1, 0B6h, 18h, 0, 0, 0, 0, 0A0h, 5, 1, 0BBh
3232  189E B6 18 00 00
3232  18A2 00 00 A0 05
3232  18A6 01 BB
3233  18A8                                                      ; DATA XREF: RAM:SFXPtrs↑o
3234  18A8 18 00 00 00                  db 18h, 0, 0, 0, 0, 0A0h, 6, 1, 0BBh, 18h, 0, 0, 0, 0
3234  18AC 00 A0 06 01
3234  18B0 BB 18 00 00
3234  18B4 00 00
3235  18B6 FE 00 00 03                  db 0FEh, 0, 0, 3, 0, 0EFh, 26h, 0ABh, 0F8h, 91h, 8, 0EEh
3235  18BA 00 EF 26 AB
3235  18BE F8 91 08 EE
3236  18C2 01 F7 00 08                  db 1, 0F7h, 0, 8, 0BDh, 18h, 0EEh, 0, 80h, 0, 0, 8, 0F2h
3236  18C6 BD 18 EE 00
3236  18CA 80 00 00 08
3236  18CE F2
3237  18CF 01 A0 02 01    		        db 1, 0A0h, 2, 1, 0D9h, 18h, 0, 0, 0, 0, 0FEh, 0, 0, 3
3237  18D3 D9 18 00 00
3237  18D7 00 00 FE 00
3237  18DB 00 03
3238  18DD                                                      ; DATA XREF: RAM:SFXPtrs↑o
3239  18DD 00 EF 28 C5                  db 0, 0EFh, 28h, 0C5h, 22h, 0A1h, 2, 0EEh, 1, 0B4h, 0F5h
3239  18E1 22 A1 02 EE
3239  18E5 01 B4 F5
3240  18E8 1F 04 C5 00                  db 1Fh, 4, 0C5h, 0, 0, 1, 0EEh, 0, 80h, 0, 0, 20h, 0F2h
3240  18EC 00 01 EE 00
3240  18F0 80 00 00 20
3240  18F4 F2
3241  18F5 01 80 06 01    		        db 1, 80h, 6, 1, 0FFh, 18h, 0, 0, 0, 0, 0EFh, 2Bh, 94h
3241  18F9 FF 18 00 00
3241  18FD 00 00 EF 2B
3241  1901 94
3242  1902                                                      ; DATA XREF: RAM:SFXPtrs↑o
3243  1902 04 80 01 90                  db 4, 80h, 1, 90h, 1, 98h, 1, 80h, 4, 0F2h
3243  1906 01 98 01 80
3243  190A 04 F2
3244  190C 01 A0 06 01    		        db 1, 0A0h, 6, 1, 16h, 19h, 0, 0, 0, 0, 0EFh, 2Ch, 0C1h
3244  1910 16 19 00 00
3244  1914 00 00 EF 2C
3244  1918 C1
3245  1919                                                      ; DATA XREF: RAM:SFXPtrs↑o
3246  1919 DB 2D 04 EE                  db 0DBh, 2Dh, 4, 0EEh, 1, 88h, 0Bh, 0F4h, 10h, 84h, 23h
3246  191D 01 88 0B F4
3246  1921 10 84 23
3247  1924 E6 04 EE 00                  db 0E6h, 4, 0EEh, 0, 80h, 0, 0, 20h, 0F2h
3247  1928 80 00 00 20
3247  192C F2
3248  192D 02 80 05 01    		        db 2, 80h, 5, 1, 40h, 19h, 2, 0, 0, 0, 80h, 6, 1, 40h
3248  1931 40 19 02 00
3248  1935 00 00 80 06
3248  1939 01 40
3249  193B                                                      ; DATA XREF: RAM:SFXPtrs↑o
3250  193B 19 02 00 00                  db 19h, 2, 0, 0, 0, 0EFh, 2Dh, 0BCh, 1, 0FCh, 1, 9Ch, 38h
3250  193F 00 EF 2D BC
3250  1943 01 FC 01 9C
3250  1947 38
3251  1948 46 01 EE 01                  db 46h, 1, 0EEh, 1, 0A0h, 49h, 50h, 8, 0FCh, 0, 0EEh, 0
3251  194C A0 49 50 08
3251  1950 FC 00 EE 00
3252  1954 80 20 F2                     db 80h, 20h, 0F2h
3253  1957 03 80 02 01    		        db 3, 80h, 2, 1, 73h, 19h, 0, 0, 0, 3, 80h, 5, 1, 3, 1Ah
3253  195B 73 19 00 00
3253  195F 00 03 80 05
3253  1963 01 03 1A
3254  1966                                                      ; DATA XREF: RAM:SFXPtrs↑o
3255  1966 00 00 00 03                  db 0, 0, 0, 3, 80h, 6, 1, 78h, 19h, 0FFh, 0, 0, 3, 0FEh
3255  196A 80 06 01 78
3255  196E 19 FF 00 00
3255  1972 03 FE
3256  1974 03 03 00 00                  db 3, 3, 0, 0, 0EFh, 2Fh, 0FCh, 1, 0ABh, 15h, 0A8h, 10h
3256  1978 EF 2F FC 01
3256  197C AB 15 A8 10
3257  1980 EE 01 91 1E                  db 0EEh, 1, 91h, 1Eh, 0D4h, 10h, 91h, 10h, 0E4h, 4, 8Fh
3257  1984 D4 10 91 10
3257  1988 E4 04 8F
3258  198B 00 00 08 8F                  db 0, 0, 8, 8Fh, 0F0h, 1Ch, 4, 0F7h, 0, 2, 86h, 19h, 91h
3258  198F F0 1C 04 F7
3258  1993 00 02 86 19
3258  1997 91
3259  1998 F2 1F 04 93                  db 0F2h, 1Fh, 4, 93h, 0, 0, 8, 93h, 0Eh, 0E1h, 4, 92h
3259  199C 00 00 08 93
3259  19A0 0E E1 04 92
3260  19A4 F2 21 04 94                  db 0F2h, 21h, 4, 94h, 0, 0, 8, 94h, 0Eh, 0DFh, 4, 93h
3260  19A8 00 00 08 94
3260  19AC 0E DF 04 93
3261  19B0 F3 23 04 95                  db 0F3h, 23h, 4, 95h, 0, 0, 8, 95h, 0Dh, 0DDh, 4, 94h
3261  19B4 00 00 08 95
3261  19B8 0D DD 04 94
3262  19BC F4 25 04 96                  db 0F4h, 25h, 4, 96h, 0, 0, 8, 96h, 0Ch, 0DBh, 4, 95h
3262  19C0 00 00 08 96
3262  19C4 0C DB 04 95
3263  19C8 F4 28 04 97                  db 0F4h, 28h, 4, 97h, 0, 0, 8, 97h, 0Ch, 0D8h, 4, 0F7h
3263  19CC 00 00 08 97
3263  19D0 0C D8 04 F7
3264  19D4 00 04 C7 19                  db 0, 4, 0C7h, 19h, 93h, 0Eh, 0E1h, 4, 91h, 0, 0, 8, 8Fh
3264  19D8 93 0E E1 04
3264  19DC 91 00 00 08
3264  19E0 8F
3265  19E1 F0 1C 04 91                  db 0F0h, 1Ch, 4, 91h, 10h, 0E4h, 4, 8Fh, 0, 0, 8, 8Fh
3265  19E5 10 E4 04 8F
3265  19E9 00 00 08 8F
3266  19ED F0 1C 04 91                  db 0F0h, 1Ch, 4, 91h, 10h, 0E4h, 4, 8Fh, 0, 0, 8, 8Fh
3266  19F1 10 E4 04 8F
3266  19F5 00 00 08 8F
3267  19F9 F0 1C 04 EE                  db 0F0h, 1Ch, 4, 0EEh, 0, 80h, 0, 0, 30h, 0F2h, 0EFh, 2Fh
3267  19FD 00 80 00 00
3267  1A01 30 F2 EF 2F
3268  1A05 F0 0C 80 08                  db 0F0h, 0Ch, 80h, 8, 0F6h, 7Ah, 19h
3268  1A09 F6 7A 19
3269  1A0C 01 A0 06 01    		        db 1, 0A0h, 6, 1, 16h, 1Ah, 0, 0, 0, 0, 0EFh, 30h, 0B8h
3269  1A10 16 1A 00 00
3269  1A14 00 00 EF 30
3269  1A18 B8
3270  1A19                                                      ; DATA XREF: RAM:SFXPtrs↑o
3271  1A19 9C 4D 02 B1                  db 9Ch, 4Dh, 2, 0B1h, 6Bh, 8Fh, 2, 0ADh, 0CDh, 7Eh, 2
3271  1A1D 6B 8F 02 AD
3271  1A21 CD 7E 02
3272  1A24 A9 49 02 02                  db 0A9h, 49h, 2, 2, 0A6h, 1Dh, 0AAh, 2, 0A2h, 17h, 67h
3272  1A28 A6 1D AA 02
3272  1A2C A2 17 67
3273  1A2F 01 9E EF 3D                  db 1, 9Eh, 0EFh, 3Dh, 1, 9Bh, 3Ah, 6, 1, 97h, 0FFh, 0D8h
3273  1A33 01 9B 3A 06
3273  1A37 01 97 FF D8
3274  1A3B 01 93 B4 BB                  db 1, 93h, 0B4h, 0BBh, 1, 90h, 0FCh, 56h, 2, 80h, 0, 0
3274  1A3F 01 90 FC 56
3274  1A43 02 80 00 00
3275  1A47 05 F2                        db 5, 0F2h
3276  1A49 01 A0 02 01    		        db 1, 0A0h, 2, 1, 53h, 1Ah, 0, 0, 0, 0, 0FEh, 3, 3, 0
3276  1A4D 53 1A 00 00
3276  1A51 00 00 FE 03
3276  1A55 03 00
3277  1A57                                                      ; DATA XREF: RAM:SFXPtrs↑o
3278  1A57 00 EF 31 83                  db 0, 0EFh, 31h, 83h, 0, 0, 2, 90h, 32h, 0ABh, 6, 0EEh
3278  1A5B 00 00 02 90
3278  1A5F 32 AB 06 EE
3279  1A63 01 88 64 59                  db 1, 88h, 64h, 59h, 1, 0EEh, 0, 80h, 0, 0, 10h, 0F2h
3279  1A67 01 EE 00 80
3279  1A6B 00 00 10 F2
3280  1A6F 03 80 02 01    		        db 3, 80h, 2, 1, 8Bh, 1Ah, 0, 0, 0, 0, 80h, 5, 1, 98h
3280  1A73 8B 1A 00 00
3280  1A77 00 00 80 05
3280  1A7B 01 98
3281  1A7D                                                      ; DATA XREF: RAM:SFXPtrs↑o
3282  1A7D 1A 00 00 00                  db 1Ah, 0, 0, 0, 0, 80h, 6, 1, 0A2h, 1Ah, 0, 0, 0, 0, 0FEh
3282  1A81 00 80 06 01
3282  1A85 A2 1A 00 00
3282  1A89 00 00 FE
3283  1A8C 00 00 00 00                  db 0, 0, 0, 0, 0EFh, 33h, 0F8h, 0ACh, 1Ah, 80h, 30h, 0F2h
3283  1A90 EF 33 F8 AC
3283  1A94 1A 80 30 F2
3284  1A98 EF 33 80 04                  db 0EFh, 33h, 80h, 4, 0F8h, 0ACh, 1Ah, 80h, 28h, 0F2h
3284  1A9C F8 AC 1A 80
3284  1AA0 28 F2
3285  1AA2 EF 33 80 08                  db 0EFh, 33h, 80h, 8, 0F8h, 0ACh, 1Ah, 80h, 20h, 0F2h
3285  1AA6 F8 AC 1A 80
3285  1AAA 20 F2
3286  1AAC C2 06 C4 C6                  db 0C2h, 6, 0C4h, 0C6h, 0C8h, 0CAh, 0CCh, 0CEh, 0D0h, 0F9h
3286  1AB0 C8 CA CC CE
3286  1AB4 D0 F9
3287  1AB6 01 80 02 01    		        db 1, 80h, 2, 1, 0C0h, 1Ah, 0, 0, 0, 0, 0FEh, 3, 3, 0
3287  1ABA C0 1A 00 00
3287  1ABE 00 00 FE 03
3287  1AC2 03 00
3288  1AC4                                                      ; DATA XREF: RAM:SFXPtrs↑o
3289  1AC4 00 EF 34 FB                  db 0, 0EFh, 34h, 0FBh, 0F4h, 0FCh, 1, 85h, 0FCh, 0CFh
3289  1AC8 F4 FC 01 85
3289  1ACC FC CF
3290  1ACE 04 A2 E6 66                  db 4, 0A2h, 0E6h, 66h, 6, 0ABh, 0DBh, 0FBh, 5, 0FCh, 0
3290  1AD2 06 AB DB FB
3290  1AD6 05 FC 00
3291  1AD9 80 20 FB 18                  db 80h, 20h, 0FBh, 18h, 0EFh, 35h, 0FCh, 1, 0C8h, 0Bh
3291  1ADD EF 35 FC 01
3291  1AE1 C8 0B
3292  1AE3 86 14 FC 00                  db 86h, 14h, 0FCh, 0, 80h, 20h, 0F2h
3292  1AE7 80 20 F2
3293  1AEA 01 80 02 01    		        db 1, 80h, 2, 1, 0F4h, 1Ah, 0, 0, 0, 0, 0FEh, 3, 3, 0
3293  1AEE F4 1A 00 00
3293  1AF2 00 00 FE 03
3293  1AF6 03 00
3294  1AF8                                                      ; DATA XREF: RAM:SFXPtrs↑o
3295  1AF8 00 EF 38 A0                  db 0, 0EFh, 38h, 0A0h, 2, 0FCh, 1, 0EEh, 1, 9Dh, 0E3h
3295  1AFC 02 FC 01 EE
3295  1B00 01 9D E3
3296  1B03 A1 03 A3 30                  db 0A1h, 3, 0A3h, 30h, 0ECh, 2, 0EEh, 0, 0F7h, 0, 3, 0FBh
3296  1B07 EC 02 EE 00
3296  1B0B F7 00 03 FB
3297  1B0F 1A FC 00 A0                  db 1Ah, 0FCh, 0, 0A0h, 4, 0FCh, 1, 0EEh, 1, 9Dh, 0E3h
3297  1B13 04 FC 01 EE
3297  1B17 01 9D E3
3298  1B1A A1 03 A3 30                  db 0A1h, 3, 0A3h, 30h, 0ECh, 2, 0FBh, 1, 0F7h, 0, 10h
3298  1B1E EC 02 FB 01
3298  1B22 F7 00 10
3299  1B25 18 1B FB F0                  db 18h, 1Bh, 0FBh, 0F0h, 0FCh, 0, 80h, 40h, 0F2h
3299  1B29 FC 00 80 40
3299  1B2D F2
3300  1B2E 03 80 02 01    		        db 3, 80h, 2, 1, 4Ah, 1Bh, 0F4h, 0, 0, 4, 80h, 5, 1, 94h
3300  1B32 4A 1B F4 00
3300  1B36 00 04 80 05
3300  1B3A 01 94
3301  1B3C                                                      ; DATA XREF: RAM:SFXPtrs↑o
3302  1B3C 1B F4 00 00                  db 1Bh, 0F4h, 0, 0, 4, 80h, 6, 1, 0A8h, 1Bh, 0F5h, 0, 0
3302  1B40 04 80 06 01
3302  1B44 A8 1B F5 00
3302  1B48 00
3303  1B49 04 FE 02 03                  db 4, 0FEh, 2, 3, 3, 0, 0EFh, 39h, 0F0h, 0, 90h, 4, 8Fh
3303  1B4D 03 00 EF 39
3303  1B51 F0 00 90 04
3303  1B55 8F
3304  1B56 8E F7 00 02                  db 8Eh, 0F7h, 0, 2, 51h, 1Bh, 0F0h, 2, 90h, 4, 8Fh, 8Eh
3304  1B5A 51 1B F0 02
3304  1B5E 90 04 8F 8E
3305  1B62 F7 00 02 5E                  db 0F7h, 0, 2, 5Eh, 1Bh, 0F0h, 4, 90h, 3, 8Fh, 8Eh, 0F7h
3305  1B66 1B F0 04 90
3305  1B6A 03 8F 8E F7
3306  1B6E 00 03 69 1B                  db 0, 3, 69h, 1Bh, 0F0h, 8, 90h, 3, 8Fh, 8Eh, 0F7h, 0
3306  1B72 F0 08 90 03
3306  1B76 8F 8E F7 00
3307  1B7A 03 74 1B F0                  db 3, 74h, 1Bh, 0F0h, 0Ah, 90h, 2, 8Fh, 8Eh, 0F7h, 0, 0Ch
3307  1B7E 0A 90 02 8F
3307  1B82 8E F7 00 0C
3308  1B86 7F 1B F0 20                  db 7Fh, 1Bh, 0F0h, 20h, 90h, 1, 8Fh, 8Eh, 0F7h, 0, 0Ch
3308  1B8A 90 01 8F 8E
3308  1B8E F7 00 0C
3309  1B91 8A 1B F2 EF                  db 8Ah, 1Bh, 0F2h, 0EFh, 3Ah, 0BDh, 2, 80h, 1, 0B7h, 2
3309  1B95 3A BD 02 80
3309  1B99 01 B7 02
3310  1B9C 80 01 F7 00                  db 80h, 1, 0F7h, 0, 8, 96h, 1Bh, 93h, 70h, 80h, 40h, 0F2h
3310  1BA0 08 96 1B 93
3310  1BA4 70 80 40 F2
3311  1BA8 EF 3B E9 0D                  db 0EFh, 3Bh, 0E9h, 0Dh, 0EAh, 7, 0C0h, 4, 80h, 90h, 80h
3311  1BAC EA 07 C0 04
3311  1BB0 80 90 80
3312  1BB3 BD 04 80 02                  db 0BDh, 4, 80h, 2, 0FCh, 1, 0BDh, 0Fh, 0B1h, 20h, 0FCh
3312  1BB7 FC 01 BD 0F
3312  1BBB B1 20 FC
3313  1BBE 00 EE 01 8D                  db 0, 0EEh, 1, 8Dh, 60h, 0EEh, 0, 80h, 40h, 0F2h
3313  1BC2 60 EE 00 80
3313  1BC6 40 F2
3314  1BC8 03 80 02 01    		        db 3, 80h, 2, 1, 0E4h, 1Bh, 0F4h, 0, 0, 4, 80h, 5, 1, 0FDh
3314  1BCC E4 1B F4 00
3314  1BD0 00 04 80 05
3314  1BD4 01 FD
3315  1BD6                                                      ; DATA XREF: RAM:SFXPtrs↑o
3316  1BD6 1B F4 00 00                  db 1Bh, 0F4h, 0, 0, 4, 80h, 6, 1, 8, 1Ch, 0F5h, 0, 0, 4
3316  1BDA 04 80 06 01
3316  1BDE 08 1C F5 00
3316  1BE2 00 04
3317  1BE4 FE 03 02 01                  db 0FEh, 3, 2, 1, 0, 0EFh, 3Ch, 90h, 2, 0EEh, 1, 8Fh, 90h
3317  1BE8 00 EF 3C 90
3317  1BEC 02 EE 01 8F
3317  1BF0 90
3318  1BF1 02 8F F7 00                  db 2, 8Fh, 0F7h, 0, 0Ch, 0F0h, 1Bh, 0EEh, 0, 80h, 4, 0F2h
3318  1BF5 0C F0 1B EE
3318  1BF9 00 80 04 F2
3319  1BFD EF 3D A8 08                  db 0EFh, 3Dh, 0A8h, 8, 80h, 4, 96h, 14h, 80h, 20h, 0F2h
3319  1C01 80 04 96 14
3319  1C05 80 20 F2
3320  1C08 EF 3E FC 01                  db 0EFh, 3Eh, 0FCh, 1, 8Dh, 0E9h, 68h, 0Ch, 0FCh, 0, 0EEh
3320  1C0C 8D E9 68 0C
3320  1C10 FC 00 EE
3321  1C13 01 8E 18 EE                  db 1, 8Eh, 18h, 0EEh, 0, 80h, 10h, 0F2h
3321  1C17 00 80 10 F2
3322  1C1B 03 A0 02 01    		        db 3, 0A0h, 2, 1, 37h, 1Ch, 0F8h, 0, 0, 0, 80h, 5, 1, 6Eh
3322  1C1F 37 1C F8 00
3322  1C23 00 00 80 05
3322  1C27 01 6E
3323  1C29                                                      ; DATA XREF: RAM:SFXPtrs↑o
3324  1C29 1C F1 00 00                  db 1Ch, 0F1h, 0, 0, 0, 80h, 6, 1, 6Ch, 1Ch, 0F8h, 2, 0
3324  1C2D 00 80 06 01
3324  1C31 6C 1C F8 02
3324  1C35 00
3325  1C36 00 FE 02 03                  db 0, 0FEh, 2, 3, 3, 0, 0EFh, 1Eh, 0EFh, 1Eh, 87h, 0, 0
3325  1C3A 03 00 EF 1E
3325  1C3E EF 1E 87 00
3325  1C42 00
3326  1C43 03 80 00 00                  db 3, 80h, 0, 0, 3, 93h, 1Eh, 0CDh, 6, 80h, 0, 0, 3, 0F7h
3326  1C47 03 93 1E CD
3326  1C4B 06 80 00 00
3326  1C4F 03 F7
3327  1C51 00 10 3E 1C                  db 0, 10h, 3Eh, 1Ch, 0FEh, 2, 3, 1, 1, 0EFh, 37h, 8Dh
3327  1C55 FE 02 03 01
3327  1C59 01 EF 37 8D
3328  1C5D E8 50 03 E6                  db 0E8h, 50h, 3, 0E6h, 1, 0F7h, 0, 14h, 55h, 1Ch, 80h
3328  1C61 01 F7 00 14
3328  1C65 55 1C 80
3329  1C68 00 00 10 F2                  db 0, 0, 10h, 0F2h, 80h, 0Ah, 0EFh, 1Fh, 0A5h, 3, 0EEh
3329  1C6C 80 0A EF 1F
3329  1C70 A5 03 EE
3330  1C73 01 B7 01 EE                  db 1, 0B7h, 1, 0EEh, 0, 80h, 2, 0FCh, 1, 0A5h, 0Ah, 0BFh
3330  1C77 00 80 02 FC
3330  1C7B 01 A5 0A BF
3331  1C7F 08 FC 00 80                  db 8, 0FCh, 0, 80h, 4, 0F7h, 0, 12h, 6Eh, 1Ch, 0FCh, 1
3331  1C83 04 F7 00 12
3331  1C87 6E 1C FC 01
3332  1C8B A5 02 F1 18                  db 0A5h, 2, 0F1h, 18h, 0EEh, 1, 0F7h, 0, 6, 89h, 1Ch, 0FCh
3332  1C8F EE 01 F7 00
3332  1C93 06 89 1C FC
3333  1C97 00 EE 00 80                  db 0, 0EEh, 0, 80h, 20h, 0F2h
3333  1C9B 20 F2
3334  1C9D 01 80 02 01                  db 1, 80h, 2, 1, 0A7h, 1Ch, 0F8h, 0, 0, 0, 0FEh, 2, 3
3334  1CA1 A7 1C F8 00
3334  1CA5 00 00 FE 02
3334  1CA9 03
3335  1CAA                                                      ; DATA XREF: RAM:SFXPtrs↑o
3336  1CAA 01 01 EF 3F                  db 1, 1, 0EFh, 3Fh, 0FCh, 1, 8Dh, 0E8h, 50h, 0Ch, 0F2h
3336  1CAE FC 01 8D E8
3336  1CB2 50 0C F2
3337  1CB5 00                           db 0
3338  1CB6
# file closed: z80/sounddriver.asm
